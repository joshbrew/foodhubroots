var hh=Object.create;var ms=Object.defineProperty;var ph=Object.getOwnPropertyDescriptor;var mh=Object.getOwnPropertyNames;var fh=Object.getPrototypeOf,yh=Object.prototype.hasOwnProperty;var v=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var gh=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mh(e))!yh.call(n,i)&&i!==t&&ms(n,i,{get:()=>e[i],enumerable:!(r=ph(e,i))||r.enumerable});return n};var De=(n,e,t)=>(t=n!=null?hh(fh(n)):{},gh(e||!n||!n.__esModule?ms(t,"default",{value:n,enumerable:!0}):t,n));var yr=v((CA,Ih)=>{Ih.exports={name:"braintree",version:"3.29.0",description:"A library for server-side integrating with Braintree.",keywords:["braintree","payments"],homepage:"https://github.com/braintree/braintree_node",author:"Braintree <code@braintreepayments.com> (https://www.braintreepayments.com)",main:"index",directories:{lib:"./lib"},repository:{type:"git",url:"https://github.com/braintree/braintree_node.git"},engines:{node:">=10.0",npm:">=6"},dependencies:{"@braintree/wrap-promise":"2.1.0",dateformat:"4.5.1",xml2js:"0.5.0"},devDependencies:{chai:"^4.3.4",eslint:"^7.26.0","eslint-config-braintree":"^4.0.0","eslint-config-prettier":"^8.5.0",mocha:"^8.4.0","mocha-junit-reporter":"^2.1.0",prettier:"^2.7.1",sinon:"^10.0.0"},license:"MIT",scripts:{prettier:"prettier --write .",prelint:"prettier --check .",lint:"eslint lib/ test/",pretest:"npm run lint","test:unit":"mocha test/unit --recursive -r test/spec_helper","test:unit:report":"mocha test/unit --recursive -r test/spec_helper --reporter mocha-junit-reporter  --reporter-options mochaFile=tmp/build/unit_test_results.junit.xml","test:integration":"mocha --timeout 60000 --slow 2000 test/integration --recursive -r test/spec_helper","test:integration:report":"mocha --timeout 60000 --slow 2000 test/integration --recursive -r test/spec_helper --reporter mocha-junit-reporter  --reporter-options mochaFile=tmp/build/integration_test_results.junit.xml",test:"npm run test:unit"}}});var tt=v((vA,fs)=>{"use strict";var et=class n{static initClass(){let e=process.env.GATEWAY_PORT||"3000",t=process.env.GATEWAY_HOST||"localhost",r=process.env.GATEWAY_SSL==="true"||!1;this.Development=new n(t,e,"http://auth.venmo.dev:9292",r,"graphql.bt.local",8080),this.Qa=new n("gateway.qa.braintreepayments.com","443","https://auth.venmo.qa2.braintreegateway.com",!0,"payments-qa.dev.braintree-api.com","443"),this.Sandbox=new n("api.sandbox.braintreegateway.com","443","https://auth.sandbox.venmo.com",!0,"payments.sandbox.braintree-api.com","443"),this.Production=new n("api.braintreegateway.com","443","https://auth.venmo.com",!0,"payments.braintree-api.com","443")}constructor(e,t,r,i,o,s){this.server=e,this.port=t,this.authUrl=r,this.ssl=i,this.graphQLServer=o,this.graphQLPort=s}baseUrl(){let e=this.uriScheme()+this.server;return this===n.Development&&(e+=`:${this.port}`),e}baseGraphQLUrl(){let e=this.uriScheme()+this.graphQLServer;return this===n.Development&&(e+=`:${this.graphQLPort}`),e+="/graphql",e}uriScheme(){return this.ssl?"https://":"http://"}};et.initClass();fs.exports={Environment:et}});var rt=v(gr=>{(function(){gr.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(gr)});var ue=v((ys,Ce)=>{(function(){var n,e,t,r,i,o,s,l=[].slice,h={}.hasOwnProperty;n=function(){var f,b,C,I,m,w;if(w=arguments[0],m=2<=arguments.length?l.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(f=0,C=m.length;f<C;f++)if(I=m[f],I!=null)for(b in I)h.call(I,b)&&(w[b]=I[b]);return w},i=function(f){return!!f&&Object.prototype.toString.call(f)==="[object Function]"},o=function(f){var b;return!!f&&((b=typeof f)=="function"||b==="object")},t=function(f){return i(Array.isArray)?Array.isArray(f):Object.prototype.toString.call(f)==="[object Array]"},r=function(f){var b;if(t(f))return!f.length;for(b in f)if(h.call(f,b))return!1;return!0},s=function(f){var b,C;return o(f)&&(C=Object.getPrototypeOf(f))&&(b=C.constructor)&&typeof b=="function"&&b instanceof b&&Function.prototype.toString.call(b)===Function.prototype.toString.call(Object)},e=function(f){return i(f.valueOf)?f.valueOf():f},Ce.exports.assign=n,Ce.exports.isFunction=i,Ce.exports.isObject=o,Ce.exports.isArray=t,Ce.exports.isEmpty=r,Ce.exports.isPlainObject=s,Ce.exports.getValue=e}).call(ys)});var Ir=v((gs,Is)=>{(function(){var n;Is.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(gs)});var Cs=v((ws,As)=>{(function(){var n;As.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(ws)});var Ts=v((vs,bs)=>{(function(){var n;bs.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(vs)});var Ss=v((Ps,Ds)=>{(function(){var n,e,t;e=Cs(),t=Ts(),Ds.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,o){return!0},r.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},r}()}).call(Ps)});var H=v((Ns,Es)=>{(function(){Es.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Ns)});var wr=v((_s,Ms)=>{(function(){var n,e,t;n=H(),t=ie(),Ms.exports=e=function(){function r(i,o,s){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(_s)});var nt=v((xs,Os)=>{(function(){var n;Os.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(xs)});var it=v((Fs,qs)=>{(function(){var n,e,t,r,i,o,s,l,h,f=function(C,I){for(var m in I)b.call(I,m)&&(C[m]=I[m]);function w(){this.constructor=C}return w.prototype=I.prototype,C.prototype=new w,C.__super__=I.prototype,C},b={}.hasOwnProperty;h=ue(),l=h.isObject,s=h.isFunction,o=h.getValue,i=ie(),n=H(),e=wr(),r=nt(),qs.exports=t=function(C){f(I,C);function I(m,w,N){var M,D,F,p;if(I.__super__.constructor.call(this,m),w==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(w),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,N!=null&&this.attribute(N),m.type===n.Document&&(this.isRoot=!0,this.documentObject=m,m.rootObject=this,m.children)){for(p=m.children,D=0,F=p.length;D<F;D++)if(M=p[D],M.type===n.DocType){M.name=this.name;break}}}return Object.defineProperty(I.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(I.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(I.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(I.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(I.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(I.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(I.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(I.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),I.prototype.clone=function(){var m,w,N,M;N=Object.create(this),N.isRoot&&(N.documentObject=null),N.attribs={},M=this.attribs;for(w in M)b.call(M,w)&&(m=M[w],N.attribs[w]=m.clone());return N.children=[],this.children.forEach(function(D){var F;return F=D.clone(),F.parent=N,N.children.push(F)}),N},I.prototype.attribute=function(m,w){var N,M;if(m!=null&&(m=o(m)),l(m))for(N in m)b.call(m,N)&&(M=m[N],this.attribute(N,M));else s(w)&&(w=w.apply()),this.options.keepNullAttributes&&w==null?this.attribs[m]=new e(this,m,""):w!=null&&(this.attribs[m]=new e(this,m,w));return this},I.prototype.removeAttribute=function(m){var w,N,M;if(m==null)throw new Error("Missing attribute name. "+this.debugInfo());if(m=o(m),Array.isArray(m))for(N=0,M=m.length;N<M;N++)w=m[N],delete this.attribs[w];else delete this.attribs[m];return this},I.prototype.toString=function(m){return this.options.writer.element(this,this.options.writer.filterOptions(m))},I.prototype.att=function(m,w){return this.attribute(m,w)},I.prototype.a=function(m,w){return this.attribute(m,w)},I.prototype.getAttribute=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m].value:null},I.prototype.setAttribute=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getAttributeNode=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m]:null},I.prototype.setAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.removeAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getAttributeNS=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.setAttributeNS=function(m,w,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.removeAttributeNS=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getAttributeNodeNS=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.setAttributeNodeNS=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getElementsByTagNameNS=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.hasAttribute=function(m){return this.attribs.hasOwnProperty(m)},I.prototype.hasAttributeNS=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.setIdAttribute=function(m,w){return this.attribs.hasOwnProperty(m)?this.attribs[m].isId:w},I.prototype.setIdAttributeNS=function(m,w,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.setIdAttributeNode=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getElementsByTagNameNS=function(m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getElementsByClassName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.isEqualNode=function(m){var w,N,M;if(!I.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.namespaceURI!==this.namespaceURI||m.prefix!==this.prefix||m.localName!==this.localName||m.attribs.length!==this.attribs.length)return!1;for(w=N=0,M=this.attribs.length-1;0<=M?N<=M:N>=M;w=0<=M?++N:--N)if(!this.attribs[w].isEqualNode(m.attribs[w]))return!1;return!0},I}(i)}).call(Fs)});var Ve=v((ks,Rs)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function l(){this.constructor=i}return l.prototype=o.prototype,i.prototype=new l,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=ie(),Rs.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(ks)});var st=v((Ls,Us)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=H(),t=Ve(),Us.exports=e=function(o){r(s,o);function s(l,h){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(h)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(l){return this.options.writer.cdata(this,this.options.writer.filterOptions(l))},s}(t)}).call(Ls)});var ot=v((Vs,js)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=H(),e=Ve(),js.exports=t=function(o){r(s,o);function s(l,h){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(h)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(l){return this.options.writer.comment(this,this.options.writer.filterOptions(l))},s}(e)}).call(Vs)});var at=v((Bs,Gs)=>{(function(){var n,e,t,r,i=function(s,l){for(var h in l)o.call(l,h)&&(s[h]=l[h]);function f(){this.constructor=s}return f.prototype=l.prototype,s.prototype=new f,s.__super__=l.prototype,s},o={}.hasOwnProperty;r=ue().isObject,t=ie(),n=H(),Gs.exports=e=function(s){i(l,s);function l(h,f,b,C){var I;l.__super__.constructor.call(this,h),r(f)&&(I=f,f=I.version,b=I.encoding,C=I.standalone),f||(f="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(f),b!=null&&(this.encoding=this.stringify.xmlEncoding(b)),C!=null&&(this.standalone=this.stringify.xmlStandalone(C))}return l.prototype.toString=function(h){return this.options.writer.declaration(this,this.options.writer.filterOptions(h))},l}(t)}).call(Bs)});var ct=v(($s,Xs)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=ie(),n=H(),Xs.exports=e=function(o){r(s,o);function s(l,h,f,b,C,I){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(f==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(h));if(!b)throw new Error("Missing DTD attribute type. "+this.debugInfo(h));if(!C)throw new Error("Missing DTD attribute default. "+this.debugInfo(h));if(C.indexOf("#")!==0&&(C="#"+C),!C.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(h));if(I&&!C.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(h));this.elementName=this.stringify.name(h),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(f),this.attributeType=this.stringify.dtdAttType(b),I&&(this.defaultValue=this.stringify.dtdAttDefault(I)),this.defaultValueType=C}return s.prototype.toString=function(l){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(l))},s}(t)}).call($s)});var ut=v((Hs,Ks)=>{(function(){var n,e,t,r,i=function(s,l){for(var h in l)o.call(l,h)&&(s[h]=l[h]);function f(){this.constructor=s}return f.prototype=l.prototype,s.prototype=new f,s.__super__=l.prototype,s},o={}.hasOwnProperty;r=ue().isObject,t=ie(),n=H(),Ks.exports=e=function(s){i(l,s);function l(h,f,b,C){if(l.__super__.constructor.call(this,h),b==null)throw new Error("Missing DTD entity name. "+this.debugInfo(b));if(C==null)throw new Error("Missing DTD entity value. "+this.debugInfo(b));if(this.pe=!!f,this.name=this.stringify.name(b),this.type=n.EntityDeclaration,!r(C))this.value=this.stringify.dtdEntityValue(C),this.internal=!0;else{if(!C.pubID&&!C.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(b));if(C.pubID&&!C.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(b));if(this.internal=!1,C.pubID!=null&&(this.pubID=this.stringify.dtdPubID(C.pubID)),C.sysID!=null&&(this.sysID=this.stringify.dtdSysID(C.sysID)),C.nData!=null&&(this.nData=this.stringify.dtdNData(C.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(b))}}return Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return null}}),l.prototype.toString=function(h){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(h))},l}(t)}).call(Hs)});var lt=v((Ws,zs)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=ie(),n=H(),zs.exports=e=function(o){r(s,o);function s(l,h,f){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing DTD element name. "+this.debugInfo());f||(f="(#PCDATA)"),Array.isArray(f)&&(f="("+f.join(",")+")"),this.name=this.stringify.name(h),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(f)}return s.prototype.toString=function(l){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(l))},s}(t)}).call(Ws)});var dt=v((Qs,Ys)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=ie(),n=H(),Ys.exports=e=function(o){r(s,o);function s(l,h,f){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing DTD notation name. "+this.debugInfo(h));if(!f.pubID&&!f.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(h));this.name=this.stringify.name(h),this.type=n.NotationDeclaration,f.pubID!=null&&(this.pubID=this.stringify.dtdPubID(f.pubID)),f.sysID!=null&&(this.sysID=this.stringify.dtdSysID(f.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(l){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(l))},s}(t)}).call(Qs)});var ht=v((Js,Zs)=>{(function(){var n,e,t,r,i,o,s,l,h,f=function(C,I){for(var m in I)b.call(I,m)&&(C[m]=I[m]);function w(){this.constructor=C}return w.prototype=I.prototype,C.prototype=new w,C.__super__=I.prototype,C},b={}.hasOwnProperty;h=ue().isObject,l=ie(),n=H(),e=ct(),r=ut(),t=lt(),i=dt(),s=nt(),Zs.exports=o=function(C){f(I,C);function I(m,w,N){var M,D,F,p,u,a;if(I.__super__.constructor.call(this,m),this.type=n.DocType,m.children){for(p=m.children,D=0,F=p.length;D<F;D++)if(M=p[D],M.type===n.Element){this.name=M.name;break}}this.documentObject=m,h(w)&&(u=w,w=u.pubID,N=u.sysID),N==null&&(a=[w,N],N=a[0],w=a[1]),w!=null&&(this.pubID=this.stringify.dtdPubID(w)),N!=null&&(this.sysID=this.stringify.dtdSysID(N))}return Object.defineProperty(I.prototype,"entities",{get:function(){var m,w,N,M,D;for(M={},D=this.children,w=0,N=D.length;w<N;w++)m=D[w],m.type===n.EntityDeclaration&&!m.pe&&(M[m.name]=m);return new s(M)}}),Object.defineProperty(I.prototype,"notations",{get:function(){var m,w,N,M,D;for(M={},D=this.children,w=0,N=D.length;w<N;w++)m=D[w],m.type===n.NotationDeclaration&&(M[m.name]=m);return new s(M)}}),Object.defineProperty(I.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(I.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(I.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),I.prototype.element=function(m,w){var N;return N=new t(this,m,w),this.children.push(N),this},I.prototype.attList=function(m,w,N,M,D){var F;return F=new e(this,m,w,N,M,D),this.children.push(F),this},I.prototype.entity=function(m,w){var N;return N=new r(this,!1,m,w),this.children.push(N),this},I.prototype.pEntity=function(m,w){var N;return N=new r(this,!0,m,w),this.children.push(N),this},I.prototype.notation=function(m,w){var N;return N=new i(this,m,w),this.children.push(N),this},I.prototype.toString=function(m){return this.options.writer.docType(this,this.options.writer.filterOptions(m))},I.prototype.ele=function(m,w){return this.element(m,w)},I.prototype.att=function(m,w,N,M,D){return this.attList(m,w,N,M,D)},I.prototype.ent=function(m,w){return this.entity(m,w)},I.prototype.pent=function(m,w){return this.pEntity(m,w)},I.prototype.not=function(m,w){return this.notation(m,w)},I.prototype.up=function(){return this.root()||this.documentObject},I.prototype.isEqualNode=function(m){return!(!I.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.name!==this.name||m.publicId!==this.publicId||m.systemId!==this.systemId)},I}(l)}).call(Js)});var pt=v((eo,to)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=H(),e=ie(),to.exports=t=function(o){r(s,o);function s(l,h){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(h)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(l){return this.options.writer.raw(this,this.options.writer.filterOptions(l))},s}(e)}).call(eo)});var mt=v((ro,no)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=H(),e=Ve(),no.exports=t=function(o){r(s,o);function s(l,h){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(h)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var l,h,f;for(f="",h=this.previousSibling;h;)f=h.data+f,h=h.previousSibling;for(f+=this.data,l=this.nextSibling;l;)f=f+l.data,l=l.nextSibling;return f}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(l){return this.options.writer.text(this,this.options.writer.filterOptions(l))},s.prototype.splitText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(ro)});var ft=v((io,so)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=H(),e=Ve(),so.exports=t=function(o){r(s,o);function s(l,h,f){if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(h),this.name=this.target,f&&(this.value=this.stringify.insValue(f))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(l){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(l))},s.prototype.isEqualNode=function(l){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.target!==this.target)},s}(e)}).call(io)});var Ar=v((oo,ao)=>{(function(){var n,e,t,r=function(o,s){for(var l in s)i.call(s,l)&&(o[l]=s[l]);function h(){this.constructor=o}return h.prototype=s.prototype,o.prototype=new h,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=ie(),n=H(),ao.exports=e=function(o){r(s,o);function s(l){s.__super__.constructor.call(this,l),this.type=n.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(l){return""},s}(t)}).call(oo)});var lo=v((co,uo)=>{(function(){var n;uo.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(co)});var mo=v((ho,po)=>{(function(){po.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(ho)});var ie=v((fo,yo)=>{(function(){var n,e,t,r,i,o,s,l,h,f,b,C,I,m,w,N,M,D,F,p={}.hasOwnProperty;F=ue(),D=F.isObject,M=F.isFunction,N=F.isEmpty,w=F.getValue,l=null,t=null,r=null,i=null,o=null,I=null,m=null,C=null,s=null,e=null,b=null,h=null,n=null,yo.exports=f=function(){function u(a){this.parent=a,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=it(),t=st(),r=ot(),i=at(),o=ht(),I=pt(),m=mt(),C=ft(),s=Ar(),e=H(),b=lo(),h=nt(),n=mo())}return Object.defineProperty(u.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(u.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(u.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(u.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(u.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new b(this.children)),this.childNodeList}}),Object.defineProperty(u.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(u.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(u.prototype,"previousSibling",{get:function(){var a;return a=this.parent.children.indexOf(this),this.parent.children[a-1]||null}}),Object.defineProperty(u.prototype,"nextSibling",{get:function(){var a;return a=this.parent.children.indexOf(this),this.parent.children[a+1]||null}}),Object.defineProperty(u.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(u.prototype,"textContent",{get:function(){var a,g,T,y,E;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(E="",y=this.children,g=0,T=y.length;g<T;g++)a=y[g],a.textContent&&(E+=a.textContent);return E}else return null},set:function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),u.prototype.setParent=function(a){var g,T,y,E,A;for(this.parent=a,a&&(this.options=a.options,this.stringify=a.stringify),E=this.children,A=[],T=0,y=E.length;T<y;T++)g=E[T],A.push(g.setParent(this));return A},u.prototype.element=function(a,g,T){var y,E,A,S,O,_,L,G,k,K,j;if(_=null,g===null&&T==null&&(k=[{},null],g=k[0],T=k[1]),g==null&&(g={}),g=w(g),D(g)||(K=[g,T],T=K[0],g=K[1]),a!=null&&(a=w(a)),Array.isArray(a))for(A=0,L=a.length;A<L;A++)E=a[A],_=this.element(E);else if(M(a))_=this.element(a.apply());else if(D(a)){for(O in a)if(p.call(a,O))if(j=a[O],M(j)&&(j=j.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&O.indexOf(this.stringify.convertAttKey)===0)_=this.attribute(O.substr(this.stringify.convertAttKey.length),j);else if(!this.options.separateArrayItems&&Array.isArray(j)&&N(j))_=this.dummy();else if(D(j)&&N(j))_=this.element(O);else if(!this.options.keepNullNodes&&j==null)_=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(j))for(S=0,G=j.length;S<G;S++)E=j[S],y={},y[O]=E,_=this.element(y);else D(j)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&O.indexOf(this.stringify.convertTextKey)===0?_=this.element(j):(_=this.element(O),_.element(j)):_=this.element(O,j)}else!this.options.keepNullNodes&&T===null?_=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&a.indexOf(this.stringify.convertTextKey)===0?_=this.text(T):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&a.indexOf(this.stringify.convertCDataKey)===0?_=this.cdata(T):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&a.indexOf(this.stringify.convertCommentKey)===0?_=this.comment(T):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&a.indexOf(this.stringify.convertRawKey)===0?_=this.raw(T):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&a.indexOf(this.stringify.convertPIKey)===0?_=this.instruction(a.substr(this.stringify.convertPIKey.length),T):_=this.node(a,g,T);if(_==null)throw new Error("Could not create any elements with: "+a+". "+this.debugInfo());return _},u.prototype.insertBefore=function(a,g,T){var y,E,A,S,O;if(a?.type)return A=a,S=g,A.setParent(this),S?(E=children.indexOf(S),O=children.splice(E),children.push(A),Array.prototype.push.apply(children,O)):children.push(A),A;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(a));return E=this.parent.children.indexOf(this),O=this.parent.children.splice(E),y=this.parent.element(a,g,T),Array.prototype.push.apply(this.parent.children,O),y},u.prototype.insertAfter=function(a,g,T){var y,E,A;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(a));return E=this.parent.children.indexOf(this),A=this.parent.children.splice(E+1),y=this.parent.element(a,g,T),Array.prototype.push.apply(this.parent.children,A),y},u.prototype.remove=function(){var a,g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return a=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[a,a-a+1].concat(g=[])),this.parent},u.prototype.node=function(a,g,T){var y,E;return a!=null&&(a=w(a)),g||(g={}),g=w(g),D(g)||(E=[g,T],T=E[0],g=E[1]),y=new l(this,a,g),T!=null&&y.text(T),this.children.push(y),y},u.prototype.text=function(a){var g;return D(a)&&this.element(a),g=new m(this,a),this.children.push(g),this},u.prototype.cdata=function(a){var g;return g=new t(this,a),this.children.push(g),this},u.prototype.comment=function(a){var g;return g=new r(this,a),this.children.push(g),this},u.prototype.commentBefore=function(a){var g,T,y;return T=this.parent.children.indexOf(this),y=this.parent.children.splice(T),g=this.parent.comment(a),Array.prototype.push.apply(this.parent.children,y),this},u.prototype.commentAfter=function(a){var g,T,y;return T=this.parent.children.indexOf(this),y=this.parent.children.splice(T+1),g=this.parent.comment(a),Array.prototype.push.apply(this.parent.children,y),this},u.prototype.raw=function(a){var g;return g=new I(this,a),this.children.push(g),this},u.prototype.dummy=function(){var a;return a=new s(this),a},u.prototype.instruction=function(a,g){var T,y,E,A,S;if(a!=null&&(a=w(a)),g!=null&&(g=w(g)),Array.isArray(a))for(A=0,S=a.length;A<S;A++)T=a[A],this.instruction(T);else if(D(a))for(T in a)p.call(a,T)&&(y=a[T],this.instruction(T,y));else M(g)&&(g=g.apply()),E=new C(this,a,g),this.children.push(E);return this},u.prototype.instructionBefore=function(a,g){var T,y,E;return y=this.parent.children.indexOf(this),E=this.parent.children.splice(y),T=this.parent.instruction(a,g),Array.prototype.push.apply(this.parent.children,E),this},u.prototype.instructionAfter=function(a,g){var T,y,E;return y=this.parent.children.indexOf(this),E=this.parent.children.splice(y+1),T=this.parent.instruction(a,g),Array.prototype.push.apply(this.parent.children,E),this},u.prototype.declaration=function(a,g,T){var y,E;return y=this.document(),E=new i(y,a,g,T),y.children.length===0?y.children.unshift(E):y.children[0].type===e.Declaration?y.children[0]=E:y.children.unshift(E),y.root()||y},u.prototype.dtd=function(a,g){var T,y,E,A,S,O,_,L,G,k;for(y=this.document(),E=new o(y,a,g),G=y.children,A=S=0,_=G.length;S<_;A=++S)if(T=G[A],T.type===e.DocType)return y.children[A]=E,E;for(k=y.children,A=O=0,L=k.length;O<L;A=++O)if(T=k[A],T.isRoot)return y.children.splice(A,0,E),E;return y.children.push(E),E},u.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},u.prototype.root=function(){var a;for(a=this;a;){if(a.type===e.Document)return a.rootObject;if(a.isRoot)return a;a=a.parent}},u.prototype.document=function(){var a;for(a=this;a;){if(a.type===e.Document)return a;a=a.parent}},u.prototype.end=function(a){return this.document().end(a)},u.prototype.prev=function(){var a;if(a=this.parent.children.indexOf(this),a<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[a-1]},u.prototype.next=function(){var a;if(a=this.parent.children.indexOf(this),a===-1||a===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[a+1]},u.prototype.importDocument=function(a){var g;return g=a.root().clone(),g.parent=this,g.isRoot=!1,this.children.push(g),this},u.prototype.debugInfo=function(a){var g,T;return a=a||this.name,a==null&&!((g=this.parent)!=null&&g.name)?"":a==null?"parent: <"+this.parent.name+">":(T=this.parent)!=null&&T.name?"node: <"+a+">, parent: <"+this.parent.name+">":"node: <"+a+">"},u.prototype.ele=function(a,g,T){return this.element(a,g,T)},u.prototype.nod=function(a,g,T){return this.node(a,g,T)},u.prototype.txt=function(a){return this.text(a)},u.prototype.dat=function(a){return this.cdata(a)},u.prototype.com=function(a){return this.comment(a)},u.prototype.ins=function(a,g){return this.instruction(a,g)},u.prototype.doc=function(){return this.document()},u.prototype.dec=function(a,g,T){return this.declaration(a,g,T)},u.prototype.e=function(a,g,T){return this.element(a,g,T)},u.prototype.n=function(a,g,T){return this.node(a,g,T)},u.prototype.t=function(a){return this.text(a)},u.prototype.d=function(a){return this.cdata(a)},u.prototype.c=function(a){return this.comment(a)},u.prototype.r=function(a){return this.raw(a)},u.prototype.i=function(a,g){return this.instruction(a,g)},u.prototype.u=function(){return this.up()},u.prototype.importXMLBuilder=function(a){return this.importDocument(a)},u.prototype.replaceChild=function(a,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.removeChild=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.appendChild=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.hasChildNodes=function(){return this.children.length!==0},u.prototype.cloneNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isSupported=function(a,g){return!0},u.prototype.hasAttributes=function(){return this.attribs.length!==0},u.prototype.compareDocumentPosition=function(a){var g,T;return g=this,g===a?0:this.document()!==a.document()?(T=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?T|=n.Preceding:T|=n.Following,T):g.isAncestor(a)?n.Contains|n.Preceding:g.isDescendant(a)?n.Contains|n.Following:g.isPreceding(a)?n.Preceding:n.Following},u.prototype.isSameNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupPrefix=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isDefaultNamespace=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupNamespaceURI=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isEqualNode=function(a){var g,T,y;if(a.nodeType!==this.nodeType||a.children.length!==this.children.length)return!1;for(g=T=0,y=this.children.length-1;0<=y?T<=y:T>=y;g=0<=y?++T:--T)if(!this.children[g].isEqualNode(a.children[g]))return!1;return!0},u.prototype.getFeature=function(a,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.setUserData=function(a,g,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getUserData=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.contains=function(a){return a?a===this||this.isDescendant(a):!1},u.prototype.isDescendant=function(a){var g,T,y,E,A;for(A=this.children,y=0,E=A.length;y<E;y++)if(g=A[y],a===g||(T=g.isDescendant(a),T))return!0;return!1},u.prototype.isAncestor=function(a){return a.isDescendant(this)},u.prototype.isPreceding=function(a){var g,T;return g=this.treePosition(a),T=this.treePosition(this),g===-1||T===-1?!1:g<T},u.prototype.isFollowing=function(a){var g,T;return g=this.treePosition(a),T=this.treePosition(this),g===-1||T===-1?!1:g>T},u.prototype.treePosition=function(a){var g,T;return T=0,g=!1,this.foreachTreeNode(this.document(),function(y){if(T++,!g&&y===a)return g=!0}),g?T:-1},u.prototype.foreachTreeNode=function(a,g){var T,y,E,A,S;for(a||(a=this.document()),A=a.children,y=0,E=A.length;y<E;y++){if(T=A[y],S=g(T))return S;if(S=this.foreachTreeNode(T,g),S)return S}},u}()}).call(fo)});var Cr=v((go,Io)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;Io.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,l;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(o in s)t.call(s,o)&&(l=s[o],this[o]=l)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var o,s;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},r.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(go)});var je=v((wo,Ao)=>{(function(){Ao.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(wo)});var vr=v((Co,vo)=>{(function(){var n,e,t,r,i,o,s,l,h,f,b,C,I,m,w,N,M,D={}.hasOwnProperty;M=ue().assign,n=H(),h=at(),f=ht(),t=st(),r=ot(),C=it(),m=pt(),w=mt(),I=ft(),b=Ar(),i=ct(),o=lt(),s=ut(),l=dt(),e=je(),vo.exports=N=function(){function F(p){var u,a,g;p||(p={}),this.options=p,a=p.writer||{};for(u in a)D.call(a,u)&&(g=a[u],this["_"+u]=this[u],this[u]=g)}return F.prototype.filterOptions=function(p){var u,a,g,T,y,E,A,S;return p||(p={}),p=M({},this.options,p),u={writer:this},u.pretty=p.pretty||!1,u.allowEmpty=p.allowEmpty||!1,u.indent=(a=p.indent)!=null?a:"  ",u.newline=(g=p.newline)!=null?g:`
`,u.offset=(T=p.offset)!=null?T:0,u.dontPrettyTextNodes=(y=(E=p.dontPrettyTextNodes)!=null?E:p.dontprettytextnodes)!=null?y:0,u.spaceBeforeSlash=(A=(S=p.spaceBeforeSlash)!=null?S:p.spacebeforeslash)!=null?A:"",u.spaceBeforeSlash===!0&&(u.spaceBeforeSlash=" "),u.suppressPrettyCount=0,u.user={},u.state=e.None,u},F.prototype.indent=function(p,u,a){var g;return!u.pretty||u.suppressPrettyCount?"":u.pretty&&(g=(a||0)+u.offset+1,g>0)?new Array(g).join(u.indent):""},F.prototype.endline=function(p,u,a){return!u.pretty||u.suppressPrettyCount?"":u.newline},F.prototype.attribute=function(p,u,a){var g;return this.openAttribute(p,u,a),g=" "+p.name+'="'+p.value+'"',this.closeAttribute(p,u,a),g},F.prototype.cdata=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<![CDATA[",u.state=e.InsideTag,g+=p.value,u.state=e.CloseTag,g+="]]>"+this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.comment=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<!-- ",u.state=e.InsideTag,g+=p.value,u.state=e.CloseTag,g+=" -->"+this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.declaration=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<?xml",u.state=e.InsideTag,g+=' version="'+p.version+'"',p.encoding!=null&&(g+=' encoding="'+p.encoding+'"'),p.standalone!=null&&(g+=' standalone="'+p.standalone+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+"?>",g+=this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.docType=function(p,u,a){var g,T,y,E,A;if(a||(a=0),this.openNode(p,u,a),u.state=e.OpenTag,E=this.indent(p,u,a),E+="<!DOCTYPE "+p.root().name,p.pubID&&p.sysID?E+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(E+=' SYSTEM "'+p.sysID+'"'),p.children.length>0){for(E+=" [",E+=this.endline(p,u,a),u.state=e.InsideTag,A=p.children,T=0,y=A.length;T<y;T++)g=A[T],E+=this.writeChildNode(g,u,a+1);u.state=e.CloseTag,E+="]"}return u.state=e.CloseTag,E+=u.spaceBeforeSlash+">",E+=this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),E},F.prototype.element=function(p,u,a){var g,T,y,E,A,S,O,_,L,G,k,K,j,Pe;a||(a=0),G=!1,k="",this.openNode(p,u,a),u.state=e.OpenTag,k+=this.indent(p,u,a)+"<"+p.name,K=p.attribs;for(L in K)D.call(K,L)&&(g=K[L],k+=this.attribute(g,u,a));if(y=p.children.length,E=y===0?null:p.children[0],y===0||p.children.every(function(ce){return(ce.type===n.Text||ce.type===n.Raw)&&ce.value===""}))u.allowEmpty?(k+=">",u.state=e.CloseTag,k+="</"+p.name+">"+this.endline(p,u,a)):(u.state=e.CloseTag,k+=u.spaceBeforeSlash+"/>"+this.endline(p,u,a));else if(u.pretty&&y===1&&(E.type===n.Text||E.type===n.Raw)&&E.value!=null)k+=">",u.state=e.InsideTag,u.suppressPrettyCount++,G=!0,k+=this.writeChildNode(E,u,a+1),u.suppressPrettyCount--,G=!1,u.state=e.CloseTag,k+="</"+p.name+">"+this.endline(p,u,a);else{if(u.dontPrettyTextNodes){for(j=p.children,A=0,O=j.length;A<O;A++)if(T=j[A],(T.type===n.Text||T.type===n.Raw)&&T.value!=null){u.suppressPrettyCount++,G=!0;break}}for(k+=">"+this.endline(p,u,a),u.state=e.InsideTag,Pe=p.children,S=0,_=Pe.length;S<_;S++)T=Pe[S],k+=this.writeChildNode(T,u,a+1);u.state=e.CloseTag,k+=this.indent(p,u,a)+"</"+p.name+">",G&&u.suppressPrettyCount--,k+=this.endline(p,u,a),u.state=e.None}return this.closeNode(p,u,a),k},F.prototype.writeChildNode=function(p,u,a){switch(p.type){case n.CData:return this.cdata(p,u,a);case n.Comment:return this.comment(p,u,a);case n.Element:return this.element(p,u,a);case n.Raw:return this.raw(p,u,a);case n.Text:return this.text(p,u,a);case n.ProcessingInstruction:return this.processingInstruction(p,u,a);case n.Dummy:return"";case n.Declaration:return this.declaration(p,u,a);case n.DocType:return this.docType(p,u,a);case n.AttributeDeclaration:return this.dtdAttList(p,u,a);case n.ElementDeclaration:return this.dtdElement(p,u,a);case n.EntityDeclaration:return this.dtdEntity(p,u,a);case n.NotationDeclaration:return this.dtdNotation(p,u,a);default:throw new Error("Unknown XML node type: "+p.constructor.name)}},F.prototype.processingInstruction=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<?",u.state=e.InsideTag,g+=p.target,p.value&&(g+=" "+p.value),u.state=e.CloseTag,g+=u.spaceBeforeSlash+"?>",g+=this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.raw=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a),u.state=e.InsideTag,g+=p.value,u.state=e.CloseTag,g+=this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.text=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a),u.state=e.InsideTag,g+=p.value,u.state=e.CloseTag,g+=this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.dtdAttList=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<!ATTLIST",u.state=e.InsideTag,g+=" "+p.elementName+" "+p.attributeName+" "+p.attributeType,p.defaultValueType!=="#DEFAULT"&&(g+=" "+p.defaultValueType),p.defaultValue&&(g+=' "'+p.defaultValue+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.dtdElement=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<!ELEMENT",u.state=e.InsideTag,g+=" "+p.name+" "+p.value,u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.dtdEntity=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<!ENTITY",u.state=e.InsideTag,p.pe&&(g+=" %"),g+=" "+p.name,p.value?g+=' "'+p.value+'"':(p.pubID&&p.sysID?g+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(g+=' SYSTEM "'+p.sysID+'"'),p.nData&&(g+=" NDATA "+p.nData)),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.dtdNotation=function(p,u,a){var g;return this.openNode(p,u,a),u.state=e.OpenTag,g=this.indent(p,u,a)+"<!NOTATION",u.state=e.InsideTag,g+=" "+p.name,p.pubID&&p.sysID?g+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.pubID?g+=' PUBLIC "'+p.pubID+'"':p.sysID&&(g+=' SYSTEM "'+p.sysID+'"'),u.state=e.CloseTag,g+=u.spaceBeforeSlash+">"+this.endline(p,u,a),u.state=e.None,this.closeNode(p,u,a),g},F.prototype.openNode=function(p,u,a){},F.prototype.closeNode=function(p,u,a){},F.prototype.openAttribute=function(p,u,a){},F.prototype.closeAttribute=function(p,u,a){},F}()}).call(Co)});var yt=v((bo,To)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function l(){this.constructor=i}return l.prototype=o.prototype,i.prototype=new l,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=vr(),To.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,l){var h,f,b,C,I;for(l=this.filterOptions(l),C="",I=s.children,f=0,b=I.length;f<b;f++)h=I[f],C+=this.writeChildNode(h,l,0);return l.pretty&&C.slice(-l.newline.length)===l.newline&&(C=C.slice(0,-l.newline.length)),C},o}(e)}).call(bo)});var br=v((Po,Do)=>{(function(){var n,e,t,r,i,o,s,l,h=function(b,C){for(var I in C)f.call(C,I)&&(b[I]=C[I]);function m(){this.constructor=b}return m.prototype=C.prototype,b.prototype=new m,b.__super__=C.prototype,b},f={}.hasOwnProperty;l=ue().isPlainObject,t=Ir(),e=Ss(),i=ie(),n=H(),s=Cr(),o=yt(),Do.exports=r=function(b){h(C,b);function C(I){C.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,I||(I={}),I.writer||(I.writer=new o),this.options=I,this.stringify=new s(I)}return Object.defineProperty(C.prototype,"implementation",{value:new t}),Object.defineProperty(C.prototype,"doctype",{get:function(){var I,m,w,N;for(N=this.children,m=0,w=N.length;m<w;m++)if(I=N[m],I.type===n.DocType)return I;return null}}),Object.defineProperty(C.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(C.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(C.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(C.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(C.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(C.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(C.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(C.prototype,"origin",{get:function(){return null}}),Object.defineProperty(C.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(C.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(C.prototype,"contentType",{get:function(){return null}}),C.prototype.end=function(I){var m;return m={},I?l(I)&&(m=I,I=this.options.writer):I=this.options.writer,I.document(this,I.filterOptions(m))},C.prototype.toString=function(I){return this.options.writer.document(this,this.options.writer.filterOptions(I))},C.prototype.createElement=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createTextNode=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createComment=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createCDATASection=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createProcessingInstruction=function(I,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createAttribute=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createEntityReference=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.getElementsByTagName=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.importNode=function(I,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createElementNS=function(I,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createAttributeNS=function(I,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.getElementsByTagNameNS=function(I,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.getElementById=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.adoptNode=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.renameNode=function(I,m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.getElementsByClassName=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createEvent=function(I){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createNodeIterator=function(I,m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},C.prototype.createTreeWalker=function(I,m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},C}(i)}).call(Po)});var Eo=v((So,No)=>{(function(){var n,e,t,r,i,o,s,l,h,f,b,C,I,m,w,N,M,D,F,p,u,a,g,T,y={}.hasOwnProperty;T=ue(),a=T.isObject,u=T.isFunction,g=T.isPlainObject,p=T.getValue,n=H(),C=br(),m=it(),r=st(),i=ot(),N=pt(),F=mt(),w=ft(),f=at(),b=ht(),o=ct(),l=ut(),s=lt(),h=dt(),t=wr(),D=Cr(),M=yt(),e=je(),No.exports=I=function(){function E(A,S,O){var _;this.name="?xml",this.type=n.Document,A||(A={}),_={},A.writer?g(A.writer)&&(_=A.writer,A.writer=new M):A.writer=new M,this.options=A,this.writer=A.writer,this.writerOptions=this.writer.filterOptions(_),this.stringify=new D(A),this.onDataCallback=S||function(){},this.onEndCallback=O||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return E.prototype.createChildNode=function(A){var S,O,_,L,G,k,K,j;switch(A.type){case n.CData:this.cdata(A.value);break;case n.Comment:this.comment(A.value);break;case n.Element:_={},K=A.attribs;for(O in K)y.call(K,O)&&(S=K[O],_[O]=S.value);this.node(A.name,_);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(A.value);break;case n.Text:this.text(A.value);break;case n.ProcessingInstruction:this.instruction(A.target,A.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+A.constructor.name)}for(j=A.children,G=0,k=j.length;G<k;G++)L=j[G],this.createChildNode(L),L.type===n.Element&&this.up();return this},E.prototype.dummy=function(){return this},E.prototype.node=function(A,S,O){var _;if(A==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(A));return this.openCurrent(),A=p(A),S==null&&(S={}),S=p(S),a(S)||(_=[S,O],O=_[0],S=_[1]),this.currentNode=new m(this,A,S),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,O!=null&&this.text(O),this},E.prototype.element=function(A,S,O){var _,L,G,k,K,j;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(A)||a(A)||u(A))for(k=this.options.noValidation,this.options.noValidation=!0,j=new C(this.options).element("TEMP_ROOT"),j.element(A),this.options.noValidation=k,K=j.children,L=0,G=K.length;L<G;L++)_=K[L],this.createChildNode(_),_.type===n.Element&&this.up();else this.node(A,S,O);return this},E.prototype.attribute=function(A,S){var O,_;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(A));if(A!=null&&(A=p(A)),a(A))for(O in A)y.call(A,O)&&(_=A[O],this.attribute(O,_));else u(S)&&(S=S.apply()),this.options.keepNullAttributes&&S==null?this.currentNode.attribs[A]=new t(this,A,""):S!=null&&(this.currentNode.attribs[A]=new t(this,A,S));return this},E.prototype.text=function(A){var S;return this.openCurrent(),S=new F(this,A),this.onData(this.writer.text(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.cdata=function(A){var S;return this.openCurrent(),S=new r(this,A),this.onData(this.writer.cdata(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.comment=function(A){var S;return this.openCurrent(),S=new i(this,A),this.onData(this.writer.comment(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.raw=function(A){var S;return this.openCurrent(),S=new N(this,A),this.onData(this.writer.raw(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.instruction=function(A,S){var O,_,L,G,k;if(this.openCurrent(),A!=null&&(A=p(A)),S!=null&&(S=p(S)),Array.isArray(A))for(O=0,G=A.length;O<G;O++)_=A[O],this.instruction(_);else if(a(A))for(_ in A)y.call(A,_)&&(L=A[_],this.instruction(_,L));else u(S)&&(S=S.apply()),k=new w(this,A,S),this.onData(this.writer.processingInstruction(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},E.prototype.declaration=function(A,S,O){var _;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return _=new f(this,A,S,O),this.onData(this.writer.declaration(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.doctype=function(A,S,O){if(this.openCurrent(),A==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new b(this,S,O),this.currentNode.rootNodeName=A,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},E.prototype.dtdElement=function(A,S){var O;return this.openCurrent(),O=new s(this,A,S),this.onData(this.writer.dtdElement(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.attList=function(A,S,O,_,L){var G;return this.openCurrent(),G=new o(this,A,S,O,_,L),this.onData(this.writer.dtdAttList(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.entity=function(A,S){var O;return this.openCurrent(),O=new l(this,!1,A,S),this.onData(this.writer.dtdEntity(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.pEntity=function(A,S){var O;return this.openCurrent(),O=new l(this,!0,A,S),this.onData(this.writer.dtdEntity(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.notation=function(A,S){var O;return this.openCurrent(),O=new h(this,A,S),this.onData(this.writer.dtdNotation(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},E.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},E.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},E.prototype.openNode=function(A){var S,O,_,L;if(!A.isOpen){if(!this.root&&this.currentLevel===0&&A.type===n.Element&&(this.root=A),O="",A.type===n.Element){this.writerOptions.state=e.OpenTag,O=this.writer.indent(A,this.writerOptions,this.currentLevel)+"<"+A.name,L=A.attribs;for(_ in L)y.call(L,_)&&(S=L[_],O+=this.writer.attribute(S,this.writerOptions,this.currentLevel));O+=(A.children?">":"/>")+this.writer.endline(A,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,O=this.writer.indent(A,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+A.rootNodeName,A.pubID&&A.sysID?O+=' PUBLIC "'+A.pubID+'" "'+A.sysID+'"':A.sysID&&(O+=' SYSTEM "'+A.sysID+'"'),A.children?(O+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,O+=">"),O+=this.writer.endline(A,this.writerOptions,this.currentLevel);return this.onData(O,this.currentLevel),A.isOpen=!0}},E.prototype.closeNode=function(A){var S;if(!A.isClosed)return S="",this.writerOptions.state=e.CloseTag,A.type===n.Element?S=this.writer.indent(A,this.writerOptions,this.currentLevel)+"</"+A.name+">"+this.writer.endline(A,this.writerOptions,this.currentLevel):S=this.writer.indent(A,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(A,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(S,this.currentLevel),A.isClosed=!0},E.prototype.onData=function(A,S){return this.documentStarted=!0,this.onDataCallback(A,S+1)},E.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},E.prototype.debugInfo=function(A){return A==null?"":"node: <"+A+">"},E.prototype.ele=function(){return this.element.apply(this,arguments)},E.prototype.nod=function(A,S,O){return this.node(A,S,O)},E.prototype.txt=function(A){return this.text(A)},E.prototype.dat=function(A){return this.cdata(A)},E.prototype.com=function(A){return this.comment(A)},E.prototype.ins=function(A,S){return this.instruction(A,S)},E.prototype.dec=function(A,S,O){return this.declaration(A,S,O)},E.prototype.dtd=function(A,S,O){return this.doctype(A,S,O)},E.prototype.e=function(A,S,O){return this.element(A,S,O)},E.prototype.n=function(A,S,O){return this.node(A,S,O)},E.prototype.t=function(A){return this.text(A)},E.prototype.d=function(A){return this.cdata(A)},E.prototype.c=function(A){return this.comment(A)},E.prototype.r=function(A){return this.raw(A)},E.prototype.i=function(A,S){return this.instruction(A,S)},E.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.ent=function(A,S){return this.entity(A,S)},E.prototype.pent=function(A,S){return this.pEntity(A,S)},E.prototype.not=function(A,S){return this.notation(A,S)},E}()}).call(So)});var xo=v((_o,Mo)=>{(function(){var n,e,t,r,i=function(s,l){for(var h in l)o.call(l,h)&&(s[h]=l[h]);function f(){this.constructor=s}return f.prototype=l.prototype,s.prototype=new f,s.__super__=l.prototype,s},o={}.hasOwnProperty;n=H(),r=vr(),e=je(),Mo.exports=t=function(s){i(l,s);function l(h,f){this.stream=h,l.__super__.constructor.call(this,f)}return l.prototype.endline=function(h,f,b){return h.isLastRootNode&&f.state===e.CloseTag?"":l.__super__.endline.call(this,h,f,b)},l.prototype.document=function(h,f){var b,C,I,m,w,N,M,D,F;for(M=h.children,C=I=0,w=M.length;I<w;C=++I)b=M[C],b.isLastRootNode=C===h.children.length-1;for(f=this.filterOptions(f),D=h.children,F=[],m=0,N=D.length;m<N;m++)b=D[m],F.push(this.writeChildNode(b,f,0));return F},l.prototype.attribute=function(h,f,b){return this.stream.write(l.__super__.attribute.call(this,h,f,b))},l.prototype.cdata=function(h,f,b){return this.stream.write(l.__super__.cdata.call(this,h,f,b))},l.prototype.comment=function(h,f,b){return this.stream.write(l.__super__.comment.call(this,h,f,b))},l.prototype.declaration=function(h,f,b){return this.stream.write(l.__super__.declaration.call(this,h,f,b))},l.prototype.docType=function(h,f,b){var C,I,m,w;if(b||(b=0),this.openNode(h,f,b),f.state=e.OpenTag,this.stream.write(this.indent(h,f,b)),this.stream.write("<!DOCTYPE "+h.root().name),h.pubID&&h.sysID?this.stream.write(' PUBLIC "'+h.pubID+'" "'+h.sysID+'"'):h.sysID&&this.stream.write(' SYSTEM "'+h.sysID+'"'),h.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(h,f,b)),f.state=e.InsideTag,w=h.children,I=0,m=w.length;I<m;I++)C=w[I],this.writeChildNode(C,f,b+1);f.state=e.CloseTag,this.stream.write("]")}return f.state=e.CloseTag,this.stream.write(f.spaceBeforeSlash+">"),this.stream.write(this.endline(h,f,b)),f.state=e.None,this.closeNode(h,f,b)},l.prototype.element=function(h,f,b){var C,I,m,w,N,M,D,F,p,u;b||(b=0),this.openNode(h,f,b),f.state=e.OpenTag,this.stream.write(this.indent(h,f,b)+"<"+h.name),p=h.attribs;for(D in p)o.call(p,D)&&(C=p[D],this.attribute(C,f,b));if(m=h.children.length,w=m===0?null:h.children[0],m===0||h.children.every(function(a){return(a.type===n.Text||a.type===n.Raw)&&a.value===""}))f.allowEmpty?(this.stream.write(">"),f.state=e.CloseTag,this.stream.write("</"+h.name+">")):(f.state=e.CloseTag,this.stream.write(f.spaceBeforeSlash+"/>"));else if(f.pretty&&m===1&&(w.type===n.Text||w.type===n.Raw)&&w.value!=null)this.stream.write(">"),f.state=e.InsideTag,f.suppressPrettyCount++,F=!0,this.writeChildNode(w,f,b+1),f.suppressPrettyCount--,F=!1,f.state=e.CloseTag,this.stream.write("</"+h.name+">");else{for(this.stream.write(">"+this.endline(h,f,b)),f.state=e.InsideTag,u=h.children,N=0,M=u.length;N<M;N++)I=u[N],this.writeChildNode(I,f,b+1);f.state=e.CloseTag,this.stream.write(this.indent(h,f,b)+"</"+h.name+">")}return this.stream.write(this.endline(h,f,b)),f.state=e.None,this.closeNode(h,f,b)},l.prototype.processingInstruction=function(h,f,b){return this.stream.write(l.__super__.processingInstruction.call(this,h,f,b))},l.prototype.raw=function(h,f,b){return this.stream.write(l.__super__.raw.call(this,h,f,b))},l.prototype.text=function(h,f,b){return this.stream.write(l.__super__.text.call(this,h,f,b))},l.prototype.dtdAttList=function(h,f,b){return this.stream.write(l.__super__.dtdAttList.call(this,h,f,b))},l.prototype.dtdElement=function(h,f,b){return this.stream.write(l.__super__.dtdElement.call(this,h,f,b))},l.prototype.dtdEntity=function(h,f,b){return this.stream.write(l.__super__.dtdEntity.call(this,h,f,b))},l.prototype.dtdNotation=function(h,f,b){return this.stream.write(l.__super__.dtdNotation.call(this,h,f,b))},l}(r)}).call(_o)});var Fo=v((Oo,ve)=>{(function(){var n,e,t,r,i,o,s,l,h,f;f=ue(),l=f.assign,h=f.isFunction,t=Ir(),r=br(),i=Eo(),s=yt(),o=xo(),n=H(),e=je(),ve.exports.create=function(b,C,I,m){var w,N;if(b==null)throw new Error("Root element needs a name.");return m=l({},C,I,m),w=new r(m),N=w.element(b),m.headless||(w.declaration(m),(m.pubID!=null||m.sysID!=null)&&w.dtd(m)),N},ve.exports.begin=function(b,C,I){var m;return h(b)&&(m=[b,C],C=m[0],I=m[1],b={}),C?new i(b,C,I):new r(b)},ve.exports.stringWriter=function(b){return new s(b)},ve.exports.streamWriter=function(b,C){return new o(b,C)},ve.exports.implementation=new t,ve.exports.nodeType=n,ve.exports.writerState=e}).call(Oo)});var qo=v(Tr=>{(function(){"use strict";var n,e,t,r,i,o={}.hasOwnProperty;n=Fo(),e=rt().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},i=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Tr.Builder=function(){function s(l){var h,f,b;this.options={},f=e["0.2"];for(h in f)o.call(f,h)&&(b=f[h],this.options[h]=b);for(h in l)o.call(l,h)&&(b=l[h],this.options[h]=b)}return s.prototype.buildObject=function(l){var h,f,b,C,I;return h=this.options.attrkey,f=this.options.charkey,Object.keys(l).length===1&&this.options.rootName===e["0.2"].rootName?(I=Object.keys(l)[0],l=l[I]):I=this.options.rootName,b=function(m){return function(w,N){var M,D,F,p,u,a;if(typeof N!="object")m.options.cdata&&r(N)?w.raw(i(N)):w.txt(N);else if(Array.isArray(N)){for(p in N)if(o.call(N,p)){D=N[p];for(u in D)F=D[u],w=b(w.ele(u),F).up()}}else for(u in N)if(o.call(N,u))if(D=N[u],u===h){if(typeof D=="object")for(M in D)a=D[M],w=w.att(M,a)}else if(u===f)m.options.cdata&&r(D)?w=w.raw(i(D)):w=w.txt(D);else if(Array.isArray(D))for(p in D)o.call(D,p)&&(F=D[p],typeof F=="string"?m.options.cdata&&r(F)?w=w.ele(u).raw(i(F)).up():w=w.ele(u,F).up():w=b(w.ele(u),F).up());else typeof D=="object"?w=b(w.ele(u),D).up():typeof D=="string"&&m.options.cdata&&r(D)?w=w.ele(u).raw(i(D)).up():(D==null&&(D=""),w=w.ele(u,D.toString()).up());return w}}(this),C=n.create(I,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),b(C,l).end(this.options.renderOpts)},s}()}).call(Tr)});var ko=v(gt=>{(function(n){n.parser=function(d,c){return new t(d,c)},n.SAXParser=t,n.SAXStream=f,n.createStream=h,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(d,c){if(!(this instanceof t))return new t(d,c);var x=this;i(x),x.q=x.c="",x.bufferCheckPosition=n.MAX_BUFFER_LENGTH,x.opt=c||{},x.opt.lowercase=x.opt.lowercase||x.opt.lowercasetags,x.looseCase=x.opt.lowercase?"toLowerCase":"toUpperCase",x.tags=[],x.closed=x.closedRoot=x.sawRoot=!1,x.tag=x.error=null,x.strict=!!d,x.noscript=!!(d||x.opt.noscript),x.state=y.BEGIN,x.strictEntities=x.opt.strictEntities,x.ENTITIES=x.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),x.attribList=[],x.opt.xmlns&&(x.ns=Object.create(w)),x.trackPosition=x.opt.position!==!1,x.trackPosition&&(x.position=x.line=x.column=0),A(x,"onready")}Object.create||(Object.create=function(d){function c(){}c.prototype=d;var x=new c;return x}),Object.keys||(Object.keys=function(d){var c=[];for(var x in d)d.hasOwnProperty(x)&&c.push(x);return c});function r(d){for(var c=Math.max(n.MAX_BUFFER_LENGTH,10),x=0,P=0,$=e.length;P<$;P++){var W=d[e[P]].length;if(W>c)switch(e[P]){case"textNode":O(d);break;case"cdata":S(d,"oncdata",d.cdata),d.cdata="";break;case"script":S(d,"onscript",d.script),d.script="";break;default:L(d,"Max buffer length exceeded: "+e[P])}x=Math.max(x,W)}var z=n.MAX_BUFFER_LENGTH-x;d.bufferCheckPosition=z+d.position}function i(d){for(var c=0,x=e.length;c<x;c++)d[e[c]]=""}function o(d){O(d),d.cdata!==""&&(S(d,"oncdata",d.cdata),d.cdata=""),d.script!==""&&(S(d,"onscript",d.script),d.script="")}t.prototype={end:function(){G(this)},write:lh,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var l=n.EVENTS.filter(function(d){return d!=="error"&&d!=="end"});function h(d,c){return new f(d,c)}function f(d,c){if(!(this instanceof f))return new f(d,c);s.apply(this),this._parser=new t(d,c),this.writable=!0,this.readable=!0;var x=this;this._parser.onend=function(){x.emit("end")},this._parser.onerror=function(P){x.emit("error",P),x._parser.error=null},this._decoder=null,l.forEach(function(P){Object.defineProperty(x,"on"+P,{get:function(){return x._parser["on"+P]},set:function($){if(!$)return x.removeAllListeners(P),x._parser["on"+P]=$,$;x.on(P,$)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(s.prototype,{constructor:{value:f}}),f.prototype.write=function(d){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(d)){if(!this._decoder){var c=require("string_decoder").StringDecoder;this._decoder=new c("utf8")}d=this._decoder.write(d)}return this._parser.write(d.toString()),this.emit("data",d),!0},f.prototype.end=function(d){return d&&d.length&&this.write(d),this._parser.end(),!0},f.prototype.on=function(d,c){var x=this;return!x._parser["on"+d]&&l.indexOf(d)!==-1&&(x._parser["on"+d]=function(){var P=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);P.splice(0,0,d),x.emit.apply(x,P)}),s.prototype.on.call(x,d,c)};var b="[CDATA[",C="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",w={xml:I,xmlns:m},N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(d){return d===" "||d===`
`||d==="\r"||d==="	"}function u(d){return d==='"'||d==="'"}function a(d){return d===">"||p(d)}function g(d,c){return d.test(c)}function T(d,c){return!g(d,c)}var y=0;n.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(d){var c=n.ENTITIES[d],x=typeof c=="number"?String.fromCharCode(c):c;n.ENTITIES[d]=x});for(var E in n.STATE)n.STATE[n.STATE[E]]=E;y=n.STATE;function A(d,c,x){d[c]&&d[c](x)}function S(d,c,x){d.textNode&&O(d),A(d,c,x)}function O(d){d.textNode=_(d.opt,d.textNode),d.textNode&&A(d,"ontext",d.textNode),d.textNode=""}function _(d,c){return d.trim&&(c=c.trim()),d.normalize&&(c=c.replace(/\s+/g," ")),c}function L(d,c){return O(d),d.trackPosition&&(c+=`
Line: `+d.line+`
Column: `+d.column+`
Char: `+d.c),c=new Error(c),d.error=c,A(d,"onerror",c),d}function G(d){return d.sawRoot&&!d.closedRoot&&k(d,"Unclosed root tag"),d.state!==y.BEGIN&&d.state!==y.BEGIN_WHITESPACE&&d.state!==y.TEXT&&L(d,"Unexpected end"),O(d),d.c="",d.closed=!0,A(d,"onend"),t.call(d,d.strict,d.opt),d}function k(d,c){if(typeof d!="object"||!(d instanceof t))throw new Error("bad call to strictFail");d.strict&&L(d,c)}function K(d){d.strict||(d.tagName=d.tagName[d.looseCase]());var c=d.tags[d.tags.length-1]||d,x=d.tag={name:d.tagName,attributes:{}};d.opt.xmlns&&(x.ns=c.ns),d.attribList.length=0,S(d,"onopentagstart",x)}function j(d,c){var x=d.indexOf(":"),P=x<0?["",d]:d.split(":"),$=P[0],W=P[1];return c&&d==="xmlns"&&($="xmlns",W=""),{prefix:$,local:W}}function Pe(d){if(d.strict||(d.attribName=d.attribName[d.looseCase]()),d.attribList.indexOf(d.attribName)!==-1||d.tag.attributes.hasOwnProperty(d.attribName)){d.attribName=d.attribValue="";return}if(d.opt.xmlns){var c=j(d.attribName,!0),x=c.prefix,P=c.local;if(x==="xmlns")if(P==="xml"&&d.attribValue!==I)k(d,"xml: prefix must be bound to "+I+`
Actual: `+d.attribValue);else if(P==="xmlns"&&d.attribValue!==m)k(d,"xmlns: prefix must be bound to "+m+`
Actual: `+d.attribValue);else{var $=d.tag,W=d.tags[d.tags.length-1]||d;$.ns===W.ns&&($.ns=Object.create(W.ns)),$.ns[P]=d.attribValue}d.attribList.push([d.attribName,d.attribValue])}else d.tag.attributes[d.attribName]=d.attribValue,S(d,"onattribute",{name:d.attribName,value:d.attribValue});d.attribName=d.attribValue=""}function ce(d,c){if(d.opt.xmlns){var x=d.tag,P=j(d.tagName);x.prefix=P.prefix,x.local=P.local,x.uri=x.ns[P.prefix]||"",x.prefix&&!x.uri&&(k(d,"Unbound namespace prefix: "+JSON.stringify(d.tagName)),x.uri=P.prefix);var $=d.tags[d.tags.length-1]||d;x.ns&&$.ns!==x.ns&&Object.keys(x.ns).forEach(function(ps){S(d,"onopennamespace",{prefix:ps,uri:x.ns[ps]})});for(var W=0,z=d.attribList.length;W<z;W++){var Z=d.attribList[W],ae=Z[0],xe=Z[1],Y=j(ae,!0),de=Y.prefix,dh=Y.local,hs=de===""?"":x.ns[de]||"",fr={name:ae,value:xe,prefix:de,local:dh,uri:hs};de&&de!=="xmlns"&&!hs&&(k(d,"Unbound namespace prefix: "+JSON.stringify(de)),fr.uri=de),d.tag.attributes[ae]=fr,S(d,"onattribute",fr)}d.attribList.length=0}d.tag.isSelfClosing=!!c,d.sawRoot=!0,d.tags.push(d.tag),S(d,"onopentag",d.tag),c||(!d.noscript&&d.tagName.toLowerCase()==="script"?d.state=y.SCRIPT:d.state=y.TEXT,d.tag=null,d.tagName=""),d.attribName=d.attribValue="",d.attribList.length=0}function mr(d){if(!d.tagName){k(d,"Weird empty close tag."),d.textNode+="</>",d.state=y.TEXT;return}if(d.script){if(d.tagName!=="script"){d.script+="</"+d.tagName+">",d.tagName="",d.state=y.SCRIPT;return}S(d,"onscript",d.script),d.script=""}var c=d.tags.length,x=d.tagName;d.strict||(x=x[d.looseCase]());for(var P=x;c--;){var $=d.tags[c];if($.name!==P)k(d,"Unexpected close tag");else break}if(c<0){k(d,"Unmatched closing tag: "+d.tagName),d.textNode+="</"+d.tagName+">",d.state=y.TEXT;return}d.tagName=x;for(var W=d.tags.length;W-- >c;){var z=d.tag=d.tags.pop();d.tagName=d.tag.name,S(d,"onclosetag",d.tagName);var Z={};for(var ae in z.ns)Z[ae]=z.ns[ae];var xe=d.tags[d.tags.length-1]||d;d.opt.xmlns&&z.ns!==xe.ns&&Object.keys(z.ns).forEach(function(Y){var de=z.ns[Y];S(d,"onclosenamespace",{prefix:Y,uri:de})})}c===0&&(d.closedRoot=!0),d.tagName=d.attribValue=d.attribName="",d.attribList.length=0,d.state=y.TEXT}function us(d){var c=d.entity,x=c.toLowerCase(),P,$="";return d.ENTITIES[c]?d.ENTITIES[c]:d.ENTITIES[x]?d.ENTITIES[x]:(c=x,c.charAt(0)==="#"&&(c.charAt(1)==="x"?(c=c.slice(2),P=parseInt(c,16),$=P.toString(16)):(c=c.slice(1),P=parseInt(c,10),$=P.toString(10))),c=c.replace(/^0+/,""),isNaN(P)||$.toLowerCase()!==c?(k(d,"Invalid character entity"),"&"+d.entity+";"):String.fromCodePoint(P))}function ls(d,c){c==="<"?(d.state=y.OPEN_WAKA,d.startTagPosition=d.position):p(c)||(k(d,"Non-whitespace before first tag."),d.textNode=c,d.state=y.TEXT)}function ds(d,c){var x="";return c<d.length&&(x=d.charAt(c)),x}function lh(d){var c=this;if(this.error)throw this.error;if(c.closed)return L(c,"Cannot write after close. Assign an onready handler.");if(d===null)return G(c);typeof d=="object"&&(d=d.toString());for(var x=0,P="";P=ds(d,x++),c.c=P,!!P;)switch(c.trackPosition&&(c.position++,P===`
`?(c.line++,c.column=0):c.column++),c.state){case y.BEGIN:if(c.state=y.BEGIN_WHITESPACE,P==="\uFEFF")continue;ls(c,P);continue;case y.BEGIN_WHITESPACE:ls(c,P);continue;case y.TEXT:if(c.sawRoot&&!c.closedRoot){for(var $=x-1;P&&P!=="<"&&P!=="&";)P=ds(d,x++),P&&c.trackPosition&&(c.position++,P===`
`?(c.line++,c.column=0):c.column++);c.textNode+=d.substring($,x-1)}P==="<"&&!(c.sawRoot&&c.closedRoot&&!c.strict)?(c.state=y.OPEN_WAKA,c.startTagPosition=c.position):(!p(P)&&(!c.sawRoot||c.closedRoot)&&k(c,"Text data outside of root node."),P==="&"?c.state=y.TEXT_ENTITY:c.textNode+=P);continue;case y.SCRIPT:P==="<"?c.state=y.SCRIPT_ENDING:c.script+=P;continue;case y.SCRIPT_ENDING:P==="/"?c.state=y.CLOSE_TAG:(c.script+="<"+P,c.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(P==="!")c.state=y.SGML_DECL,c.sgmlDecl="";else if(!p(P))if(g(N,P))c.state=y.OPEN_TAG,c.tagName=P;else if(P==="/")c.state=y.CLOSE_TAG,c.tagName="";else if(P==="?")c.state=y.PROC_INST,c.procInstName=c.procInstBody="";else{if(k(c,"Unencoded <"),c.startTagPosition+1<c.position){var W=c.position-c.startTagPosition;P=new Array(W).join(" ")+P}c.textNode+="<"+P,c.state=y.TEXT}continue;case y.SGML_DECL:(c.sgmlDecl+P).toUpperCase()===b?(S(c,"onopencdata"),c.state=y.CDATA,c.sgmlDecl="",c.cdata=""):c.sgmlDecl+P==="--"?(c.state=y.COMMENT,c.comment="",c.sgmlDecl=""):(c.sgmlDecl+P).toUpperCase()===C?(c.state=y.DOCTYPE,(c.doctype||c.sawRoot)&&k(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):P===">"?(S(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=y.TEXT):(u(P)&&(c.state=y.SGML_DECL_QUOTED),c.sgmlDecl+=P);continue;case y.SGML_DECL_QUOTED:P===c.q&&(c.state=y.SGML_DECL,c.q=""),c.sgmlDecl+=P;continue;case y.DOCTYPE:P===">"?(c.state=y.TEXT,S(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=P,P==="["?c.state=y.DOCTYPE_DTD:u(P)&&(c.state=y.DOCTYPE_QUOTED,c.q=P));continue;case y.DOCTYPE_QUOTED:c.doctype+=P,P===c.q&&(c.q="",c.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:c.doctype+=P,P==="]"?c.state=y.DOCTYPE:u(P)&&(c.state=y.DOCTYPE_DTD_QUOTED,c.q=P);continue;case y.DOCTYPE_DTD_QUOTED:c.doctype+=P,P===c.q&&(c.state=y.DOCTYPE_DTD,c.q="");continue;case y.COMMENT:P==="-"?c.state=y.COMMENT_ENDING:c.comment+=P;continue;case y.COMMENT_ENDING:P==="-"?(c.state=y.COMMENT_ENDED,c.comment=_(c.opt,c.comment),c.comment&&S(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+P,c.state=y.COMMENT);continue;case y.COMMENT_ENDED:P!==">"?(k(c,"Malformed comment"),c.comment+="--"+P,c.state=y.COMMENT):c.state=y.TEXT;continue;case y.CDATA:P==="]"?c.state=y.CDATA_ENDING:c.cdata+=P;continue;case y.CDATA_ENDING:P==="]"?c.state=y.CDATA_ENDING_2:(c.cdata+="]"+P,c.state=y.CDATA);continue;case y.CDATA_ENDING_2:P===">"?(c.cdata&&S(c,"oncdata",c.cdata),S(c,"onclosecdata"),c.cdata="",c.state=y.TEXT):P==="]"?c.cdata+="]":(c.cdata+="]]"+P,c.state=y.CDATA);continue;case y.PROC_INST:P==="?"?c.state=y.PROC_INST_ENDING:p(P)?c.state=y.PROC_INST_BODY:c.procInstName+=P;continue;case y.PROC_INST_BODY:if(!c.procInstBody&&p(P))continue;P==="?"?c.state=y.PROC_INST_ENDING:c.procInstBody+=P;continue;case y.PROC_INST_ENDING:P===">"?(S(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=y.TEXT):(c.procInstBody+="?"+P,c.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:g(M,P)?c.tagName+=P:(K(c),P===">"?ce(c):P==="/"?c.state=y.OPEN_TAG_SLASH:(p(P)||k(c,"Invalid character in tag name"),c.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:P===">"?(ce(c,!0),mr(c)):(k(c,"Forward-slash in opening tag not followed by >"),c.state=y.ATTRIB);continue;case y.ATTRIB:if(p(P))continue;P===">"?ce(c):P==="/"?c.state=y.OPEN_TAG_SLASH:g(N,P)?(c.attribName=P,c.attribValue="",c.state=y.ATTRIB_NAME):k(c,"Invalid attribute name");continue;case y.ATTRIB_NAME:P==="="?c.state=y.ATTRIB_VALUE:P===">"?(k(c,"Attribute without value"),c.attribValue=c.attribName,Pe(c),ce(c)):p(P)?c.state=y.ATTRIB_NAME_SAW_WHITE:g(M,P)?c.attribName+=P:k(c,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(P==="=")c.state=y.ATTRIB_VALUE;else{if(p(P))continue;k(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",S(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",P===">"?ce(c):g(N,P)?(c.attribName=P,c.state=y.ATTRIB_NAME):(k(c,"Invalid attribute name"),c.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(p(P))continue;u(P)?(c.q=P,c.state=y.ATTRIB_VALUE_QUOTED):(k(c,"Unquoted attribute value"),c.state=y.ATTRIB_VALUE_UNQUOTED,c.attribValue=P);continue;case y.ATTRIB_VALUE_QUOTED:if(P!==c.q){P==="&"?c.state=y.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=P;continue}Pe(c),c.q="",c.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:p(P)?c.state=y.ATTRIB:P===">"?ce(c):P==="/"?c.state=y.OPEN_TAG_SLASH:g(N,P)?(k(c,"No whitespace between attributes"),c.attribName=P,c.attribValue="",c.state=y.ATTRIB_NAME):k(c,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!a(P)){P==="&"?c.state=y.ATTRIB_VALUE_ENTITY_U:c.attribValue+=P;continue}Pe(c),P===">"?ce(c):c.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(c.tagName)P===">"?mr(c):g(M,P)?c.tagName+=P:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=y.SCRIPT):(p(P)||k(c,"Invalid tagname in closing tag"),c.state=y.CLOSE_TAG_SAW_WHITE);else{if(p(P))continue;T(N,P)?c.script?(c.script+="</"+P,c.state=y.SCRIPT):k(c,"Invalid tagname in closing tag."):c.tagName=P}continue;case y.CLOSE_TAG_SAW_WHITE:if(p(P))continue;P===">"?mr(c):k(c,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var z,Z;switch(c.state){case y.TEXT_ENTITY:z=y.TEXT,Z="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:z=y.ATTRIB_VALUE_QUOTED,Z="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:z=y.ATTRIB_VALUE_UNQUOTED,Z="attribValue";break}if(P===";")if(c.opt.unparsedEntities){var ae=us(c);c.entity="",c.state=z,c.write(ae)}else c[Z]+=us(c),c.entity="",c.state=z;else g(c.entity.length?F:D,P)?c.entity+=P:(k(c,"Invalid character in entity name"),c[Z]+="&"+c.entity+P,c.entity="",c.state=z);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&r(c),c}String.fromCodePoint||function(){var d=String.fromCharCode,c=Math.floor,x=function(){var P=16384,$=[],W,z,Z=-1,ae=arguments.length;if(!ae)return"";for(var xe="";++Z<ae;){var Y=Number(arguments[Z]);if(!isFinite(Y)||Y<0||Y>1114111||c(Y)!==Y)throw RangeError("Invalid code point: "+Y);Y<=65535?$.push(Y):(Y-=65536,W=(Y>>10)+55296,z=Y%1024+56320,$.push(W,z)),(Z+1===ae||$.length>P)&&(xe+=d.apply(null,$),$.length=0)}return xe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:x,configurable:!0,writable:!0}):String.fromCodePoint=x}()})(typeof gt>"u"?gt.sax={}:gt)});var Ro=v(Pr=>{(function(){"use strict";Pr.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(Pr)});var Dr=v(Se=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),Se.normalize=function(e){return e.toLowerCase()},Se.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Se.stripPrefix=function(e){return e.replace(n,"")},Se.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Se.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Se)});var Lo=v(he=>{(function(){"use strict";var n,e,t,r,i,o,s,l,h=function(C,I){return function(){return C.apply(I,arguments)}},f=function(C,I){for(var m in I)b.call(I,m)&&(C[m]=I[m]);function w(){this.constructor=C}return w.prototype=I.prototype,C.prototype=new w,C.__super__=I.prototype,C},b={}.hasOwnProperty;s=ko(),t=require("events"),n=Ro(),o=Dr(),l=require("timers").setImmediate,e=rt().defaults,r=function(C){return typeof C=="object"&&C!=null&&Object.keys(C).length===0},i=function(C,I,m){var w,N,M;for(w=0,N=C.length;w<N;w++)M=C[w],I=M(I,m);return I},he.Parser=function(C){f(I,C);function I(m){this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this);var w,N,M;if(!(this instanceof he.Parser))return new he.Parser(m);this.options={},N=e["0.2"];for(w in N)b.call(N,w)&&(M=N[w],this.options[w]=M);for(w in m)b.call(m,w)&&(M=m[w],this.options[w]=M);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return I.prototype.processAsync=function(){var m,w;try{return this.remaining.length<=this.options.chunkSize?(m=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(m),this.saxParser.close()):(m=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(m),l(this.processAsync))}catch(N){if(w=N,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(w)}},I.prototype.assignOrPush=function(m,w,N){return w in m?(m[w]instanceof Array||(m[w]=[m[w]]),m[w].push(N)):this.options.explicitArray?m[w]=[N]:m[w]=N},I.prototype.reset=function(){var m,w,N,M;return this.removeAllListeners(),this.saxParser=s.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(D){return function(F){if(D.saxParser.resume(),!D.saxParser.errThrown)return D.saxParser.errThrown=!0,D.emit("error",F)}}(this),this.saxParser.onend=function(D){return function(){if(!D.saxParser.ended)return D.saxParser.ended=!0,D.emit("end",D.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,M=[],m=this.options.attrkey,w=this.options.charkey,this.saxParser.onopentag=function(D){return function(F){var p,u,a,g,T;if(a=Object.create(null),a[w]="",!D.options.ignoreAttrs){T=F.attributes;for(p in T)b.call(T,p)&&(!(m in a)&&!D.options.mergeAttrs&&(a[m]=Object.create(null)),u=D.options.attrValueProcessors?i(D.options.attrValueProcessors,F.attributes[p],p):F.attributes[p],g=D.options.attrNameProcessors?i(D.options.attrNameProcessors,p):p,D.options.mergeAttrs?D.assignOrPush(a,g,u):a[m][g]=u)}return a["#name"]=D.options.tagNameProcessors?i(D.options.tagNameProcessors,F.name):F.name,D.options.xmlns&&(a[D.options.xmlnskey]={uri:F.uri,local:F.local}),M.push(a)}}(this),this.saxParser.onclosetag=function(D){return function(){var F,p,u,a,g,T,y,E,A,S;if(T=M.pop(),g=T["#name"],(!D.options.explicitChildren||!D.options.preserveChildrenOrder)&&delete T["#name"],T.cdata===!0&&(F=T.cdata,delete T.cdata),A=M[M.length-1],T[w].match(/^\s*$/)&&!F?(p=T[w],delete T[w]):(D.options.trim&&(T[w]=T[w].trim()),D.options.normalize&&(T[w]=T[w].replace(/\s{2,}/g," ").trim()),T[w]=D.options.valueProcessors?i(D.options.valueProcessors,T[w],g):T[w],Object.keys(T).length===1&&w in T&&!D.EXPLICIT_CHARKEY&&(T=T[w])),r(T)&&(typeof D.options.emptyTag=="function"?T=D.options.emptyTag():T=D.options.emptyTag!==""?D.options.emptyTag:p),D.options.validator!=null&&(S="/"+function(){var O,_,L;for(L=[],O=0,_=M.length;O<_;O++)a=M[O],L.push(a["#name"]);return L}().concat(g).join("/"),function(){var O;try{return T=D.options.validator(S,A&&A[g],T)}catch(_){return O=_,D.emit("error",O)}}()),D.options.explicitChildren&&!D.options.mergeAttrs&&typeof T=="object"){if(!D.options.preserveChildrenOrder)a=Object.create(null),D.options.attrkey in T&&(a[D.options.attrkey]=T[D.options.attrkey],delete T[D.options.attrkey]),!D.options.charsAsChildren&&D.options.charkey in T&&(a[D.options.charkey]=T[D.options.charkey],delete T[D.options.charkey]),Object.getOwnPropertyNames(T).length>0&&(a[D.options.childkey]=T),T=a;else if(A){A[D.options.childkey]=A[D.options.childkey]||[],y=Object.create(null);for(u in T)b.call(T,u)&&(y[u]=T[u]);A[D.options.childkey].push(y),delete T["#name"],Object.keys(T).length===1&&w in T&&!D.EXPLICIT_CHARKEY&&(T=T[w])}}return M.length>0?D.assignOrPush(A,g,T):(D.options.explicitRoot&&(E=T,T=Object.create(null),T[g]=E),D.resultObject=T,D.saxParser.ended=!0,D.emit("end",D.resultObject))}}(this),N=function(D){return function(F){var p,u;if(u=M[M.length-1],u)return u[w]+=F,D.options.explicitChildren&&D.options.preserveChildrenOrder&&D.options.charsAsChildren&&(D.options.includeWhiteChars||F.replace(/\\n/g,"").trim()!=="")&&(u[D.options.childkey]=u[D.options.childkey]||[],p={"#name":"__text__"},p[w]=F,D.options.normalize&&(p[w]=p[w].replace(/\s{2,}/g," ").trim()),u[D.options.childkey].push(p)),u}}(this),this.saxParser.ontext=N,this.saxParser.oncdata=function(D){return function(F){var p;if(p=N(F),p)return p.cdata=!0}}(this)},I.prototype.parseString=function(m,w){var N;w!=null&&typeof w=="function"&&(this.on("end",function(M){return this.reset(),w(null,M)}),this.on("error",function(M){return this.reset(),w(M)}));try{return m=m.toString(),m.trim()===""?(this.emit("end",null),!0):(m=n.stripBOM(m),this.options.async?(this.remaining=m,l(this.processAsync),this.saxParser):this.saxParser.write(m).close())}catch(M){if(N=M,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw N}else return this.emit("error",N),this.saxParser.errThrown=!0}},I.prototype.parseStringPromise=function(m){return new Promise(function(w){return function(N,M){return w.parseString(m,function(D,F){return D?M(D):N(F)})}}(this))},I}(t),he.parseString=function(C,I,m){var w,N,M;return m!=null?(typeof m=="function"&&(w=m),typeof I=="object"&&(N=I)):(typeof I=="function"&&(w=I),N={}),M=new he.Parser(N),M.parseString(C,w)},he.parseStringPromise=function(C,I){var m,w;return typeof I=="object"&&(m=I),w=new he.Parser(m),w.parseStringPromise(C)}}).call(he)});var Sr=v(pe=>{(function(){"use strict";var n,e,t,r,i=function(s,l){for(var h in l)o.call(l,h)&&(s[h]=l[h]);function f(){this.constructor=s}return f.prototype=l.prototype,s.prototype=new f,s.__super__=l.prototype,s},o={}.hasOwnProperty;e=rt(),n=qo(),t=Lo(),r=Dr(),pe.defaults=e.defaults,pe.processors=r,pe.ValidationError=function(s){i(l,s);function l(h){this.message=h}return l}(Error),pe.Builder=n.Builder,pe.Parser=t.Parser,pe.parseString=t.parseString,pe.parseStringPromise=t.parseStringPromise}).call(pe)});var Nr=v((_A,Uo)=>{"use strict";var wh={authenticationError:"authenticationError",authorizationError:"authorizationError",gatewayTimeoutError:"gatewayTimeoutError",invalidChallengeError:"invalidChallengeError",invalidKeysError:"invalidKeysError",invalidSignatureError:"invalidSignatureError",notFoundError:"notFoundError",requestTimeoutError:"requestTimeoutError",serverError:"serverError",serviceUnavailableError:"serviceUnavailableError",testOperationPerformedInProductionError:"testOperationPerformedInProductionError",tooManyRequestsError:"tooManyRequestsError",unexpectedError:"unexpectedError",upgradeRequired:"upgradeRequired"};Uo.exports={errorTypes:wh}});var X=v((MA,Vo)=>{"use strict";var ee=Nr().errorTypes;function te(n){return function(e){let t=new Error(e||"");return t.type=t.name=n,t}}Vo.exports={AuthenticationError:te(ee.authenticationError),AuthorizationError:te(ee.authorizationError),GatewayTimeoutError:te(ee.gatewayTimeoutError),InvalidChallengeError:te(ee.invalidChallengeError),InvalidKeysError:te(ee.invalidKeysError),InvalidSignatureError:te(ee.invalidSignatureError),NotFoundError:te(ee.notFoundError),RequestTimeoutError:te(ee.requestTimeoutError),ServerError:te(ee.serverError),ServiceUnavailableError:te(ee.serviceUnavailableError),TestOperationPerformedInProductionError:te(ee.testOperationPerformedInProductionError),TooManyRequestsError:te(ee.tooManyRequestsError),UnexpectedError:te(ee.unexpectedError),UpgradeRequired:te(ee.upgradeRequired)}});var J=v((xA,jo)=>{"use strict";var Ah=X(),Er=class n{static convertObjectKeysToUnderscores(e){let t={};for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r],o=n.toUnderscore(r);i instanceof Array?t[o]=i.map(s=>typeof s=="object"?n.convertObjectKeysToUnderscores(s):s):typeof i=="object"?i instanceof Date||i===null?t[o]=i:t[o]=n.convertObjectKeysToUnderscores(i):t[o]=i}return t}static convertObjectKeysToCamelCase(e){let t={};for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r],o=n.toCamelCase(r);i instanceof Array?t[o]=i.map(s=>typeof s=="object"?n.convertObjectKeysToCamelCase(s):s):typeof i=="object"?i instanceof Date||i===null?t[o]=i:t[o]=n.convertObjectKeysToCamelCase(i):t[o]=i}return t}static convertNodeToObject(e){if(typeof e=="object"&&e["@"]){if(e["@"].type==="array"){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];if(r!=="@")if(i instanceof Array)for(let o of i)t.push(this.convertNodeToObject(o));else t.push(this.convertNodeToObject(i))}),t}else if(e["@"].type==="collection"){let t={};return Object.keys(e).forEach(r=>{let i=e[r];r!=="@"&&(t[this.toCamelCase(r)]=this.convertNodeToObject(i))}),t}else{if(e["@"].nil==="true")return null;if(e["@"].type==="integer")return parseInt(e["#"],10);if(e["@"].type==="boolean")return e["#"]==="true"}return e["#"]}else{if(e instanceof Array)return e.map(t=>this.convertNodeToObject(t));if(typeof e=="object"&&this.objectIsEmpty(e))return"";if(typeof e=="object"){let t={};return Object.keys(e).forEach(r=>{let i=e[r];t[this.toCamelCase(r)]=this.convertNodeToObject(i)}),t}}return e}static objectIsEmpty(e){return Object.keys(e).length===0}static arrayIsEmpty(e){return!(!(e instanceof Array)||e.length>0)}static toCamelCase(e){return e.replace(/([\-\_][a-z0-9])/g,t=>t.toUpperCase().replace("-","").replace("_",""))}static toUnderscore(e){return e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}static flatten(e){for(;this._containsArray(e);)e=e.reduce((t,r)=>(t=t instanceof Array?t:[t],r=r instanceof Array?this.flatten(r):r,t.concat(r)));return e}static merge(e,t){for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];e[r]=i}return e}static without(e,t){let r=[];for(let i of e)this._containsValue(t,i)||r.push(i);return r}static withoutIgnoreCaseStyle(e,t){let r=[],i=t.map(o=>this.toCamelCase(o));this.convertObjectKeysToCamelCase(t);for(let o of e)!this._containsValue(i,o)&&!this._containsValue(i,this.toCamelCase(o))&&r.push(o);return r}static flattenKeys(e,t){let r=[];for(let i in e){if(!e.hasOwnProperty(i))continue;let o=e[i];if(typeof o=="object"){let s=null;this.isNumeric(i)?s=t||i:s=t?t+"["+i+"]":i,r.push(n.flattenKeys(o,s))}else t?r.push(t+"["+i+"]"):r.push(i)}return this.flatten(r)}static isNumeric(e){return!isNaN(e)}static verifyKeys(e,t){let r,i=this.withoutIgnoreCaseStyle(this.flattenKeys(t),e.valid);if(e.ignore?r=i.filter(function(o){for(let s of e.ignore)if(o.indexOf(s)===0||n.toCamelCase(o).indexOf(s)===0)return!1;return!0}):r=i,r.length>0)return Ah.InvalidKeysError(`These keys are invalid: ${r.join(", ")}`)}static _containsValue(e,t){return e.indexOf(t)!==-1}static _containsArray(e){for(let t of e)if(t instanceof Array)return!0;return!1}static zip(...e){let t=e.reduce((o,s)=>o>s.length?o:s.length,0),r=[],i=0;for(;i<t;){let o=[],s=i;e.forEach(l=>{o.push(l[s])}),r.push(o),i++}return r}};jo.exports={Util:Er}});var Bo=v(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});function Ch(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];setTimeout(function(){try{n.apply(void 0,e)}catch(r){console.log("Error in callback function"),console.log(r)}},1)}}_r.deferred=Ch});var Go=v(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});function vh(n){var e=!1;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e||(e=!0,n.apply(void 0,t))}}Mr.once=vh});var $o=v(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});function bh(n,e){if(!e)return n;n.then(function(t){return e(null,t)}).catch(function(t){return e(t)})}xr.promiseOrCallback=bh});var V=v((kA,Xo)=>{"use strict";var Th=Bo(),Ph=Go(),Dh=$o();function Or(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,i=e[e.length-1];return typeof i=="function"&&(r=e.pop(),r=Ph.once(Th.deferred(r))),Dh.promiseOrCallback(n.apply(this,e),r)}}Or.wrapPrototype=function(n,e){e===void 0&&(e={});var t=e.ignoreMethods||[],r=e.transformPrivateMethods===!0,i=Object.getOwnPropertyNames(n.prototype).filter(function(o){var s,l=o!=="constructor"&&typeof n.prototype[o]=="function",h=t.indexOf(o)===-1;return r?s=!0:s=o.charAt(0)!=="_",l&&s&&h});return i.forEach(function(o){var s=n.prototype[o];n.prototype[o]=Or(s)}),n};Xo.exports=Or});var qr=v((RA,Wo)=>{"use strict";var Sh=require("http"),Nh=require("https"),Eh=require("zlib"),re=require("buffer").Buffer,_h=require("fs"),Ho=require("path"),Mh=yr().version,xh=Sr(),se=X(),Ko=J().Util,Oh=V().wrapPrototype,Fr=class{constructor(e){this.config=e}checkHttpStatus(e){switch(e.toString()){case"200":case"201":case"422":return null;case"401":return se.AuthenticationError("Authentication Error");case"403":return se.AuthorizationError("Authorization Error");case"404":return se.NotFoundError("Not Found");case"408":return se.RequestTimeoutError("Request Timeout Error");case"426":return se.UpgradeRequired("Upgrade Required");case"429":return se.TooManyRequestsError("Too Many Requests");case"500":return se.ServerError("Server Error");case"503":return se.ServiceUnavailableError("Service Unavailable Error");case"504":return se.GatewayTimeoutError("Gateway Timeout Error");default:return se.UnexpectedError(`Unexpected HTTP response: ${e}`)}}delete(e){return this.httpRequest("DELETE",e,null)}get(e){return this.httpRequest("GET",e,null)}post(e,t){return this.httpRequest("POST",e,t)}postMultipart(e,t,r){return this.httpRequest("POST",e,t,r)}put(e,t){return this.httpRequest("PUT",e,t)}httpRequest(e,t,r,i,o,s,l){let h,f,b,C=this.config.environment.ssl?Nh:Sh,I={host:o||this.config.environment.server,port:s||this.config.environment.port,method:e,path:t,headers:Object.assign({},this._headers(),l)};return this.config.customHttpAgent&&(I.agent=this.config.customHttpAgent),i?(h="boundary"+Date.now(),f=this._prepareMultipart(h,r,i),I.headers["Content-Type"]=`multipart/form-data; boundary=${h}`):r&&("application/json".match(I.headers.Accept)?f=JSON.stringify(r):f=JSON.stringify(Ko.convertObjectKeysToUnderscores(r))),f&&(I.headers["Content-Length"]=re.byteLength(f).toString()),new Promise((m,w)=>{let N=C.request(I,p=>{let u=[];p.on("data",a=>{u.push(a)}),p.on("end",()=>{let a=re.concat(u),g=this.checkHttpStatus(p.statusCode);if(g){w(g);return}a.length>0?p.headers["content-encoding"]==="gzip"?Eh.gunzip(a,(T,y)=>{T?w(T):M(y.toString("utf8"),p.headers["content-type"])}):M(a.toString("utf8"),p.headers["content-type"]):m()}),p.on("error",function(a){let g=se.UnexpectedError(`Unexpected response error: ${a}`);w(g)})});function M(p,u){p.match(/^\s+$/)?m({}):u&&u.match("application/xml")?xh.parseStringPromise(p,{attrkey:"@",charkey:"#",explicitArray:!1}).then(a=>{m(Ko.convertNodeToObject(a))}).catch(w):u&&u.match("application/json")?m(JSON.parse(p)):m(p)}function D(){N.abort(),b=!0;let p=se.UnexpectedError("Request timed out");w(p)}N.setTimeout(this.config.timeout,D);let F;N.on("socket",p=>{F=p}),N.on("error",p=>{if(b)return;this.config.timeout>0&&F&&F.removeListener("timeout",D);let u=se.UnexpectedError(`Unexpected request error: ${p}`);w(u)}),r&&N.write(f),N.end()})}_prepareMultipart(e,t,r){let i=re.concat([this._filePart("file",r,e)]);for(let o of Object.keys(t)){let s=t[o];i=re.concat([i,this._formPart(o,s,e)])}return re.concat([i,re.from(`--${e}--\r
\r
`)])}_partHeader(e,t,r){let i=`--${r}`;return i+=`\r
`,i+=`Content-Disposition: form-data; name="${e}"`,t&&(i+=`; filename="${t}"`,i+=`\r
`,i+=`Content-Type: ${this._filetype(t)}`),i+=`\r
\r
`,i}_formPart(e,t,r){return re.concat([re.from(this._partHeader(e,null,r)),re.from(t+`\r
`)])}_filePart(e,t,r){let i=re.from(this._partHeader(e,Ho.basename(t.path),r)),o=_h.readFileSync(t.path);return re.concat([i,o,re.from(`\r
`)])}_filetype(e){let t=Ho.extname(e);return t===".jpeg"||t===".jpg"?"image/jpeg":t===".png"?"image/png":t===".pdf"?"application/pdf":"application/octet-stream"}_headers(){return{Authorization:this.authorizationHeader(),"X-ApiVersion":this.config.apiVersion,Accept:"application/xml","Content-Type":"application/json","User-Agent":`Braintree Node ${Mh}`,"Accept-Encoding":"gzip"}}authorizationHeader(){return this.config.accessToken?`Bearer ${this.config.accessToken}`:this.config.clientId?`Basic ${re.from(this.config.clientId+":"+this.config.clientSecret).toString("base64")}`:`Basic ${re.from(this.config.publicKey+":"+this.config.privateKey).toString("base64")}`}};Wo.exports={Http:Oh(Fr)}});var Qo=v((LA,zo)=>{"use strict";var It=tt().Environment,kr=class{parseClientCredentials(e,t){if(this.clientId=e,this.clientSecret=t,!this.clientId)throw new Error("Missing clientId");if(!this.clientSecret)throw new Error("Missing clientSecret");if(this.clientId.indexOf("client_id")!==0)throw new Error("Value passed for clientId is not a client id");if(this.clientSecret.indexOf("client_secret")!==0)throw new Error("Value passed for clientSecret is not a client secret");let r=this.parseEnvironment(this.clientId),i=this.parseEnvironment(this.clientSecret);if(r!==i)throw new Error(`Mismatched credential environments: clientId environment is ${r} and clientSecret environment is ${i}`);return this.environment=r,this.environment}parseAccessToken(e){if(this.accessToken=e,!this.accessToken)throw new Error("Missing access token");if(this.accessToken.indexOf("access_token")!==0)throw new Error("Value passed for accessToken is not a valid access token");return this.merchantId=this.accessToken.split("$")[2],this.environment=this.parseEnvironment(this.accessToken),this.environment}parseEnvironment(e){let t=e.split("$")[1];switch(t){case"development":case"integration":return It.Development;case"qa":return It.Qa;case"sandbox":return It.Sandbox;case"production":return It.Production;default:throw new Error(`Unknown environment: ${t}`)}}};zo.exports={CredentialsParser:kr}});var Jo=v((UA,Yo)=>{"use strict";var Fh=Qo().CredentialsParser,Rr=class{constructor(e){this.timeout=6e4,this.apiVersion="6",this.graphQLApiVersion="2018-09-10",this.customHttpAgent=e.customHttpAgent;let t=new Fh;if(e.clientId||e.clientSecret)t.parseClientCredentials(e.clientId,e.clientSecret),this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.environment=t.environment;else if(e.accessToken){if(t.parseAccessToken(e.accessToken),e.environment&&t.environment!==e.environment)throw new Error("AccessToken environment does not match environment passed in config");this.accessToken=t.accessToken,this.environment=t.environment,this.merchantId=t.merchantId}else{if(this.publicKey=e.publicKey,this.privateKey=e.privateKey,this.merchantId=e.merchantId||e.partnerId,this.environment=e.environment,!this.publicKey)throw new Error("Missing publicKey");if(!this.privateKey)throw new Error("Missing privateKey");if(!this.merchantId)throw new Error("Missing merchantId");if(!this.environment)throw new Error("Missing environment")}}baseMerchantPath(){return`/merchants/${this.merchantId}`}baseUrl(){return this.environment.baseUrl()}baseMerchantUrl(){return this.baseUrl()+this.baseMerchantPath()}baseGraphQLUrl(){return this.environment.baseGraphQLUrl()}};Yo.exports={Config:Rr}});var ea=v((VA,Zo)=>{"use strict";var qh=qr().Http,me=X(),kh=V().wrapPrototype,Lr=class extends qh{constructor(e){super(e)}checkGraphQLErrors(e){if(!("errors"in e)||!e.errors)return null;for(let t=0;t<e.errors.length;t++){let r=e.errors[t],i=r.message;if(!r.extensions)return me.UnexpectedError(`Unexpected HTTP response: ${i}`);switch(r.extensions.errorClass){case"VALIDATION":continue;case"AUTHENTICATION":return me.AuthenticationError("Authentication Error");case"AUTHORIZATION":return me.AuthorizationError("Authorization Error");case"NOT_FOUND":return me.NotFoundError("Not Found");case"UNSUPPORTED_CLIENT":return me.UpgradeRequired("Upgrade Required");case"RESOURCE_LIMIT":return me.TooManyRequestsError("Too Many Requests");case"INTERNAL":return me.ServerError("Server Error");case"SERVICE_AVAILABILITY":return me.ServiceUnavailableError("Service Unavailable");default:return me.UnexpectedError(`Unexpected HTTP response: ${i}`)}}return null}headers(){return{Accept:"application/json","Braintree-Version":this.config.graphQLApiVersion,"Content-Type":"application/json"}}request(e,t){let r={query:e};return t&&(r.variables=t),super.httpRequest("POST",this.config.baseGraphQLUrl(),r,null,this.config.environment.graphQLServer,this.config.environment.graphQLPort,this.headers()).then(i=>{let o=this.checkGraphQLErrors(i);return o?Promise.reject(o):Promise.resolve(i)})}};Zo.exports={GraphQL:kh(Lr)}});var ra=v((jA,ta)=>{"use strict";var Rh={PAYPAL:"PAYPAL",VENMO:"VENMO"};ta.exports=Rh});var ia=v((BA,na)=>{"use strict";var Lh={PAYMENT_RECOMMENDATIONS:"PAYMENT_RECOMMENDATIONS"};na.exports=Lh});var oa=v((GA,sa)=>{"use strict";var Uh=ra(),Vh=ia();sa.exports={RecommendedPaymentOption:Uh,Recommendations:Vh}});var ca=v(($A,aa)=>{"use strict";var wt=class{constructor(e){this._merchantAccountId=e._merchantAccountId,this._sessionId=e._sessionId,this._customer=e._customer,this._domain=e._domain}toGraphQLVariables(){let e={};return this._merchantAccountId&&(e.merchantAccountId=this._merchantAccountId),this._sessionId&&(e.sessionId=this._sessionId),this._customer&&(e.customer=this._customer.toGraphQLVariables()),this._domain&&(e.domain=this._domain),e}static builder(){return new Ur}},Ur=class{constructor(){this._merchantAccountId=null,this._sessionId=null,this._customer=null,this._domain=null}merchantAccountId(e){return this._merchantAccountId=e,this}sessionId(e){return this._sessionId=e,this}customer(e){return this._customer=e,this}domain(e){return this._domain=e,this}build(){return new wt(this)}};aa.exports=wt});var la=v((XA,ua)=>{"use strict";var At=class{constructor(e){this._merchantAccountId=e._merchantAccountId,this._sessionId=e._sessionId,this._recommendations=e._recommendations,this._customer=e._customer}toGraphQLVariables(){let e={};return this._merchantAccountId&&(e.merchantAccountId=this._merchantAccountId),e.sessionId=this._sessionId,this._recommendations&&(e.recommendations=this._recommendations),this._customer&&(e.customer=this._customer.toGraphQLVariables()),e}static builder(e,t){return new Vr(e,t)}},Vr=class{constructor(e,t){this._sessionId=e,this._recommendations=t}merchantAccountId(e){return this._merchantAccountId=e,this}customer(e){return this._customer=e,this}build(){return new At(this)}};ua.exports=At});var ha=v((HA,da)=>{"use strict";var Ct=class{constructor(e){this._email=e._email,this._phone=e._phone,this._deviceFingerprintId=e._deviceFingerprintId,this._paypalAppInstalled=e._paypalAppInstalled,this._venmoAppInstalled=e._venmoAppInstalled,this._userAgent=e._userAgent}toGraphQLVariables(){let e={};return this._email&&(e.email=this._email),this._phone&&(e.phone=this._phone.toGraphQLVariables()),this._deviceFingerprintId&&(e.deviceFingerprintId=this._deviceFingerprintId),e.paypalAppInstalled=this._paypalAppInstalled,e.venmoAppInstalled=this._venmoAppInstalled,this._userAgent&&(e.userAgent=this._userAgent),e}static builder(){return new jr}},jr=class{constructor(){this._email=null,this._phone=null,this._deviceFingerprintId=null,this._paypalAppInstalled=null,this._venmoAppInstalled=null,this._userAgent=null}email(e){return this._email=e,this}phone(e){return this._phone=e,this}deviceFingerprintId(e){return this._deviceFingerprintId=e,this}paypalAppInstalled(e){return this._paypalAppInstalled=e,this}venmoAppInstalled(e){return this._venmoAppInstalled=e,this}userAgent(e){return this._userAgent=e,this}build(){return new Ct(this)}};da.exports=Ct});var ma=v((KA,pa)=>{"use strict";var vt=class{constructor(e){this._countryPhoneCode=e._countryPhoneCode,this._phoneNumber=e._phoneNumber,this._extensionNumber=e._extensionNumber}toGraphQLVariables(){let e={};return this._countryPhoneCode&&(e.countryPhoneCode=this._countryPhoneCode),this._phoneNumber&&(e.phoneNumber=this._phoneNumber),this._extensionNumber&&(e.extensionNumber=this._extensionNumber),e}static builder(){return new Br}},Br=class{countryPhoneCode(e){return this._countryPhoneCode=e,this}phoneNumber(e){return this._phoneNumber=e,this}extensionNumber(e){return this._extensionNumber=e,this}build(){return new vt(this)}};pa.exports=vt});var ya=v((WA,fa)=>{"use strict";var bt=class{constructor(e){this._merchantAccountId=e._merchantAccountId,this._sessionId=e._sessionId,this._customer=e._customer}toGraphQLVariables(){let e={};return this._merchantAccountId&&(e.merchantAccountId=this._merchantAccountId),e.sessionId=this._sessionId,this._customer&&(e.customer=this._customer.toGraphQLVariables()),e}static builder(e){return new Gr(e)}},Gr=class{constructor(e){this._sessionId=e,this._merchantAccountId=null,this._customer=null}merchantAccountId(e){return this._merchantAccountId=e,this}customer(e){return this._customer=e,this}build(){return new bt(this)}};fa.exports=bt});var Ia=v((zA,ga)=>{"use strict";var jh=ca(),Bh=la(),Gh=ha(),$h=ma(),Xh=ya();ga.exports={CreateCustomerSessionInput:jh,UpdateCustomerSessionInput:Xh,CustomerRecommendationsInput:Bh,CustomerSessionInput:Gh,PhoneInput:$h}});var Aa=v((QA,wa)=>{"use strict";var $r=class{constructor(e,t){this.isInPayPalNetwork=e,this.recommendations=t}};wa.exports=$r});var va=v((YA,Ca)=>{"use strict";var Xr=class{constructor(e,t){this.paymentOption=e,this.recommendedPriority=t}};Ca.exports=Xr});var Ta=v((JA,ba)=>{"use strict";var Hh=Aa(),Kh=va();ba.exports={CustomerRecommendationsPayload:Hh,PaymentOptions:Kh}});var Da=v((ZA,Pa)=>{"use strict";var Hr=class{constructor(e){this.paymentOptions=e}};Pa.exports=Hr});var Na=v((eC,Sa)=>{"use strict";var Wh=Da();Sa.exports={CustomerRecommendations:Wh}});var Tt=v((tC,Ea)=>{"use strict";var zh=ea().GraphQL,{RecommendedPaymentOption:Qh,Recommendations:Yh}=oa(),{CreateCustomerSessionInput:Jh,UpdateCustomerSessionInput:Zh,CustomerRecommendationsInput:ep,CustomerSessionInput:tp,PhoneInput:rp}=Ia(),{CustomerRecommendationsPayload:np,PaymentOptions:ip}=Ta(),{CustomerRecommendations:sp}=Na();Ea.exports={GraphQL:zh,RecommendedPaymentOption:Qh,Recommendations:Yh,CreateCustomerSessionInput:Jh,UpdateCustomerSessionInput:Zh,CustomerRecommendationsInput:ep,CustomerSessionInput:tp,PhoneInput:rp,CustomerRecommendationsPayload:np,PaymentOptions:ip,CustomerRecommendations:sp}});var Ma=v((rC,_a)=>{"use strict";var Kr=class{constructor(e){this.attribute=e.attribute,this.code=e.code,this.message=e.message}};_a.exports={ValidationError:Kr}});var Pt=v((nC,xa)=>{"use strict";var op=J().Util,ap=Ma().ValidationError,Wr=class n{constructor(e){this.validationErrors={},this.errorCollections={};for(let t in e){if(!e.hasOwnProperty(t))continue;let r=e[t];t==="errors"?this.buildErrors(r):this.errorCollections[t]=new n(r)}}buildErrors(e){return e.map(t=>{let r=op.toCamelCase(t.attribute);return this.validationErrors[r]=this.validationErrors[r]||[],this.validationErrors[r].push(new ap(t))})}deepErrors(){let e=[];for(let t in this.validationErrors){if(!this.validationErrors.hasOwnProperty(t))continue;let r=this.validationErrors[t];e=e.concat(r)}for(let t in this.errorCollections){if(!this.errorCollections.hasOwnProperty(t))continue;let r=this.errorCollections[t];e=e.concat(r.deepErrors())}return e}for(e){return this.errorCollections[e]}forIndex(e){return this.errorCollections[`index${e}`]}on(e){return this.validationErrors[e]}};xa.exports={ValidationErrorsCollection:Wr}});var Dt=v((iC,Oa)=>{"use strict";var cp=V().wrapPrototype,up=Tt().GraphQL,lp=Pt().ValidationErrorsCollection,zr=class{constructor(e){this._service=new up(e)}query(e,t){return this._service.request(e,t)}static getValidationErrorCode(e){let t=e.extensions;if(!t)return null;let r=t.legacyCode;return r||null}static getValidationErrors(e){let t=e.errors;if(!t)return null;let r=[];for(let o of t)r.push({attribute:"",code:this.getValidationErrorCode(o),message:o.message});return new lp({errors:r})}};Oa.exports={GraphQLClient:cp(zr)}});var q=v((sC,Fa)=>{"use strict";var Qr=class{constructor(e){for(let t in e){if(!e.hasOwnProperty(t))continue;let r=e[t];this[t]=r,t==="globalId"&&(this.graphQLId=e.globalId)}}};Fa.exports={AttributeSetter:Qr}});var ka=v((oC,qa)=>{"use strict";var dp=q().AttributeSetter,Yr=class extends dp{};qa.exports={AddOn:Yr}});var Oe=v((aC,Ra)=>{"use strict";var hp=q().AttributeSetter,Jr=class extends hp{constructor(e){super(e)}};Ra.exports={ApplePayCard:Jr}});var Fe=v((cC,La)=>{"use strict";var pp=q().AttributeSetter,Zr=class extends pp{constructor(e){super(e),e&&(this.cardType=e.virtualCardType,this.last4=e.virtualCardLast4)}};La.exports={AndroidPayCard:Zr}});var Va=v((uC,Ua)=>{"use strict";var mp=q().AttributeSetter,en=class extends mp{};Ua.exports={AuthorizationAdjustment:en}});var Ba=v((lC,ja)=>{"use strict";var fp=q().AttributeSetter,tn=class extends fp{constructor(e){super(e)}};ja.exports={LiabilityShift:tn}});var nn=v((dC,Ga)=>{"use strict";var yp=q().AttributeSetter,gp=Ba().LiabilityShift,rn=class extends yp{constructor(e){super(e),e.liabilityShift&&(this.liabilityShift=new gp(e.liabilityShift))}};Ga.exports={RiskData:rn}});var St=v((hC,$a)=>{"use strict";var Ip=q().AttributeSetter,sn=class extends Ip{constructor(e){super(e)}};$a.exports={ThreeDSecureInfo:sn}});var Be=v((pC,Xa)=>{"use strict";var wp=q().AttributeSetter,Ap=nn().RiskData,Cp=St().ThreeDSecureInfo,Nt=class extends wp{static initClass(){this.StatusType={Failed:"failed",GatewayRejected:"gateway_rejected",ProcessorDeclined:"processor_declined",Verified:"verified",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}}}constructor(e){super(e),e.riskData&&(this.riskData=new Ap(e.riskData)),e.threeDSecureInfo&&(this.threeDSecureInfo=new Cp(e.threeDSecureInfo))}};Nt.initClass();Xa.exports={CreditCardVerification:Nt}});var fe=v((mC,Ha)=>{"use strict";var vp=q().AttributeSetter,bp=Be().CreditCardVerification,Et=class extends vp{static initClass(){this.CardType={AmEx:"American Express",CarteBlanche:"Carte Blanche",ChinaUnionPay:"China UnionPay",DinersClubInternational:"Diners Club",Discover:"Discover",Elo:"Elo",JCB:"JCB",Laser:"Laser",UKMaestro:"UK Maestro",Maestro:"Maestro",MasterCard:"MasterCard",Solo:"Solo",Switch:"Switch",Visa:"Visa",Unknown:"Unknown",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}},this.CustomerLocation={International:"international",US:"us"},this.CardTypeIndicator={Yes:"Yes",No:"No",Unknown:"Unknown"},this.DebitNetwork={Accel:"ACCEL",Nyce:"NYCE",Pulse:"PULSE",Star:"STAR",StarAccess:"STAR_ACCESS",Maestro:"MAESTRO",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}},this.Commercial=this.CountryOfIssuance=this.Debit=this.DurbinRegulated=this.Healthcare=this.IssuingBank=this.Payroll=this.Prepaid=this.PrepaidReloadable=this.ProductId=this.CardTypeIndicator}constructor(e){if(super(e),this.maskedNumber=`${this.bin}******${this.last4}`,this.expirationDate=`${this.expirationMonth}/${this.expirationYear}`,e){let t=(e.verifications||[]).sort((r,i)=>i.created_at-r.created_at);t[0]&&(this.verification=new bp(t[0]))}}};Et.initClass();Ha.exports={CreditCard:Et}});var Ne=v((fC,Ka)=>{"use strict";var Tp=q().AttributeSetter,on=class extends Tp{constructor(e){super(e)}};Ka.exports={PayPalAccount:on}});var za=v((yC,Wa)=>{"use strict";var Pp=q().AttributeSetter,an=class extends Pp{constructor(e){super(e)}};Wa.exports={PayPalHereDetails:an}});var Ya=v((gC,Qa)=>{"use strict";var Dp=q().AttributeSetter,cn=class extends Dp{constructor(e){super(e)}};Qa.exports={LocalPayment:cn}});var Za=v((IC,Ja)=>{"use strict";var Sp=q().AttributeSetter,un=class extends Sp{constructor(e){super(e)}};Ja.exports={MetaCheckoutCard:un}});var tc=v((wC,ec)=>{"use strict";var Np=q().AttributeSetter,ln=class extends Np{constructor(e){super(e)}};ec.exports={MetaCheckoutToken:ln}});var nc=v((AC,rc)=>{"use strict";var Ep=q().AttributeSetter,dn=class extends Ep{isValid(){return this.disbursementDate!=null}};rc.exports={DisbursementDetails:dn}});var sc=v((CC,ic)=>{"use strict";var _p=q().AttributeSetter,hn=class extends _p{constructor(e){super(e)}};ic.exports={TransactionDetails:hn}});var Ge=v((vC,oc)=>{"use strict";var Mp=q().AttributeSetter,xp=sc().TransactionDetails,_t=class n extends Mp{static initClass(){this.Status={Accepted:"accepted",AutoAccepted:"auto_accepted",Disputed:"disputed",Expired:"expired",Lost:"lost",Open:"open",UnderReview:"under_review",Won:"won"},this.Reason={CancelledRecurringTransaction:"cancelled_recurring_transaction",CreditNotProcessed:"credit_not_processed",Duplicate:"duplicate",Fraud:"fraud",General:"general",InvalidAccount:"invalid_account",NotRecognized:"not_recognized",ProductNotReceived:"product_not_received",ProductUnsatisfactory:"product_unsatisfactory",Retrieval:"retrieval",TransactionAmountDiffers:"transaction_amount_differs"},this.Kind={Chargeback:"chargeback",PreArbitration:"pre_arbitration",Retrieval:"retrieval"},this.ChargebackProtectionLevel={Effortless:"effortless",Standard:"standard",NotProtected:"not_protected"},this.ProtectionLevel={EffortlessCBP:"Effortless Chargeback Protection tool",StandardCBP:"Chargeback Protection tool",NoProtection:"No Protection"},this.PreDisputeProgram={None:"none",VisaRdr:"visa_rdr"}}constructor(e){super(e),this.transactionDetails=new xp(e.transaction);let t={effortless:n.ProtectionLevel.EffortlessCBP,standard:n.ProtectionLevel.StandardCBP,not_protected:n.ProtectionLevel.NoProtection};this.protectionLevel=t[this.chargebackProtectionLevel]||n.ProtectionLevel.NoProtection}};_t.initClass();oc.exports={Dispute:_t}});var cc=v((bC,ac)=>{"use strict";var Op=q().AttributeSetter,pn=class extends Op{constructor(e){super(e)}};ac.exports={FacilitatedDetails:pn}});var lc=v((TC,uc)=>{"use strict";var Fp=q().AttributeSetter,mn=class extends Fp{constructor(e){super(e)}};uc.exports={FacilitatorDetails:mn}});var hc=v((PC,dc)=>{"use strict";var qp=q().AttributeSetter,fn=class extends qp{constructor(e){super(e)}};dc.exports={SepaDirectDebitAccountDetails:fn}});var mc=v((DC,pc)=>{"use strict";var kp=q().AttributeSetter,yn=class extends kp{};pc.exports={Packages:yn}});var yc=v((SC,fc)=>{"use strict";var Rp=q().AttributeSetter,gn=class extends Rp{constructor(e){super(e),this.acceptedAt=new Date(this.acceptedAt)}};fc.exports={AchMandate:gn}});var $e=v((NC,gc)=>{"use strict";var Lp=q().AttributeSetter,Mt=class extends Lp{static initClass(){this.StatusType={Failed:"failed",GatewayRejected:"gateway_rejected",Pending:"pending",ProcessorDeclined:"processor_declined",Verified:"verified",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}},this.VerificationMethod={IndependentCheck:"independent_check",MicroTransfers:"micro_transfers",NetworkCheck:"network_check",TokenizedCheck:"tokenized_check",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}},this.VerificationAddOns={CustomerVerification:"customer_verification",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}}}};Mt.initClass();gc.exports={UsBankAccountVerification:Mt}});var Xe=v((EC,Ic)=>{"use strict";var Up=q().AttributeSetter,Vp=yc().AchMandate,jp=$e().UsBankAccountVerification,In=class extends Up{constructor(e){super(e),this.achMandate=new Vp(this.achMandate),this.verifications?this.verifications=this.verifications.map(t=>new jp(t)):this.verifications=[]}};Ic.exports={UsBankAccount:In}});var Ac=v((_C,wc)=>{"use strict";var Bp=q().AttributeSetter,wn=class extends Bp{constructor(e){super(e)}};wc.exports={VenmoAccountDetails:wn}});var xt=v((MC,Cc)=>{"use strict";var Gp=q().AttributeSetter,An=class extends Gp{constructor(e){super(e)}};Cc.exports={VisaCheckoutCard:An}});var Ot=v((xC,vc)=>{"use strict";var $p=q().AttributeSetter,Cn=class extends $p{constructor(e){super(e)}};vc.exports={SamsungPayCard:Cn}});var ye=v((OC,Tc)=>{"use strict";var bc=Symbol(),Xp=q().AttributeSetter,Hp=Oe().ApplePayCard,Kp=Fe().AndroidPayCard,Wp=Va().AuthorizationAdjustment,zp=fe().CreditCard,Qp=Ne().PayPalAccount,Yp=za().PayPalHereDetails,Jp=Ya().LocalPayment,Zp=Za().MetaCheckoutCard,em=tc().MetaCheckoutToken,tm=nc().DisbursementDetails,rm=Ge().Dispute,nm=cc().FacilitatedDetails,im=lc().FacilitatorDetails,sm=nn().RiskData,om=hc().SepaDirectDebitAccountDetails,am=mc().Packages,cm=St().ThreeDSecureInfo,um=Xe().UsBankAccount,lm=Ac().VenmoAccountDetails,dm=xt().VisaCheckoutCard,hm=Ot().SamsungPayCard,pm=V().wrapPrototype,Ft=class extends Xp{static initClass(){this.CreatedUsing={FullInformation:"full_information",Token:"token"},this.EscrowStatus={HoldPending:"hold_pending",Held:"held",ReleasePending:"release_pending",Released:"released",Refunded:"refunded"},this.Source={Api:"api",ControlPanel:"control_panel",Recurring:"recurring"},this.Type={Credit:"credit",Sale:"sale",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}},this.GatewayRejectionReason={ApplicationIncomplete:"application_incomplete",Avs:"avs",Cvv:"cvv",AvsAndCvv:"avs_and_cvv",Duplicate:"duplicate",Fraud:"fraud",RiskThreshold:"risk_threshold",ThreeDSecure:"three_d_secure",TokenIssuance:"token_issuance"},this.IndustryData={Lodging:"lodging",TravelAndCruise:"travel_cruise",TravelAndFlight:"travel_flight"},this.AdditionalCharge={Restaurant:"restaurant",GiftShop:"gift_shop",MiniBar:"mini_bar",Telephone:"telephone",Laundry:"laundry",Other:"other"},this.Status={AuthorizationExpired:"authorization_expired",Authorizing:"authorizing",Authorized:"authorized",GatewayRejected:"gateway_rejected",Failed:"failed",ProcessorDeclined:"processor_declined",Settled:"settled",Settling:"settling",SettlementConfirmed:"settlement_confirmed",SettlementDeclined:"settlement_declined",SettlementPending:"settlement_pending",SubmittedForSettlement:"submitted_for_settlement",Voided:"voided",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}},this.ExternalVault={WillVault:"will_vault",Vaulted:"vaulted"},this.ReasonCode={Any:"any_reason_code"}}constructor(e,t){super(e),this.creditCard=new zp(e.creditCard),this.paypalAccount=new Qp(e.paypal),this.paypalHereDetails=new Yp(e.paypalHere),this.localPayment=new Jp(e.localPayment),this.applePayCard=new Hp(e.applePay),this.androidPayCard=new Kp(e.androidPayCard),this.disbursementDetails=new tm(e.disbursementDetails),this.visaCheckoutCard=new dm(e.visaCheckoutCard),this.samsungPayCard=new hm(e.samsungPayCard),e.metaCheckoutCard&&(this.metaCheckoutCard=new Zp(e.metaCheckoutCard)),e.metaCheckoutToken&&(this.metaCheckoutToken=new em(e.metaCheckoutToken)),e.sepaDebitAccountDetail&&(this.sepaDirectDebitAccountDetails=new om(e.sepaDebitAccountDetail)),e.disputes!=null&&(this.disputes=e.disputes.map(r=>new rm(r))),e.facilitatedDetails&&(this.facilitatedDetails=new nm(e.facilitatedDetails)),e.facilitatorDetails&&(this.facilitatorDetails=new im(e.facilitatorDetails)),e.shipments&&(this.packages=new am(e.shipments)),e.riskData&&(this.riskData=new sm(e.riskData)),e.threeDSecureInfo&&(this.threeDSecureInfo=new cm(e.threeDSecureInfo)),e.usBankAccount&&(this.usBankAccount=new um(e.usBankAccount)),e.authorizationAdjustments&&(this.authorizationAdjustments=e.authorizationAdjustments.map(r=>new Wp(r))),e.venmoAccount&&(this.venmoAccountDetails=new lm(e.venmoAccount)),this[bc]=t}isDisbursed(){return this.disbursementDetails.isValid()}lineItems(){return this[bc].transactionLineItem.findAll(this.id)}};Ft.initClass();Tc.exports={Transaction:pm(Ft,{})}});var bn=v((FC,Pc)=>{"use strict";var mm=ye().Transaction,fm=Pt().ValidationErrorsCollection,vn=class{constructor(e,t){for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];this[r]=i}this.success=!1,this.errors=new fm(e.errors),e.transaction&&(this.transaction=new mm(e.transaction,t))}};Pc.exports={ErrorResponse:vn}});var Sc=v((qC,Dc)=>{"use strict";var{Readable:ym}=require("stream"),Tn=class extends ym{constructor(e){super({objectMode:!0}),this.searchResponse=e,this.currentItem=0,this.currentOffset=0,this.bufferedResults=[]}nextItem(){if(this.searchResponse.fatalError!=null){this.emit("error",this.searchResponse.fatalError),this.push(null);return}else if(this.bufferedResults.length>0){this.pushBufferedResults();return}else if(this.currentItem>=this.searchResponse.ids.length){this.push(null);return}let e=0;this.searchResponse.pagingFunction(this.searchResponse.ids.slice(this.currentOffset,this.currentOffset+this.searchResponse.pageSize),(t,r)=>{t!=null?this.emit("error",t):this.bufferedResults.push(r),this.currentItem+=1,e+=1,(e===this.searchResponse.pageSize||this.currentItem===this.searchResponse.ids.length)&&this.push(this.bufferedResults.shift())}),this.currentOffset+=this.searchResponse.pageSize}pushBufferedResults(){return(()=>{let e=[];for(;this.bufferedResults.length>0;){let t;if(this.push(this.bufferedResults.shift())===!1)break;e.push(t)}return e})()}ready(){return this.readyToStart=!0,this.emit("ready")}_read(){return this.readyToStart!=null?this.nextItem():this.on("ready",()=>this.nextItem())}};Dc.exports={SearchResponseStream:Tn}});var Ec=v((kC,Nc)=>{"use strict";var gm=Sc().SearchResponseStream,Pn=class{constructor(e,t){e!=null&&this.setPagingFunction(e),t!=null&&this.setResponse(t),this.stream=new gm(this),this.success=!0}each(e){let t=this.ids,r=this.pageSize,i=[],o=0;for(;o<t.length;)i.push(o),o+=r;return i.forEach(s=>this.pagingFunction(t.slice(s,s+r),e))}first(e){return this.ids.length===0?e(null,null):this.pagingFunction([this.ids[0]],e)}length(){return this.ids.length}ready(){return this.stream.ready()}setFatalError(e){this.fatalError=e}setResponse(e){this.ids=e.searchResults.ids,this.pageSize=parseInt(e.searchResults.pageSize,10)}setPagingFunction(e){this.pagingFunction=e}};Nc.exports={SearchResponse:Pn}});var B=v((RC,Mc)=>{"use strict";var Dn=bn().ErrorResponse,_c=Ec().SearchResponse,Sn=X(),Nn=class{createResponseHandler(e,t){let r=this.gateway;return function(i){if(i.apiErrorResponse)return Promise.resolve(new Dn(i.apiErrorResponse,r));if(i.success=!0,e===null)return Promise.resolve(i);if(typeof e=="string"){let s=e;return i[s]&&t!=null&&(i[s]=new t(i[s],r)),Promise.resolve(i)}let o=!0;for(let s in e)if(e.hasOwnProperty(s)&&(t=e[s],i[s]))return o=!1,t!=null&&(i[s]=new t(i[s],r)),Promise.resolve(i);if(o)return Promise.resolve(i)}}createSearchResponse(e,t,r,i){let o=this.gateway;if(i!=null)return o.http.post(e,{search:t.toHash()},this.searchResponseHandler(r,i));let s=new _c;return o.http.post(e,{search:t.toHash()},function(l,h){return l!=null?s.setFatalError(l):h.searchResults?(s.setResponse(h),s.setPagingFunction(r)):h.apiErrorResponse?s.setFatalError(new Dn(h.apiErrorResponse,o)):s.setFatalError(Sn.UnexpectedError("Unexpected Error")),s.ready()}),s.stream}searchResponseHandler(e,t){let r=this.gateway;return function(i,o){if(i)return t(i,o);if(o.searchResults){let s=new _c(e,o);return t(null,s)}else if(o.apiErrorResponse)return t(null,new Dn(o.apiErrorResponse,r));return t(Sn.UnexpectedError("Unexpected Error"),null)}}pagingFunctionGenerator(e,t,r,i,o){return(s,l)=>{e.ids().in(s);let h=this.gateway;h.http.post(`${this.config.baseMerchantPath()}/${t}`,{search:e.toHash()},(f,b)=>{if(f){l(f,null);return}else if(i in b){if(Array.isArray(o(b))){o(b).forEach(C=>{l(null,new r(C,h))});return}l(null,new r(o(b),h));return}l(Sn.UnexpectedError("Unexpected Error"),null)})}}};Mc.exports={Gateway:Nn}});var Oc=v((LC,xc)=>{"use strict";var Im=ka().AddOn,wm=B().Gateway,Am=V().wrapPrototype,En=class extends wm{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}all(){return this.gateway.http.get(`${this.config.baseMerchantPath()}/add_ons`).then(this.createResponseHandler("add_on",Im)).then(e=>{if(!e.success)return e;let t=e.addOns;return t.success=e.success,t.addOns=e.addOns,t})}};xc.exports={AddOnGateway:Am(En)}});var qc=v((UC,Fc)=>{"use strict";var Cm=q().AttributeSetter,_n=class extends Cm{};Fc.exports={Address:_n}});var xn=v((VC,kc)=>{"use strict";var vm=B().Gateway,bm=qc().Address,Tm=X(),Pm=V().wrapPrototype,Mn=class extends vm{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){let t=e.customerId;return delete e.customerId,this.gateway.http.post(`${this.config.baseMerchantPath()}/customers/${t}/addresses`,{address:e}).then(this.responseHandler())}delete(e,t){let r=`${this.config.baseMerchantPath()}/customers/${e}/addresses/${t}`;return this.gateway.http.delete(r)}find(e,t){return e.trim()===""||t.trim()===""?Promise.reject(Tm.NotFoundError("Not Found")):this.gateway.http.get(`${this.config.baseMerchantPath()}/customers/${e}/addresses/${t}`).then(r=>r.address)}update(e,t,r){return this.gateway.http.put(`${this.config.baseMerchantPath()}/customers/${e}/addresses/${t}`,{address:r}).then(this.responseHandler())}responseHandler(){return this.createResponseHandler("address",bm)}sharedSignature(e){let t=["company","countryCodeAlpha2","countryCodeAlpha3","countryCodeNumeric","countryName","extendedAddress","firstName","lastName","locality","phoneNumber","postalCode","region","streetAddress"],r=[];for(let i of t)r.push(e+"["+i+"]");return e?(r.push(e+"[internationalPhone][countryCode]"),r.push(e+"[internationalPhone][nationalNumber]")):(r.push("internationalPhone[countryCode]"),r.push("internationalPhone[nationalNumber]")),r}};kc.exports={AddressGateway:Pm(Mn)}});var Lc=v((jC,Rc)=>{"use strict";var Dm=B().Gateway,Sm=bn().ErrorResponse,Nm=J().Util,Em=X(),_m=V().wrapPrototype,Mm=2,On=class extends Dm{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}generate(e){let t;return e=e||{},e.version||(e.version=Mm),t=this.validateParams(e),t||(t=Nm.verifyKeys(this._generateSignature(),e)),t?Promise.reject(t):(e={client_token:e},this.gateway.http.post(`${this.config.baseMerchantPath()}/client_token`,e).then(this.responseHandler()))}validateParams(e){if(e.customerId||!e.options)return;let r=["failOnDuplicatePaymentMethod","failOnDuplicatePaymentMethodForCustomer","makeDefault","verifyCard"].filter(i=>e.options[i]).map(i=>i);return r.length>0?Em.UnexpectedError(`A customer id is required for the following options: ${r.join(", ")}`):null}responseHandler(){let e=this.gateway;return function(t){if(t.clientToken)return t.success=!0,t.clientToken=t.clientToken.value,t;if(t.apiErrorResponse)return new Sm(t.apiErrorResponse,e)}}_generateSignature(){return{valid:["addressId","customerId","proxyMerchantId","merchantAccountId","version","options","options[makeDefault]","options[verifyCard]","options[failOnDuplicatePaymentMethod]","options[failOnDuplicatePaymentMethodForCustomer]"],ignore:["domains"]}}};Rc.exports={ClientTokenGateway:_m(On)}});var be=v((BC,Uc)=>{"use strict";var qt=J().Util;function ge(n){return Array.prototype.slice.call(n)}var Fn=class{static equalityFields(){let e=ge(arguments);return this._createFieldAccessors(e,He)}static partialMatchFields(){let e=ge(arguments);return this._createFieldAccessors(e,Ke)}static endsWithFields(){let e=ge(arguments);return this._createFieldAccessors(e,kt)}static textFields(){let e=ge(arguments);return this._createFieldAccessors(e,We)}static keyValueFields(){let e=ge(arguments);return this._createFieldAccessors(e,qn)}static multipleValueField(e,t){return t=t||{},this._createFieldAccessors([e],Rt,t)}static multipleValueOrTextField(e,t){return t=t||{},this._createFieldAccessors([e],Lt,t)}static rangeFields(){let e=ge(arguments);return this._createFieldAccessors(e,Ut)}static _createFieldAccessors(e,t,r){return e.map(i=>(this.prototype[i]=this._fieldTemplate(i,t,r),this.prototype[i]))}static _fieldTemplate(e,t,r){return function(){return new t(e,this,r)}}constructor(){this.criteria={}}addCriteria(e,t){if(this.criteria[e]===Object(this.criteria[e])&&!Array.isArray(this.criteria[e]))return qt.merge(this.criteria[e],t);this.criteria[e]=t}toHash(){return this.criteria}},Ee=class{static operators(){let e=ge(arguments),t=r=>function(i){let o={};return o[r]=`${i}`,this.parent.addCriteria(this.nodeName,o)};return e.map(r=>{this.prototype[r]=t(r)})}constructor(e,t){this.nodeName=e,this.parent=t}},He=class extends Ee{static initClass(){this.operators("is","isNot")}};He.initClass();var Ke=class extends He{static initClass(){this.operators("endsWith","startsWith")}};Ke.initClass();var kt=class extends Ee{static initClass(){this.operators("endsWith")}};kt.initClass();var We=class extends Ke{static initClass(){this.operators("contains")}};We.initClass();var qn=class extends Ee{is(e){return this.parent.addCriteria(this.nodeName,e)}},Rt=class extends Ee{constructor(e,t,r){super(e,t),this.options=r}allowedValues(){return this.options.allows}in(){let e=ge(arguments);if(e=qt.flatten(e),xm(this,"allowedValues",t=>t.allowedValues())){let t=this.allowedValues(),r=qt.without(e,t);if(!qt.arrayIsEmpty(r))throw new Error(`Invalid argument(s) for ${this.nodeName}`)}return this.parent.addCriteria(this.nodeName,e)}is(e){return this.in(e)}},Lt=class extends Rt{static initClass(){this.delegators("contains","endsWith","is","isNot","startsWith")}static delegators(){let e=ge(arguments),t=r=>function(i){return this.textNode[r](i)};return e.map(r=>{this.prototype[r]=t(r)})}constructor(e,t,r){super(e,t,r),this.textNode=new We(e,t)}};Lt.initClass();var Ut=class extends Ee{static initClass(){this.operators("is")}between(e,t){return this.min(e),this.max(t)}max(e){return this.parent.addCriteria(this.nodeName,{max:e})}min(e){return this.parent.addCriteria(this.nodeName,{min:e})}};Ut.initClass();Uc.exports={AdvancedSearch:Fn};function xm(n,e,t){if(typeof n<"u"&&n!==null&&typeof n[e]=="function")return t(n,e)}});var jc=v((GC,Vc)=>{"use strict";var{AdvancedSearch:Om}=be(),Vt=class extends Om{static initClass(){this.multipleValueField("ids")}};Vt.initClass();Vc.exports={CreditCardSearch:Vt}});var Xc=v(($C,$c)=>{"use strict";var{Gateway:Fm}=B(),{CreditCard:jt}=fe(),Bc=X(),{CreditCardSearch:Gc}=jc(),{wrapPrototype:qm}=V(),kn=class extends Fm{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){return this._checkForDeprecatedAttributes(e),this.gateway.http.post(`${this.config.baseMerchantPath()}/payment_methods`,{creditCard:e}).then(this.responseHandler())}delete(e){let t=`${this.config.baseMerchantPath()}/payment_methods/credit_card/${e}`;return this.gateway.http.delete(t)}find(e){return e.trim()===""?Promise.reject(Bc.NotFoundError("Not Found")):this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_methods/credit_card/${e}`).then(function(t){return new jt(t.creditCard)})}fromNonce(e){return e.trim()===""?Promise.reject(Bc.NotFoundError("Not Found")):this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_methods/from_nonce/${e}`).then(t=>new jt(t.creditCard)).catch(t=>(t.message=`Payment method with nonce ${e} locked, consumed or not found`,Promise.reject(t)))}update(e,t){return this._checkForDeprecatedAttributes(t),this.gateway.http.put(`${this.config.baseMerchantPath()}/payment_methods/credit_card/${e}`,{creditCard:t}).then(this.responseHandler())}responseHandler(){return this.createResponseHandler("creditCard",jt)}expired(e){let t=`${this.config.baseMerchantPath()}/payment_methods/all/expired_ids`,r=new Gc,i=this.pagingFunctionGenerator(r,"payment_methods/all/expired");return this.createSearchResponse(t,r,i,e)}expiringBetween(e,t,r){let i=`start=${this.dateFormat(e)}&end=${this.dateFormat(t)}`,o=`${this.config.baseMerchantPath()}/payment_methods/all/expiring_ids?${i}`,s=new Gc,l=this.pagingFunctionGenerator(s,`payment_methods/all/expiring?${i}`);return this.createSearchResponse(o,s,l,r)}dateFormat(e){let t=e.getMonth()+1;return t<10?t=`0${t}`:t=`${t}`,t+e.getFullYear()}pagingFunctionGenerator(e,t){return super.pagingFunctionGenerator(e,t,jt,"paymentMethods",r=>r.paymentMethods.creditCard)}_checkForDeprecatedAttributes(e){e.deviceSessionId!=null&&console.warn("[DEPRECATED] `deviceSessionId` is a deprecated param for CreditCard objects. Use `deviceData` instead"),e.fraudMerchantId!=null&&console.warn("[DEPRECATED] `fraudMerchantId` is a deprecated param for CreditCard objects. Use `deviceData` instead"),e.venmoSdkPaymentMethodCode!=null&&console.warn("The Venmo SDK integration is Unsupported. Please update your integration to use Pay with Venmo instead (https://developer.paypal.com/braintree/docs/guides/venmo/overview)"),e.options!=null&&e.options.venmoSdkSession!=null&&console.warn("The Venmo SDK integration is Unsupported. Please update your integration to use Pay with Venmo instead (https://developer.paypal.com/braintree/docs/guides/venmo/overview)")}};$c.exports={CreditCardGateway:qm(kn,{ignoreMethods:["expired","expiringBetween"]})}});var Kc=v((XC,Hc)=>{"use strict";var km=be().AdvancedSearch,Rm=fe().CreditCard,Lm=Be().CreditCardVerification,Bt=class extends km{static initClass(){this.textFields("billingAddressDetailsPostalCode","creditCardCardholderName","customerEmail","customerId","id","paymentMethodToken"),this.equalityFields("creditCardExpirationDate"),this.partialMatchFields("creditCardNumber"),this.multipleValueField("creditCardCardType",{allows:Rm.CardType.All()}),this.multipleValueField("status",{allows:Lm.StatusType.All()}),this.multipleValueField("ids"),this.rangeFields("createdAt")}};Bt.initClass();Hc.exports={CreditCardVerificationSearch:Bt}});var zc=v((HC,Wc)=>{"use strict";var Um=B().Gateway,ze=Be().CreditCardVerification,Vm=Kc().CreditCardVerificationSearch,jm=J().Util,Bm=X(),Gm=V().wrapPrototype,Rn=class extends Um{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}find(e){return e.trim()===""?Promise.reject(Bm.NotFoundError("Not Found")):this.gateway.http.get(`${this.config.baseMerchantPath()}/verifications/${e}`).then(function(t){return new ze(t.verification)})}search(e,t){let r=new Vm;return e(r),this.createSearchResponse(`${this.config.baseMerchantPath()}/verifications/advanced_search_ids`,r,this.pagingFunctionGenerator(r),t)}create(e){let t=jm.verifyKeys(this._createSignature(),e);return t?Promise.reject(t,null):this.gateway.http.post(`${this.config.baseMerchantPath()}/verifications`,{verification:e}).then(this.createResponseHandler("verification",ze))}responseHandler(){return this.createResponseHandler("creditCardVerification",ze)}pagingFunctionGenerator(e){return(t,r)=>{let i=e.toHash();return i.ids=t,this.gateway.http.post(`${this.config.baseMerchantPath()}/verifications/advanced_search`,{search:i},function(o,s){return o?r(o,null):Array.isArray(s.creditCardVerifications.verification)?s.creditCardVerifications.verification.map(l=>r(null,new ze(l))):r(null,new ze(s.creditCardVerifications.verification))})}}_createSignature(){return{valid:["creditCard","creditCard[billingAddress]","creditCard[billingAddress][company]","creditCard[billingAddress][countryCodeAlpha2]","creditCard[billingAddress][countryCodeAlpha3]","creditCard[billingAddress][countryCodeNumeric]","creditCard[billingAddress][countryName]","creditCard[billingAddress][extendedAddress]","creditCard[billingAddress][firstName]","creditCard[billingAddress][lastName]","creditCard[billingAddress][locality]","creditCard[billingAddress][postalCode]","creditCard[billingAddress][region]","creditCard[billingAddress][streetAddress]","creditCard[cardholderName]","creditCard[cvv]","creditCard[expirationDate]","creditCard[expirationMonth]","creditCard[expirationYear]","creditCard[number]","externalVault","externalVault[previousNetworkTransactionId]","externalVault[status]","intendedTransactionSource","paymentMethodNonce","options","options[accountType]","options[amount]","options[merchantAccountId]","riskData","riskData[customerBrowser]","riskData[customerIp]","threeDSecureAuthenticationId","threeDSecurePassThru","threeDSecurePassThru[authenticationResponse]","threeDSecurePassThru[cavv]","threeDSecurePassThru[cavvAlgorithm]","threeDSecurePassThru[directoryResponse]","threeDSecurePassThru[dsTransactionId]","threeDSecurePassThru[eciFlag]","threeDSecurePassThru[xid]","threeDSecurePassThru[threeDSecureVersion]"]}}};Wc.exports={CreditCardVerificationGateway:Gm(Rn,{ignoreMethods:["search"]})}});var Gt=v((KC,Qc)=>{"use strict";var $m=q().AttributeSetter,Ln=class extends $m{constructor(e){super(e)}};Qc.exports={VenmoAccount:Ln}});var Qe=v((WC,Yc)=>{"use strict";var Xm=q().AttributeSetter,Un=class extends Xm{constructor(e){super(e)}};Yc.exports={SepaDirectDebitAccount:Un}});var Zc=v((zC,Jc)=>{"use strict";var Hm=q().AttributeSetter,Km=Oe().ApplePayCard,Wm=Fe().AndroidPayCard,zm=fe().CreditCard,Qm=Ne().PayPalAccount,Ym=Gt().VenmoAccount,Jm=Qe().SepaDirectDebitAccount,Zm=Xe().UsBankAccount,Vn=class extends Hm{constructor(e){super(e),this.paymentMethods=[],e.creditCards&&(this.creditCards=e.creditCards.map(t=>new zm(t)),this._addPaymentMethods(this.creditCards)),e.applePayCards&&(this.applePayCards=e.applePayCards.map(t=>new Km(t)),this._addPaymentMethods(this.applePayCards)),e.androidPayCards&&(this.androidPayCards=e.androidPayCards.map(t=>new Wm(t)),this._addPaymentMethods(this.androidPayCards)),e.paypalAccounts&&(this.paypalAccounts=e.paypalAccounts.map(t=>new Qm(t)),this._addPaymentMethods(this.paypalAccounts)),e.sepaDebitAccounts&&(this.sepaDirectDebitAccounts=e.sepaDebitAccounts.map(t=>new Jm(t)),this._addPaymentMethods(this.sepaDirectDebitAccounts)),e.venmoAccounts&&(this.venmoAccounts=e.venmoAccounts.map(t=>new Ym(t)),this._addPaymentMethods(this.venmoAccounts)),e.usBankAccounts&&(this.usBankAccounts=e.usBankAccounts.map(t=>new Zm(t)),this._addPaymentMethods(this.usBankAccounts))}_addPaymentMethods(e){return e.map(t=>this.paymentMethods.push(t))}};Jc.exports={Customer:Vn}});var tu=v((QC,eu)=>{"use strict";var ef=be().AdvancedSearch,$t=class extends ef{static initClass(){this.textFields("addressCountryName","addressExtendedAddress","addressFirstName","addressLastName","addressLocality","addressPostalCode","addressRegion","addressStreetAddress","cardholderName","company","email","fax","firstName","id","lastName","paymentMethodToken","paypalAccountEmail","phone","website","paymentMethodTokenWithDuplicates"),this.equalityFields("creditCardExpirationDate"),this.partialMatchFields("creditCardNumber"),this.multipleValueField("ids"),this.rangeFields("createdAt")}};$t.initClass();eu.exports={CustomerSearch:$t}});var nu=v((YC,ru)=>{"use strict";var tf=B().Gateway,rf=J().Util,jn=Zc().Customer,nf=tu().CustomerSearch,sf=X(),of=V().wrapPrototype,Bn=class extends tf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){let t=rf.verifyKeys(this._createSignature(),e);return t?Promise.reject(t):(this._checkForDeprecatedAttributes(e),this.gateway.http.post(`${this.config.baseMerchantPath()}/customers`,{customer:e}).then(this.responseHandler()))}delete(e){return this.gateway.http.delete(`${this.config.baseMerchantPath()}/customers/${e}`)}find(e,t){let r="";return e.trim()===""?Promise.reject(sf.NotFoundError("Not Found"),null):(t&&(r=`?association_filter_id=${t}`),this.gateway.http.get(`${this.config.baseMerchantPath()}/customers/${e}${r}`).then(function(i){return new jn(i.customer)}))}update(e,t){return this._checkForDeprecatedAttributes(t),this.gateway.http.put(`${this.config.baseMerchantPath()}/customers/${e}`,{customer:t}).then(this.responseHandler())}search(e,t){let r=new nf;return e(r),this.createSearchResponse(`${this.config.baseMerchantPath()}/customers/advanced_search_ids`,r,this.pagingFunctionGenerator(r),t)}responseHandler(){return this.createResponseHandler("customer",jn)}pagingFunctionGenerator(e){return super.pagingFunctionGenerator(e,"customers/advanced_search",jn,"customers",t=>t.customers.customer)}_createSignature(){return{valid:["id","company","email","fax","firstName","internationalPhone[countryCode]","internationalPhone[nationalNumber]","lastName","phone","website","deviceData","deviceSessionId","fraudMerchantId","paymentMethodNonce","riskData","riskData[customerBrowser]","riskData[customerIp]","creditCard","creditCard[token]","creditCard[cardholderName]","creditCard[cvv]","creditCard[expirationDate]","creditCard[expirationMonth]","creditCard[expirationYear]","creditCard[number]","creditCard[paymentMethodNonce]","creditCard[venmoSdkPaymentMethodCode]","creditCard[options]","creditCard[threeDSecurePassThru]","creditCard[threeDSecurePassThru][eciFlag]","creditCard[threeDSecurePassThru][cavv]","creditCard[threeDSecurePassThru][xid]","creditCard[threeDSecurePassThru][threeDSecureVersion]","creditCard[threeDSecurePassThru][authenticationResponse]","creditCard[threeDSecurePassThru][directoryResponse]","creditCard[threeDSecurePassThru][cavvAlgorithm]","creditCard[threeDSecurePassThru][dsTransactionId]","creditCard[options][failOnDuplicatePaymentMethod]","creditCard[options][makeDefault]","creditCard[options][skipAdvancedFraudChecking]","creditCard[options][verificationAmount]","creditCard[options][verificationMerchantAccountId]","creditCard[options][verifyCard]","creditCard[options][verificationAccountType]","creditCard[options][venmoSdkSession]","creditCard[billingAddress]","creditCard[billingAddress][company]","creditCard[billingAddress][countryCodeAlpha2]","creditCard[billingAddress][countryCodeAlpha3]","creditCard[billingAddress][countryCodeNumeric]","creditCard[billingAddress][countryName]","creditCard[billingAddress][extendedAddress]","creditCard[billingAddress][firstName]","creditCard[billingAddress][lastName]","creditCard[billingAddress][locality]","creditCard[billingAddress][postalCode]","creditCard[billingAddress][region]","creditCard[billingAddress][streetAddress]","creditCard[billingAddress][phoneNumber]","creditCard[billingAddress][options]","creditCard[billingAddress][options][updateExisting]","taxIdentifiers[countryCode]","taxIdentifiers[identifier]","options","options[paypal]","options[paypal][payeeEmail]","options[paypal][orderId]","options[paypal][amount]","options[paypal][description]","options[paypal][shipping]","options[paypal][shipping][firstName]","options[paypal][shipping][lastName]","options[paypal][shipping][company]","options[paypal][shipping][countryName]","options[paypal][shipping][countryCodeAlpha2]","options[paypal][shipping][countryCodeAlpha3]","options[paypal][shipping][countryCodeNumeric]","options[paypal][shipping][extendedAddress]","options[paypal][shipping][locality]","options[paypal][shipping][postalCode]","options[paypal][shipping][region]","options[paypal][shipping][streetAddress]","options[paypal][shipping][phoneNumber]"],ignore:["customFields","options[paypal][customField]"]}}_checkForDeprecatedAttributes(e){e.deviceSessionId!=null&&console.warn("[DEPRECATED] `deviceSessionId` is a deprecated param for Customer objects. Use `deviceData` instead"),e.fraudMerchantId!=null&&console.warn("[DEPRECATED] `fraudMerchantId` is a deprecated param for Customer objects. Use `deviceData` instead"),e.creditCard!=null&&(e.creditCard.venmoSdkPaymentMethodCode!=null&&console.warn("The Venmo SDK integration is Unsupported. Please update your integration to use Pay with Venmo instead (https://developer.paypal.com/braintree/docs/guides/venmo/overview)"),e.creditCard.options!=null&&e.creditCard.options.venmoSdkSession!=null&&console.warn("The Venmo SDK integration is Unsupported. Please update your integration to use Pay with Venmo instead (https://developer.paypal.com/braintree/docs/guides/venmo/overview)"))}};ru.exports={CustomerGateway:of(Bn,{ignoreMethods:["search"]})}});var ou=v((JC,su)=>{"use strict";var af=B().Gateway,cf=V().wrapPrototype,qe=X(),{GraphQLClient:iu}=Dt(),{CreateCustomerSessionInput:uf,CustomerRecommendations:lf,CustomerRecommendationsInput:df,CustomerRecommendationsPayload:hf,RecommendedPaymentOption:pf,PaymentOptions:mf,UpdateCustomerSessionInput:ff}=Tt(),Gn=class extends af{constructor(e){super(),this._graphQLClient=e.graphQLClient}createCustomerSession(e){return e instanceof uf?this._executeMutation(`mutation CreateCustomerSession($input: CreateCustomerSessionInput!) { 
        createCustomerSession(input: $input) {
          sessionId
        }
      }`,e,"createCustomerSession"):Promise.reject(qe.InvalidKeysError("Invalid input type. Use CreateCustomerSessionInput to build the input object."))}updateCustomerSession(e){return e instanceof ff?this._executeMutation(`mutation UpdateCustomerSession($input: UpdateCustomerSessionInput!) { 
        updateCustomerSession(input: $input) {
          sessionId
        }
      }`,e,"updateCustomerSession"):Promise.reject(qe.InvalidKeysError("Invalid input type. Use UpdateCustomerSessionInput to build the input object."))}getCustomerRecommendations(e){if(!(e instanceof df))return Promise.reject(qe.InvalidKeysError("Invalid input type. Use CustomerRecommendationsInput to build the input object."));let t={input:e.toGraphQLVariables()};try{return this._graphQLClient.query(`query CustomerRecommendations($input: CustomerRecommendationsInput!) {
          customerRecommendations(input: $input) {
            isInPayPalNetwork
            recommendations {
              ... on PaymentRecommendations {
                paymentOptions {
                  paymentOption
                  recommendedPriority
                }
              }
            }
          }
        }`,t).then(r=>{let i=iu.getValidationErrors(r);return i?Promise.resolve({success:!1,errors:i}):Promise.resolve({success:!0,target:this._extractCustomerRecommendationsPayload(r)})})}catch(r){throw qe.UnexpectedError(r.message)}}_executeMutation(e,t,r){let i={input:t.toGraphQLVariables()};try{return this._graphQLClient.query(e,i).then(o=>{let s=iu.getValidationErrors(o);if(s)return Promise.resolve({success:!1,errors:s});let l=this._getValue(o,`data.${r}.sessionId`);return Promise.resolve({success:!0,target:l})})}catch(o){throw qe.UnexpectedError(o.message)}}_extractCustomerRecommendationsPayload(e){let t=this._getValue(e,"data.customerRecommendations.isInPayPalNetwork"),r=this._getValue(e,"data.customerRecommendations.recommendations"),i=new lf(this._getPaymentOptions(r));return new hf(t,i)}_getPaymentOptions(e){return e?this._getValue(e,"paymentOptions").map(r=>{let i=this._getValue(r,"recommendedPriority"),o=this._getValue(r,"paymentOption"),s=pf[o];return new mf(s,i)}):[]}_getValue(e,t){var r=e;let i=t.split(".");for(let s of i.slice(0,i.length-1))r=this._popValue(r,s);let o=i[i.length-1];return this._popValue(r,o)}_popValue(e,t){if(!(t in e))throw qe.UnexpectedError("Couldn't parse response"+t);return e[t]}};su.exports={CustomerSessionGateway:cf(Gn)}});var cu=v((ZC,au)=>{"use strict";var yf=B().Gateway,gf=V().wrapPrototype,$n=class extends yf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}transactions(e){let t=e.transactionIds;return new Promise((r,i)=>{this.gateway.transaction.search(o=>{o.ids().in(t)},(o,s)=>{o?i(o):r(s)})})}};au.exports={DisbursementGateway:gf($n)}});var lu=v((ev,uu)=>{"use strict";var If=q().AttributeSetter,Xn=class extends If{};uu.exports={Discount:Xn}});var hu=v((tv,du)=>{"use strict";var wf=lu().Discount,Af=B().Gateway,Cf=V().wrapPrototype,Hn=class extends Af{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}all(){return this.gateway.http.get(`${this.config.baseMerchantPath()}/discounts`).then(this.createResponseHandler("discount",wf)).then(e=>{if(!e.success)return e;let t=e.discounts;return t.success=e.success,t.discounts=e.discounts,t})}};du.exports={DiscountGateway:Cf(Hn)}});var mu=v((rv,pu)=>{"use strict";var vf=be().AdvancedSearch,Xt=class extends vf{static initClass(){this.textFields("caseNumber","customerId","id","referenceNumber","transactionId"),this.multipleValueField("chargebackProtectionLevel"),this.multipleValueField("protectionLevel"),this.multipleValueField("kind"),this.multipleValueField("merchantAccountId"),this.multipleValueField("preDisputeProgram"),this.multipleValueField("reason"),this.multipleValueField("reasonCode"),this.multipleValueField("status"),this.multipleValueField("transactionSource"),this.rangeFields("amountDisputed","amountWon","disbursementDate","effectiveDate","receivedDate","replyByDate")}};Xt.initClass();pu.exports={DisputeSearch:Xt}});var yu=v((nv,fu)=>{"use strict";var{Readable:bf}=require("stream"),Kn=class extends bf{constructor(e,t){super({objectMode:!0}),t=t||{},this.paginatedResponse=e,this.pageSize=0,this.currentPage=0,this.index=0,this.totalItems=0,this.items=[],this.search=t.search}nextItem(){if(this.currentPage===0||this.index%this.pageSize===0&&this.index<this.totalItems){let e=(t,r,i,o)=>{if(t){this.emit("error",t);return}this.totalItems=r,this.pageSize=i,this.items=o,this.index++,this.push(this.items.shift())};this.currentPage++,this.search?this.paginatedResponse.pagingFunction(this.currentPage,this.search,e):this.paginatedResponse.pagingFunction(this.currentPage,e)}else this.index>=this.totalItems?this.push(null):(this.index++,this.push(this.items.shift()))}ready(){this.readyToStart=!0,this.emit("ready")}_read(){this.readyToStart?this.nextItem():this.on("ready",()=>this.nextItem())}};fu.exports={PaginatedResponseStream:Kn}});var zn=v((iv,gu)=>{"use strict";var Tf=yu().PaginatedResponseStream,Wn=class{constructor(e,t){this.pagingFunction=e,this.stream=new Tf(this,t)}all(e){var t=[];return this.stream.on("data",function(r){return t.push(r)}),this.stream.on("end",function(){return e(null,t)}),this.stream.on("error",function(r){return e(r)}),this.stream.ready()}ready(){return this.stream.ready()}};gu.exports={PaginatedResponse:Wn}});var Au=v((sv,wu)=>{"use strict";var Pf=B().Gateway,Iu=Ge().Dispute,Df=mu().DisputeSearch,Ht=X().InvalidKeysError,_e=X().NotFoundError,Sf=zn().PaginatedResponse,Nf=V().wrapPrototype,Qn=class extends Pf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}accept(e){let t=new _e("dispute with id '"+e+"' not found");return e==null||e.trim()===""?Promise.reject(t):this.gateway.http.put(`${this.config.baseMerchantPath()}/disputes/${e}/accept`).then(this.createResponseHandler("dispute",Iu)).catch(this.createRejectionHandler(t))}addTextEvidence(e,t){let i=t!=null&&typeof t=="object"?t:{content:t},o=new _e("dispute with id '"+e+"' not found");if(e==null||e.trim()==="")return Promise.reject(o);if(i.content==null||i.content.trim()==="")return Promise.reject(new Ht("content cannot be null or empty"));let s={comments:i.content};if(i.sequenceNumber!=null){if(String(i.sequenceNumber)!==String(parseInt(i.sequenceNumber,10)))return Promise.reject(new Ht("sequenceNumber must be a number"));s.sequence_number=parseInt(i.sequenceNumber,10)}if(i.category!=null){if(typeof i.category!="string")return Promise.reject(new Ht("category must be a string"));if(i.category.trim()==="")return Promise.reject(new Ht("category cannot be empty"));s.category=i.category}return this.gateway.http.post(`${this.config.baseMerchantPath()}/disputes/${e}/evidence`,{evidence:s}).then(this.createResponseHandler()).catch(this.createRejectionHandler(o))}addFileEvidence(e,t){let i=t!=null&&typeof t=="object"?t:{documentId:t},o=new _e("dispute with id '"+e+"' not found");if(e==null||e.trim()==="")return Promise.reject(o);if(i.documentId==null||i.documentId.trim()==="")return Promise.reject(new _e("document with id '"+i.documentId+"' not found"));let s={document_upload_id:i.documentId,category:i.category};return this.gateway.http.post(`${this.config.baseMerchantPath()}/disputes/${e}/evidence`,{evidence:s}).then(this.createResponseHandler()).catch(this.createRejectionHandler(o))}finalize(e){let t=new _e(`dispute with id '${e}' not found`);return e==null||e.trim()===""?Promise.reject(t):this.gateway.http.put(`${this.config.baseMerchantPath()}/disputes/${e}/finalize`).then(this.createResponseHandler()).catch(this.createRejectionHandler(t))}find(e){let t=new _e(`dispute with id '${e}' not found`);return e==null||e.trim()===""?Promise.reject(t):this.gateway.http.get(`${this.config.baseMerchantPath()}/disputes/${e}`).then(this.createResponseHandler("dispute",Iu)).catch(this.createRejectionHandler(t))}removeEvidence(e,t){let r=new _e("evidence with id '"+t+"' for dispute with id '"+e+"' not found");return e==null||e.trim()===""||t==null||t.trim()===""?Promise.reject(r):this.gateway.http.delete(`${this.config.baseMerchantPath()}/disputes/${e}/evidence/${t}`).then(this.createResponseHandler()).catch(this.createRejectionHandler(r))}search(e,t){let r=new Df;e(r);let i=new Sf(this.fetchDisputes.bind(this),{search:r.toHash()});return t!=null?i.all(t):(i.ready(),i.stream)}fetchDisputes(e,t,r){return this.gateway.http.post(`${this.config.baseMerchantPath()}/disputes/advanced_search?page=${e}`,{search:t},(i,o)=>{if(i)return r(i);let s=o.disputes.totalItems,l=o.disputes.pageSize,h=o.disputes.dispute;return h?Array.isArray(h)||(h=[h]):h=[null],r(null,s,l,h)})}createRejectionHandler(e){return function(t){return t.type==="notFoundError"&&(t=e),Promise.reject(t)}}};wu.exports={DisputeGateway:Nf(Qn,{ignoreMethods:["search","fetchDisputes"]})}});var vu=v((ov,Cu)=>{"use strict";var Ef=q().AttributeSetter,Kt=class extends Ef{static initClass(){this.Kind={EvidenceDocument:"evidence_document"}}};Kt.initClass();Cu.exports={DocumentUpload:Kt}});var Tu=v((av,bu)=>{"use strict";var _f=vu().DocumentUpload,Mf=B().Gateway,xf=X().InvalidKeysError,Of=require("stream").Readable,Ff=J().Util,qf=V().wrapPrototype,Yn=class extends Mf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){if(!e.file||!(e.file instanceof Of))return Promise.reject(new xf("file must be a Readable stream"));let t={file:{path:e.file.path},kind:e.kind},r=Ff.verifyKeys(this._createSignature(),t);return r?Promise.reject(r):this.gateway.http.postMultipart(`${this.config.baseMerchantPath()}/document_uploads`,{"document_upload[kind]":t.kind},t.file).then(this.createResponseHandler("documentUpload",_f))}_createSignature(){return{valid:["kind","file[path]"]}}};bu.exports={DocumentUploadGateway:qf(Yn)}});var Du=v((cv,Pu)=>{"use strict";var kf=q().AttributeSetter,Jn=class extends kf{constructor(e){super(e)}};Pu.exports={MonetaryAmount:Jn}});var Eu=v((uv,Nu)=>{"use strict";var Rf=q().AttributeSetter,Su=Du().MonetaryAmount,Zn=class extends Rf{constructor(e){super(e),e.baseAmount&&(this.baseAmount=new Su(e.baseAmount)),e.quoteAmount&&(this.quoteAmount=new Su(e.quoteAmount))}};Nu.exports={ExchangeRateQuote:Zn}});var Mu=v((lv,_u)=>{"use strict";var Lf=q().AttributeSetter,Uf=Eu().ExchangeRateQuote,ei=class extends Lf{constructor(e){super(e),e.quotes&&(this.quotes=e.quotes.map(t=>new Uf(t)))}};_u.exports={ExchangeRateQuotePayload:ei}});var Ou=v((dv,xu)=>{"use strict";var Vf=B().Gateway,jf=V().wrapPrototype,Bf=Dt().GraphQLClient,Gf=J().Util,$f=Mu().ExchangeRateQuotePayload,ti=class extends Vf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}generate(e){let t=Gf.verifyKeys(this._generateSignature(),e);if(t)return Promise.reject(t,null);let r=`mutation ($exchangeRateQuoteRequest: GenerateExchangeRateQuoteInput!) {
        generateExchangeRateQuote(input: $exchangeRateQuoteRequest) {
          quotes {
            id
            baseAmount {value, currencyCode}
            quoteAmount {value, currencyCode}
            exchangeRate
            tradeRate
            expiresAt
            refreshesAt
          }
        }
      }`,i=new Bf(this.config),o={exchangeRateQuoteRequest:e};return i.query(r,o).then(s=>(s&&!s.errors&&(s.success=!0,s.exchangeRateQuotePayload=new $f(s.data.generateExchangeRateQuote)),s))}_generateSignature(){return{valid:["quotes[baseCurrency]","quotes[quoteCurrency]","quotes[baseAmount]","quotes[markup]"]}}};xu.exports={ExchangeRateQuoteGateway:jf(ti)}});var Ye=v((hv,Fu)=>{"use strict";var Xf=q().AttributeSetter,Wt=class n extends Xf{static initClass(){this.Status={Pending:"pending",Active:"active",Suspended:"suspended"},this.FundingDestination={Bank:"bank",Email:"email",MobilePhone:"mobile_phone"}}constructor(e){super(e),e.masterMerchantAccount&&(this.masterMerchantAccount=new n(e.masterMerchantAccount))}};Wt.initClass();Fu.exports={MerchantAccount:Wt}});var ku=v((pv,qu)=>{"use strict";var Hf=B().Gateway,ri=Ye().MerchantAccount,Kf=zn().PaginatedResponse,Wf=X(),zf=V().wrapPrototype,ni=class extends Hf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){return this.gateway.http.post(`${this.config.baseMerchantPath()}/merchant_accounts/create_via_api`,{merchantAccount:e}).then(this.responseHandler())}update(e,t){return this.gateway.http.put(`${this.config.baseMerchantPath()}/merchant_accounts/${e}/update_via_api`,{merchantAccount:t}).then(this.responseHandler())}find(e){return e.trim()===""?Promise.reject(Wf.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/merchant_accounts/${e}`).then(function(t){return new ri(t.merchantAccount)})}responseHandler(){return this.createResponseHandler("merchantAccount",ri)}all(e){let t=new Kf(this.fetchMerchantAccounts.bind(this));return e!=null?t.all(e):(t.ready(),t.stream)}fetchMerchantAccounts(e,t){return this.gateway.http.get(this.config.baseMerchantPath()+"/merchant_accounts?page="+e,(r,i)=>{let o,s,l,h,f;return r?t(r):(o=i.merchantAccounts,h=i.merchantAccounts,f=h.totalItems,l=h.pageSize,s=o.merchantAccount,Array.isArray(s)||(s=[s]),t(null,f,l,s))})}createForCurrency(e){return this.gateway.http.post(this.config.baseMerchantPath()+"/merchant_accounts/create_for_currency",{merchantAccount:e}).then(this.createForCurrencyResponseHandler())}createForCurrencyResponseHandler(){let e=this.createResponseHandler(null,null);return function(t){return e(t).then(r=>(r.success&&(r.merchantAccount=new ri(r.response.merchantAccount),delete r.response),r))}}};qu.exports={MerchantAccountGateway:zf(ni,{ignoreMethods:["all","fetchMerchantAccounts"]})}});var Lu=v((mv,Ru)=>{"use strict";var Qf=q().AttributeSetter,Yf=Ye().MerchantAccount,ii=class extends Qf{constructor(e){super(e),e.merchantAccounts&&(this.merchantAccounts=e.merchantAccounts.map(t=>new Yf(t)))}};Ru.exports={Merchant:ii}});var oi=v((fv,Uu)=>{"use strict";var Jf=q().AttributeSetter,si=class extends Jf{constructor(e){super(e)}};Uu.exports={OAuthCredentials:si}});var ju=v((yv,Vu)=>{"use strict";var Zf=B().Gateway,ey=Lu().Merchant,ty=oi().OAuthCredentials,ry=V().wrapPrototype,ai=class extends Zf{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){return this.gateway.http.post("/merchants/create_via_api",{merchant:e}).then(this.responseHandler())}responseHandler(){let e=this.createResponseHandler(null,null);return function(t){return e(t).then(r=>(r.success&&(r.merchant=new ey(r.response.merchant),r.credentials=new ty(r.response.credentials),delete r.response),r))}}};Vu.exports={MerchantGateway:ry(ai)}});var Gu=v((gv,Bu)=>{"use strict";var ny=B().Gateway,iy=oi().OAuthCredentials,sy=q().AttributeSetter,oy=J().Util,ay=V().wrapPrototype,ci=class extends ny{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}createTokenFromCode(e){return e.grantType="authorization_code",this.gateway.http.post("/oauth/access_tokens",e).then(this.responseHandler())}createTokenFromRefreshToken(e){return e.grantType="refresh_token",this.gateway.http.post("/oauth/access_tokens",e).then(this.responseHandler())}revokeAccessToken(e){return this.gateway.http.post("/oauth/revoke_access_token",{token:e}).then(this.createResponseHandler("result",sy))}responseHandler(){return this.createResponseHandler("credentials",iy)}connectUrl(e){let t=Object.assign({clientId:this.config.clientId},e);return this.config.baseUrl()+"/oauth/connect?"+this.buildQuery(t)}buildQuery(e){e=oy.convertObjectKeysToUnderscores(e);let t=this.buildSubQuery("user",e.user);return t.push.apply(t,this.buildSubQuery("business",e.business)),t.push.apply(t,this.buildSubArrayQuery("payment_methods",e.payment_methods)),delete e.user,delete e.business,delete e.payment_methods,t.push.apply(t,(()=>{let i=[];for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];i.push([o,s])}return i})()),t.map(i=>{let o=i[0],s=i[1];return`${this._encodeValue(o)}=${this._encodeValue(s)}`}).join("&")}buildSubQuery(e,t){let r=[];for(let i in t){if(!t.hasOwnProperty(i))continue;let o=t[i];r.push([`${e}[${i}]`,o])}return r}_encodeValue(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}buildSubArrayQuery(e,t){return(t||[]).map(r=>[`${e}[]`,r])}};Bu.exports={OAuthGateway:ay(ci)}});var Xu=v((Iv,$u)=>{"use strict";var cy=q().AttributeSetter,ui=class extends cy{constructor(e){let t=(()=>{let r=[];for(let i of Object.keys(e))r.push(i);return r})()[0];typeof e[t]=="object"&&(e[t].imageUrl="https://assets.braintreegateway.com/payment_method_logo/unknown.png"),super(e[t])}};$u.exports={UnknownPaymentMethod:ui}});var Ku=v((wv,Hu)=>{"use strict";var li=class{constructor(e){let t=["bankReferenceToken","correlationId","ibanLastChars","mandateType","merchantOrPartnerCustomerId"];for(let r in e)t.includes(r)&&(this[r]=e[r])}};Hu.exports={SepaDirectDebitNonceDetails:li}});var ke=v((Av,Wu)=>{"use strict";var uy=q().AttributeSetter,ly=St().ThreeDSecureInfo,dy=Ku().SepaDirectDebitNonceDetails,di=class extends uy{constructor(e){super(e),e.threeDSecureInfo?this.threeDSecureInfo=new ly(e.threeDSecureInfo):e.bankReferenceToken&&e.ibanLastChars&&(this.sepaDirectDebitNonceDetails=new dy(e))}};Wu.exports={PaymentMethodNonce:di}});var zt=v((Cv,zu)=>{"use strict";var hy=Oe().ApplePayCard,py=Fe().AndroidPayCard,my=fe().CreditCard,fy=Ne().PayPalAccount,yy=Xu().UnknownPaymentMethod,gy=ke().PaymentMethodNonce,Iy=Xe().UsBankAccount,wy=Gt().VenmoAccount,Ay=xt().VisaCheckoutCard,Cy=Ot().SamsungPayCard,vy=Qe().SepaDirectDebitAccount,hi=class{static parsePaymentMethod(e){return e.creditCard?new my(e.creditCard):e.paypalAccount?new fy(e.paypalAccount):e.applePayCard?new hy(e.applePayCard):e.androidPayCard?new py(e.androidPayCard):e.paymentMethodNonce?new gy(e.paymentMethodNonce):e.usBankAccount?new Iy(e.usBankAccount):e.venmoAccount?new wy(e.venmoAccount):e.visaCheckoutCard?new Ay(e.visaCheckoutCard):e.samsungPayCard?(console.warn("[DEPRECATED] `SamsungPayCard` is deprecated and no longer a supported payment method type"),new Cy(e.samsungPayCard)):e.sepaDebitAccount?new vy(e.sepaDebitAccount):new yy(e)}};zu.exports={PaymentMethodParser:hi}});var pi=v(Ie=>{Ie.is=Re;Ie.isNull=Ny;Ie.isUndefined=Ey;Ie.isString=Py;Ie.isNumber=Dy;Ie.isBoolean=Sy;Ie.isArray=by;Ie.isObject=Ty;function Re(n,e){return Object.prototype.toString.call(e)==="[object "+n+"]"}function by(n){return Re("Array",n)}function Ty(n){return Re("Object",n)}function Py(n){return Re("String",n)}function Dy(n){return Re("Number",n)}function Sy(n){return Re("Boolean",n)}function Ny(n){return typeof n=="object"&&!n}function Ey(n){return typeof n>"u"}});var Ju=v(Yu=>{var bv=require("util"),Qt=pi();Yu.parse=_y;function _y(n,e,t,r){return n.split(e||"&").map(xy(t||"=",r||My)).reduce(Qu,{})}function My(n){return decodeURIComponent(n.replace(/\+/g," "))}function xy(n,e){return function t(r,i){if(arguments.length!==2)return r=r.split(n),t(e(r.shift()),e(r.join(n)));if(r=r.replace(/^\s+|\s+$/g,""),Qt.isString(i)&&(i=i.replace(/^\s+|\s+$/g,""),!isNaN(i))){var o=+i;i===o.toString(10)&&(i=o)}var s=/(.*)\[([^\]]*)\]$/.exec(r);if(!s){var f={};return r&&(f[r]=i),f}var l=s[2],h=s[1];if(!l)return t(h,[i]);var f={};return f[l]=i,t(h,f)}}function Qu(n,e){var t;return n?Qt.isArray(n)?t=n.concat(e):!Qt.isObject(n)||!Qt.isObject(e)?t=[n].concat(e):t=Oy(n,e):t=e,t}function Oy(n,e){for(var t in e)t&&e.hasOwnProperty(t)&&(n[t]=Qu(n[t],e[t]));return n}});var el=v(Zu=>{var Le=pi();Zu.stringify=mi;var Yt=[];function mi(n,e,t,r,i){if(e=e||"&",t=t||"=",i=i||encodeURIComponent,Le.isNull(n)||Le.isUndefined(n)||typeof n=="function")return r?i(r)+t:"";if(Le.isBoolean(n)&&(n=+n),Le.isNumber(n)||Le.isString(n))return i(r)+t+i(n);if(Le.isArray(n)){var l=[];r=r+"[]";for(var o=0,s=n.length;o<s;o++)l.push(mi(n[o],e,t,r,i));return l.join(e)}for(var o=Yt.length-1;o>=0;--o)if(Yt[o]===n)throw new Error("querystring_stringify. Cyclical reference");Yt.push(n);var l=[],h=r?r+"[":"",f=r?"]":"";for(var o in n)if(n.hasOwnProperty(o)){var b=h+o+f;l.push(mi(n[o],e,t,b,i))}return Yt.pop(),l=l.join(e),!l&&r?r+"=":l}});var rl=v(tl=>{[Ju(),el()].forEach(function(n){for(var e in n)n.hasOwnProperty(e)&&(tl[e]=n[e])})});var ol=v((Sv,sl)=>{"use strict";var Fy=B().Gateway,qy=Oe().ApplePayCard,ky=Fe().AndroidPayCard,Ry=fe().CreditCard,nl=zt().PaymentMethodParser,Ly=Ne().PayPalAccount,il=ke().PaymentMethodNonce,Uy=Qe().SepaDirectDebitAccount,fi=J().Util,Jt=X(),Vy=rl(),jy=V().wrapPrototype,yi=class extends Fy{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}responseHandler(){let e={paypalAccount:Ly,sepaDirectDebitAccount:Uy,creditCard:Ry,applePayCard:qy,androidPayCard:ky,paymentMethodNonce:il},t=this.createResponseHandler(e,null);return function(r){return t(r).then(function(i){let o=nl.parsePaymentMethod(i);return o instanceof il?i.paymentMethodNonce=o:i.paymentMethod=o,i})}}create(e){return this._checkForDeprecatedAttributes(e),this.gateway.http.post(`${this.config.baseMerchantPath()}/payment_methods`,{paymentMethod:e}).then(this.responseHandler())}find(e){return e.trim()===""?Promise.reject(Jt.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_methods/any/${e}`).then(t=>nl.parsePaymentMethod(t))}update(e,t){return e.trim()===""?Promise.reject(Jt.NotFoundError("Not Found"),null):(this._checkForDeprecatedAttributes(t),this.gateway.http.put(`${this.config.baseMerchantPath()}/payment_methods/any/${e}`,{paymentMethod:t}).then(this.responseHandler()))}grant(e,t){if(e.trim()==="")return Promise.reject(Jt.NotFoundError("Not Found"),null);let r={sharedPaymentMethodToken:e};return typeof t=="boolean"&&(t={allow_vaulting:t}),r=fi.merge(r,t),this.gateway.http.post(`${this.config.baseMerchantPath()}/payment_methods/grant`,{payment_method:r}).then(this.responseHandler())}revoke(e){return e.trim()===""?Promise.reject(Jt.NotFoundError("Not Found"),null):this.gateway.http.post(`${this.config.baseMerchantPath()}/payment_methods/revoke`,{payment_method:{sharedPaymentMethodToken:e}}).then(this.responseHandler())}delete(e,t){let r,i;return typeof t=="function"&&(t=null),i=fi.verifyKeys(this._deleteSignature(),t),i?Promise.reject(i):(r=t!=null?"?"+Vy.stringify(fi.convertObjectKeysToUnderscores(t)):"",this.gateway.http.delete(this.config.baseMerchantPath()+"/payment_methods/any/"+e+r))}_deleteSignature(){return{valid:["revokeAllGrants"]}}_checkForDeprecatedAttributes(e){e.deviceSessionId!=null&&console.warn("[DEPRECATED] `deviceSessionId` is a deprecated param for PaymentMethod objects. Use `deviceData` instead"),e.fraudMerchantId!=null&&console.warn("[DEPRECATED] `fraudMerchantId` is a deprecated param for PaymentMethod objects. Use `deviceData` instead")}};sl.exports={PaymentMethodGateway:jy(yi)}});var cl=v((Nv,al)=>{"use strict";var By=B().Gateway,Gy=J().Util,gi=ke().PaymentMethodNonce,$y=V().wrapPrototype,Ii=class extends By{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}responseHandler(){let e=this.createResponseHandler("payment_method_nonce",gi);return function(t){return e(t).then(r=>(r.paymentMethodNonce=new gi(r.paymentMethodNonce),r))}}create(e,t){let r={valid:["paymentMethodNonce[merchantAccountId]","paymentMethodNonce[authenticationInsight]","paymentMethodNonce[authenticationInsightOptions][amount]","paymentMethodNonce[authenticationInsightOptions][recurringCustomerConsent]","paymentMethodNonce[authenticationInsightOptions][recurringMaxAmount]"]},i=Gy.verifyKeys(r,t);return i?Promise.reject(i):this.gateway.http.post(`${this.config.baseMerchantPath()}/payment_methods/${e}/nonces`,t).then(this.responseHandler())}find(e){return this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_method_nonces/${e}`).then(t=>new gi(t.paymentMethodNonce))}};al.exports={PaymentMethodNonceGateway:$y(Ii)}});var dl=v((Ev,ll)=>{"use strict";var Xy=B().Gateway,ul=Ne().PayPalAccount,Hy=X(),Ky=V().wrapPrototype,wi=class extends Xy{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}find(e){return e.trim()===""?Promise.reject(Hy.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_methods/paypal_account/${e}`).then(t=>new ul(t.paypalAccount))}update(e,t){return this.gateway.http.put(`${this.config.baseMerchantPath()}/payment_methods/paypal_account/${e}`,{paypalAccount:t}).then(this.responseHandler())}delete(e){let t=`${this.config.baseMerchantPath()}/payment_methods/paypal_account/${e}`;return this.gateway.http.delete(t)}responseHandler(){return this.createResponseHandler("paypalAccount",ul)}};ll.exports={PayPalAccountGateway:Ky(wi)}});var pl=v((_v,hl)=>{"use strict";var Wy=B().Gateway,zy=J().Util,Qy=ke().PaymentMethodNonce,Yy=V().wrapPrototype,Ai=class extends Wy{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}update(e){let t=zy.verifyKeys(this._updateSignature(),e);return t?Promise.reject(t):this.gateway.http.put(`${this.config.baseMerchantPath()}/paypal/payment_resource`,{paypalPaymentResource:e}).then(this.responseHandler())}responseHandler(){return this.createResponseHandler("payment_method_nonce",Qy)}_updateSignature(){return{valid:["amount","amountBreakdown[discount]","amountBreakdown[handling]","amountBreakdown[insurance]","amountBreakdown[itemTotal]","amountBreakdown[shipping]","amountBreakdown[shippingDiscount]","amountBreakdown[taxTotal]","currencyIsoCode","customField","description","lineItems[commodityCode]","lineItems[description]","lineItems[discountAmount]","lineItems[imageUrl]","lineItems[itemType]","lineItems[kind]","lineItems[name]","lineItems[productCode]","lineItems[quantity]","lineItems[taxAmount]","lineItems[totalAmount]","lineItems[unitAmount]","lineItems[unitOfMeasure]","lineItems[unitTaxAmount]","lineItems[upcCode]","lineItems[upcType]","lineItems[url]","orderId","payeeEmail","paymentMethodNonce","shipping[company]","shipping[countryCodeAlpha2]","shipping[countryCodeAlpha3]","shipping[countryCodeNumeric]","shipping[countryName]","shipping[extendedAddress]","shipping[firstName]","shipping[internationalPhone][countryCode]","shipping[internationalPhone][nationalNumber]","shipping[lastName]","shipping[locality]","shipping[phoneNumber]","shipping[postalCode]","shipping[region]","shipping[streetAddress]","shippingOptions[amount]","shippingOptions[id]","shippingOptions[label]","shippingOptions[selected]","shippingOptions[type]"]}}};hl.exports={PayPalPaymentResourceGateway:Yy(Ai)}});var vi=v((Mv,ml)=>{"use strict";var Jy=q().AttributeSetter,Ci=class extends Jy{};ml.exports={Plan:Ci}});var yl=v((xv,fl)=>{"use strict";var Zy=B().Gateway,bi=vi().Plan,eg=V().wrapPrototype,tg=X(),Ti=class extends Zy{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}all(){return this.gateway.http.get(`${this.config.baseMerchantPath()}/plans`).then(this.createResponseHandler("plan",bi)).then(e=>{if(!e.success)return e;let t=e.plans;return t.success=e.success,t.plans=e.plans,t})}create(e){return this.gateway.http.post(`${this.config.baseMerchantPath()}/plans`,{plan:e}).then(this.responseHandler())}find(e){return e.trim()===""?Promise.reject(tg.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/plans/${e}`).then(t=>new bi(t.plan,this.gateway))}update(e,t){return this.gateway.http.put(`${this.config.baseMerchantPath()}/plans/${e}`,{plan:t}).then(this.responseHandler())}responseHandler(){return this.createResponseHandler("plan",bi)}};fl.exports={PlanGateway:eg(Ti)}});var wl=v((Ov,Il)=>{"use strict";var rg=B().Gateway,gl=Qe().SepaDirectDebitAccount,ng=X(),ig=V().wrapPrototype,Pi=class extends rg{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}find(e){return e.trim()===""?Promise.reject(ng.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_methods/sepa_debit_account/${e}`).then(t=>new gl(t.sepaDebitAccount))}delete(e){let t=`${this.config.baseMerchantPath()}/payment_methods/sepa_debit_account/${e}`;return this.gateway.http.delete(t)}responseHandler(){return this.createResponseHandler("sepa_direct_debitAccount",gl)}};Il.exports={SepaDirectDebitAccountGateway:ig(Pi)}});var Cl=v((Fv,Al)=>{"use strict";var sg=q().AttributeSetter,Di=class extends sg{};Al.exports={SettlementBatchSummary:Di}});var bl=v((qv,vl)=>{"use strict";var og=B().Gateway,ag=J().Util,cg=Cl().SettlementBatchSummary,ug=V().wrapPrototype,Si=class extends og{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}generate(e){return this.gateway.http.post(`${this.config.baseMerchantPath()}/settlement_batch_summary`,{settlementBatchSummary:e}).then(this.responseHandler(e))}responseHandler(e){let t=this.createResponseHandler("settlementBatchSummary",cg);return r=>t(r).then(i=>this.underscoreCustomField(e,i))}underscoreCustomField(e,t){if(t.success&&"groupByCustomField"in e){if(e.groupByCustomField.indexOf("_")===-1)return t;let r=ag.toCamelCase(e.groupByCustomField);for(let i of t.settlementBatchSummary.records)i[e.groupByCustomField]=i[r],delete i[r]}return t}};vl.exports={SettlementBatchSummaryGateway:ug(Si)}});var Je=v((kv,Tl)=>{"use strict";var lg=q().AttributeSetter,dg=ye().Transaction,Zt=class extends lg{static initClass(){this.Source={Api:"api",ControlPanel:"control_panel",Recurring:"recurring"},this.Status={Active:"Active",Canceled:"Canceled",Expired:"Expired",PastDue:"Past Due",Pending:"Pending",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}}}constructor(e,t){super(e,t),this.transactions=e.transactions.map(r=>new dg(r,t))}};Zt.initClass();Tl.exports={Subscription:Zt}});var Dl=v((Rv,Pl)=>{"use strict";var hg=be().AdvancedSearch,pg=Je().Subscription,er=class extends hg{static initClass(){this.multipleValueField("inTrialPeriod"),this.multipleValueField("ids"),this.textFields("id","transactionId"),this.multipleValueOrTextField("planId"),this.multipleValueField("status",{allows:pg.Status.All()}),this.multipleValueField("merchantAccountId"),this.rangeFields("price","daysPastDue","billingCyclesRemaining","nextBillingDate","createdAt")}};er.initClass();Pl.exports={SubscriptionSearch:er}});var Nl=v((Lv,Sl)=>{"use strict";var mg=be().AdvancedSearch,tr=ye().Transaction,rr=fe().CreditCard,nr=class extends mg{static initClass(){this.textFields("billingCompany","billingCountryName","billingExtendedAddress","billingFirstName","billingLastName","billingLocality","billingPostalCode","billingRegion","billingStreetAddress","creditCardCardholderName","creditCardUniqueIdentifier","currency","customerCompany","customerEmail","customerFax","customerFirstName","customerId","customerLastName","customerPhone","customerWebsite","id","orderId","paymentMethodToken","paypalPayerEmail","paypalPaymentId","paypalAuthorizationId","processorAuthorizationCode","sepaDebitPaypalV2_OrderId","settlementBatchId","shippingCompany","shippingCountryName","shippingExtendedAddress","shippingFirstName","shippingLastName","shippingLocality","shippingPostalCode","shippingRegion","shippingStreetAddress","storeId"),this.equalityFields("creditCardExpirationDate"),this.partialMatchFields("creditCardNumber"),this.multipleValueField("createdUsing",{allows:[tr.CreatedUsing.FullInformation,tr.CreatedUsing.Token]}),this.multipleValueField("creditCardCardType",{allows:rr.CardType.All()}),this.multipleValueField("creditCardCustomerLocation",{allows:[rr.CustomerLocation.International,rr.CustomerLocation.US]}),this.multipleValueField("debitNetwork",{allows:rr.DebitNetwork.All()}),this.multipleValueField("ids"),this.multipleValueField("merchantAccountId"),this.multipleValueField("paymentInstrumentType"),this.multipleValueField("reasonCode"),this.multipleValueField("source"),this.multipleValueField("status",{allows:tr.Status.All()}),this.multipleValueField("storeIds"),this.multipleValueField("type",{allows:tr.Type.All()}),this.multipleValueField("user"),this.keyValueFields("refund"),this.rangeFields("amount","authorizationExpiredAt","authorizedAt","createdAt","disbursementDate","disputeDate","failedAt","gatewayRejectedAt","processorDeclinedAt","settledAt","submittedForSettlementAt","voidedAt","achReturnResponsesCreatedAt")}};nr.initClass();Sl.exports={TransactionSearch:nr}});var ir=v((Uv,_l)=>{"use strict";var El=xn().AddressGateway,fg=B().Gateway,Ni=ye().Transaction,yg=Nl().TransactionSearch,Ze=J().Util,gg=X(),Ig=V().wrapPrototype,Ei=class extends fg{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}adjustAuthorization(e,t){return this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/adjust_authorization`,{transaction:{amount:t}}).then(this.responseHandler())}cancelRelease(e){let t=`${this.config.baseMerchantPath()}/transactions/${e}/cancel_release`,r={};return this.gateway.http.put(t,r).then(this.responseHandler())}cloneTransaction(e,t){return this.gateway.http.post(`${this.config.baseMerchantPath()}/transactions/${e}/clone`,{transactionClone:t}).then(this.responseHandler())}create(e){return this.gateway.http.post(`${this.config.baseMerchantPath()}/transactions`,{transaction:e}).then(this.responseHandler())}credit(e){return e.type="credit",this.create(e)}find(e){return e.trim()===""?Promise.reject(gg.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/transactions/${e}`).then(t=>new Ni(t.transaction,this.gateway))}holdInEscrow(e){return this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/hold_in_escrow`,{}).then(this.responseHandler())}refund(e,t){return typeof t=="function"?t={}:typeof t!="object"&&(t={amount:t}),this.gateway.http.post(`${this.config.baseMerchantPath()}/transactions/${e}/refund`,{transaction:t}).then(this.responseHandler())}responseHandler(){return this.createResponseHandler("transaction",Ni)}sale(e){let t;return this._checkForDeprecatedAttributes(e),e.type="sale",t=Ze.verifyKeys(this._createSignature(),e),t?Promise.reject(t,null):this.create(e)}search(e,t){let r=new yg;return e(r),this.createSearchResponse(`${this.config.baseMerchantPath()}/transactions/advanced_search_ids`,r,this.pagingFunctionGenerator(r),t)}releaseFromEscrow(e){return this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/release_from_escrow`,{}).then(this.responseHandler())}submitForSettlement(e,t,r){let i;return r=r||{},i=Ze.verifyKeys(this._submitForSettlementSignature(),r),i?Promise.reject(i,null):this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/submit_for_settlement`,{transaction:Object.assign({amount:t},r)}).then(this.responseHandler())}updateDetails(e,t){let r=Ze.verifyKeys(this._updateDetailsSignature(),t);return r?Promise.reject(r,null):this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/update_details`,{transaction:t}).then(this.responseHandler())}packageTracking(e,t){let r=Ze.verifyKeys(this._packageTrackingSignature(),t);return r?Promise.reject(r,null):this.gateway.http.post(`${this.config.baseMerchantPath()}/transactions/${e}/shipments`,{shipment:t}).then(this.responseHandler())}submitForPartialSettlement(e,t,r){let i;return r=r||{},i=Ze.verifyKeys(this._submitForPartialSettlementSignature(),r),i?Promise.reject(i,null):this.gateway.http.post(`${this.config.baseMerchantPath()}/transactions/${e}/submit_for_partial_settlement`,{transaction:Object.assign({amount:t},r)}).then(this.responseHandler())}void(e){return this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/void`,null).then(this.responseHandler())}pagingFunctionGenerator(e){return super.pagingFunctionGenerator(e,"transactions/advanced_search",Ni,"creditCardTransactions",t=>t.creditCardTransactions.transaction)}_submitForSettlementSignature(){return{valid:["descriptor[name]","descriptor[phone]","descriptor[url]","discountAmount","industry","industry[data]","industry[data][additionalCharges][amount]","industry[data][additionalCharges][kind]","industry[data][advancedDeposit]","industry[data][arrivalDate]","industry[data][checkInDate]","industry[data][checkOutDate]","industry[data][countryCode]","industry[data][customerCode]","industry[data][dateOfBirth]","industry[data][departureDate]","industry[data][fareAmount]","industry[data][feeAmount]","industry[data][fireSafe]","industry[data][folioNumber]","industry[data][issuedDate]","industry[data][issuingCarrierCode]","industry[data][legs][arrivalAirportCode]","industry[data][legs][arrivalTime]","industry[data][legs][carrierCode]","industry[data][legs][conjunctionTicket]","industry[data][legs][couponNumber]","industry[data][legs][departureAirportCode]","industry[data][legs][departureDate]","industry[data][legs][departureTime]","industry[data][legs][endorsementOrRestrictions]","industry[data][legs][exchangeTicket]","industry[data][legs][fareAmount]","industry[data][legs][fareBasisCode]","industry[data][legs][feeAmount]","industry[data][legs][flightNumber]","industry[data][legs][serviceClass]","industry[data][legs][stopoverPermitted]","industry[data][legs][taxAmount]","industry[data][lodgingCheckInDate]","industry[data][lodgingCheckOutDate]","industry[data][lodgingName]","industry[data][noShow]","industry[data][passengerFirstName]","industry[data][passengerLastName]","industry[data][passengerMiddleInitial]","industry[data][passengerTitle]","industry[data][propertyPhone]","industry[data][restrictedTicket]","industry[data][roomRate]","industry[data][roomTax]","industry[data][taxAmount]","industry[data][ticketIssuerAddress]","industry[data][ticketNumber]","industry[data][travelAgencyName]","industry[data][travelAgencyCode]","industry[data][travelPackage]","industry[industryType]","lineItems[commodityCode]","lineItems[description]","lineItems[discountAmount]","lineItems[imageUrl]","lineItems[itemType]","lineItems[kind]","lineItems[name]","lineItems[productCode]","lineItems[quantity]","lineItems[taxAmount]","lineItems[totalAmount]","lineItems[unitAmount]","lineItems[unitOfMeasure]","lineItems[unitTaxAmount]","lineItems[upcCode]","lineItems[upcType]","lineItems[url]","orderId","purchaseOrderNumber","shipping[company]","shipping[countryCodeAlpha2]","shipping[countryCodeAlpha3]","shipping[countryCodeNumeric]","shipping[countryName]","shipping[extendedAddress]","shipping[firstName]","shipping[internationalPhone][countryCode]","shipping[internationalPhone][nationalNumber]","shipping[lastName]","shipping[locality]","shipping[phoneNumber]","shipping[postalCode]","shipping[region]","shipping[streetAddress]","shippingAddressId","shippingAmount","shippingTaxAmount","shipsFromPostalCode","taxAmount","taxExempt"]}}_submitForPartialSettlementSignature(){let e=this._submitForSettlementSignature();return e.valid.push("finalCapture"),e}_updateDetailsSignature(){return{valid:["amount","orderId","descriptor[name]","descriptor[phone]","descriptor[url]"]}}_packageTrackingSignature(){return{valid:["carrier","lineItems[commodityCode]","lineItems[description]","lineItems[discountAmount]","lineItems[imageUrl]","lineItems[kind]","lineItems[name]","lineItems[productCode]","lineItems[quantity]","lineItems[taxAmount]","lineItems[totalAmount]","lineItems[unitAmount]","lineItems[unitOfMeasure]","lineItems[unitTaxAmount]","lineItems[upcCode]","lineItems[upcType]","lineItems[url]","notifyPayer","trackingNumber"]}}_createSignature(){let e=["amount","customerId","exchangeRateQuoteId","merchantAccountId","orderId","channel","paymentMethodToken","purchaseOrderNumber","recurring","transactionSource","shippingAddressId","type","taxAmount","taxExempt","venmoSdkPaymentMethodCode","deviceSessionId","serviceFeeAmount","deviceData","fraudMerchantId","billingAddressId","paymentMethodNonce","paymentMethodToken","acquirerReferenceNumber","threeDSecureToken","threeDSecureAuthenticationId","sharedPaymentMethodToken","sharedPaymentMethodNonce","sharedBillingAddressId","sharedCustomerId","sharedShippingAddressId","riskData","riskData[customerBrowser]","riskData[customerDeviceId]","riskData[customerIp]","riskData[customerLocationZip]","riskData[customerTenure]","creditCard","creditCard[token]","creditCard[cardholderName]","creditCard[cvv]","creditCard[expirationDate]","creditCard[expirationMonth]","creditCard[expirationYear]","creditCard[networkTokenizationAttributes][cryptogram]","creditCard[networkTokenizationAttributes][ecommerceIndicator]","creditCard[networkTokenizationAttributes][tokenRequestorId]","creditCard[number]","creditCard[paymentReaderCardDetails][encryptedCardData]","creditCard[paymentReaderCardDetails][keySerialNumber]","customer","customer[id]","customer[company]","customer[email]","customer[fax]","customer[firstName]","customer[lastName]","customer[phone]","customer[website]","threeDSecurePassThru","threeDSecurePassThru[eciFlag]","threeDSecurePassThru[cavv]","threeDSecurePassThru[xid]","threeDSecurePassThru[threeDSecureVersion]","threeDSecurePassThru[authenticationResponse]","threeDSecurePassThru[directoryResponse]","threeDSecurePassThru[cavvAlgorithm]","threeDSecurePassThru[dsTransactionId]","options","options[addBillingAddressToPaymentMethod]","options[amexRewards]","options[amexRewards][currencyAmount]","options[amexRewards][currencyIsoCode]","options[amexRewards][requestId]","options[amexRewards][points]","options[credit_card][accountType]","options[credit_card][processDebitAsCredit]","options[holdInEscrow]","options[payeeId]","options[payeeEmail]","options[paypal]","options[paypal][customField]","options[paypal][payeeId]","options[paypal][payeeEmail]","options[paypal][description]","options[paypal][recipientEmail]","options[paypal][recipientPhone][countryCode]","options[paypal][recipientPhone][nationalNumber]","options[processingOverrides]","options[processingOverrides][customerEmail]","options[processingOverrides][customerFirstName]","options[processingOverrides][customerLastName]","options[processingOverrides][customerTaxIdentifier]","options[skipAdvancedFraudChecking]","options[skipAvs]","options[skipCvv]","options[storeInVault]","options[storeInVaultOnSuccess]","options[storeShippingAddressInVault]","options[submitForSettlement]","options[threeDSecure]","options[threeDSecure][required]","options[venmo]","options[venmo][profileId]","options[venmoSdkSession]","descriptor","descriptor[name]","descriptor[phone]","descriptor[url]","paypalAccount","paypalAccount[email]","paypalAccount[token]","paypalAccount[paypalData]","paypalAccount[payeeId]","paypalAccount[payeeEmail]","paypalAccount[payerId]","paypalAccount[paymentId]","productSku","industry","industry[data]","industry[data][additionalCharges][kind]","industry[data][additionalCharges][amount]","industry[data][advancedDeposit]","industry[data][arrivalDate]","industry[data][checkInDate]","industry[data][checkOutDate]","industry[data][countryCode]","industry[data][customerCode]","industry[data][dateOfBirth]","industry[data][departureDate]","industry[data][fareAmount]","industry[data][feeAmount]","industry[data][fireSafe]","industry[data][folioNumber]","industry[data][issuedDate]","industry[data][issuingCarrierCode]","industry[data][legs][arrivalAirportCode]","industry[data][legs][arrivalTime]","industry[data][legs][carrierCode]","industry[data][legs][conjunctionTicket]","industry[data][legs][couponNumber]","industry[data][legs][departureAirportCode]","industry[data][legs][departureDate]","industry[data][legs][departureTime]","industry[data][legs][endorsementOrRestrictions]","industry[data][legs][exchangeTicket]","industry[data][legs][fareAmount]","industry[data][legs][fareBasisCode]","industry[data][legs][feeAmount]","industry[data][legs][flightNumber]","industry[data][legs][serviceClass]","industry[data][legs][stopoverPermitted]","industry[data][legs][taxAmount]","industry[data][lodgingCheckInDate]","industry[data][lodgingCheckOutDate]","industry[data][lodgingName]","industry[data][noShow]","industry[data][passengerFirstName]","industry[data][passengerLastName]","industry[data][passengerMiddleInitial]","industry[data][passengerTitle]","industry[data][propertyPhone]","industry[data][restrictedTicket]","industry[data][roomRate]","industry[data][roomTax]","industry[data][taxAmount]","industry[data][ticketIssuerAddress]","industry[data][ticketNumber]","industry[data][travelAgencyCode]","industry[data][travelAgencyName]","industry[data][travelPackage]","industry[industryType]","installments[count]","discountAmount","shippingAmount","shippingTaxAmount","shipsFromPostalCode","lineItems[commodityCode]","lineItems[description]","lineItems[discountAmount]","lineItems[imageUrl]","lineItems[kind]","lineItems[name]","lineItems[productCode]","lineItems[quantity]","lineItems[taxAmount]","lineItems[totalAmount]","lineItems[unitAmount]","lineItems[unitOfMeasure]","lineItems[unitTaxAmount]","lineItems[upcCode]","lineItems[upcType]","lineItems[url]","applePayCard","applePayCard[number]","applePayCard[cardholderName]","applePayCard[cryptogram]","applePayCard[expirationMonth]","applePayCard[expirationYear]","applePayCard[eciIndicator]","androidPayCard","androidPayCard[number]","androidPayCard[cryptogram]","androidPayCard[googleTransactionId]","androidPayCard[expirationMonth]","androidPayCard[expirationYear]","androidPayCard[sourceCardType]","androidPayCard[sourceCardLastFour]","androidPayCard[eciIndicator]","subscriptionId","externalVault","externalVault[status]","externalVault[previousNetworkTransactionId]","scaExemption","foreignRetailer"],t=new El(this).sharedSignature("shipping").concat("shipping[shippingMethod]"),r=new El(this).sharedSignature("billing");return e=e.concat(t,r),{valid:e,ignore:["customFields","options[paypal][supplementaryData]"]}}_checkForDeprecatedAttributes(e){e.recurring!=null&&console.warn("[DEPRECATED] `recurring` is a deprecated param for transaction.sale calls. Use `transactionSource` instead"),e.deviceSessionId!=null&&console.warn("[DEPRECATED] `deviceSessionId` is a deprecated param for transaction.sale calls. Use `deviceData` instead"),e.fraudMerchantId!=null&&console.warn("[DEPRECATED] `fraudMerchantId` is a deprecated param for transaction.sale calls. Use `deviceData` instead"),e.threeDSecureToken!=null&&console.warn("[DEPRECATED] `threeDSecureToken` is a deprecated param for transaction.sale calls. Use `threeDSecureAuthenticationId` instead"),e.venmoSdkPaymentMethodCode!=null&&console.warn("The Venmo SDK integration is Unsupported. Please update your integration to use Pay with Venmo instead (https://developer.paypal.com/braintree/docs/guides/venmo/overview)"),e.options!=null&&e.options.venmoSdkSession!=null&&console.warn("The Venmo SDK integration is Unsupported. Please update your integration to use Pay with Venmo instead (https://developer.paypal.com/braintree/docs/guides/venmo/overview)")}};_l.exports={TransactionGateway:Ig(Ei,{ignoreMethods:["search"]})}});var xl=v((Vv,Ml)=>{"use strict";var wg=B().Gateway,_i=Je().Subscription,Ag=Dl().SubscriptionSearch,Cg=ir().TransactionGateway,vg=X(),bg=V().wrapPrototype,Mi=class extends wg{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}create(e){return this.gateway.http.post(`${this.config.baseMerchantPath()}/subscriptions`,{subscription:e}).then(this.responseHandler())}cancel(e){return this.gateway.http.put(`${this.config.baseMerchantPath()}/subscriptions/${e}/cancel`,null).then(this.responseHandler())}find(e){return e.trim()===""?Promise.reject(vg.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/subscriptions/${e}`).then(t=>new _i(t.subscription,this.gateway))}responseHandler(){return this.createResponseHandler("subscription",_i)}retryCharge(e,t,r){return typeof t=="function"&&(t=void 0),typeof r=="function"&&(r=!1),new Cg(this.gateway).sale({amount:t,subscriptionId:e,options:{submitForSettlement:r}})}search(e,t){let r=new Ag;return e(r),this.createSearchResponse(`${this.config.baseMerchantPath()}/subscriptions/advanced_search_ids`,r,this.pagingFunctionGenerator(r),t)}update(e,t){return this.gateway.http.put(`${this.config.baseMerchantPath()}/subscriptions/${e}`,{subscription:t}).then(this.responseHandler())}pagingFunctionGenerator(e){return super.pagingFunctionGenerator(e,"subscriptions/advanced_search",_i,"subscriptions",t=>t.subscriptions.subscription)}};Ml.exports={SubscriptionGateway:bg(Mi,{ignoreMethods:["search"]})}});var Oi=v((jv,Ol)=>{"use strict";var Tg=B().Gateway,Pg=tt().Environment,Dg=X(),Sg=V().wrapPrototype,xi=class extends Tg{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}settle(e){return this.settlementOperationWithEnvironmentCheck(e,"settle")}settlementPending(e){return this.settlementOperationWithEnvironmentCheck(e,"settlement_pending")}settlementConfirm(e){return this.settlementOperationWithEnvironmentCheck(e,"settlement_confirm")}settlementDecline(e){return this.settlementOperationWithEnvironmentCheck(e,"settlement_decline")}settlementOperationWithEnvironmentCheck(e,t){return this.config.environment===Pg.Production?Promise.reject(Dg.TestOperationPerformedInProductionError("Test operation performed in production"),null):this.gateway.http.put(`${this.config.baseMerchantPath()}/transactions/${e}/${t}`,null)}};Ol.exports={TestingGateway:Sg(xi)}});var ql=v((Bv,Fl)=>{"use strict";var Ng=q().AttributeSetter,sr=class extends Ng{static initClass(){this.Kind={Credit:"credit",Debit:"debit",All(){let e=[];for(let t in this){if(!this.hasOwnProperty(t))continue;let r=this[t];t!=="All"&&e.push(r)}return e}}}constructor(e){super(e)}};sr.initClass();Fl.exports={TransactionLineItem:sr}});var Rl=v((Gv,kl)=>{"use strict";var Eg=B().Gateway,_g=ql().TransactionLineItem,Mg=X(),xg=V().wrapPrototype,Fi=class extends Eg{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}findAll(e){return e.trim()===""?Promise.reject(Mg.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/transactions/${e}/line_items`).then(t=>t.lineItems.map(function(r){return new _g(r)}))}};kl.exports={TransactionLineItemGateway:xg(Fi,{})}});var Ul=v(($v,Ll)=>{"use strict";var Og=B().Gateway,Fg=Xe().UsBankAccount,qg=ir().TransactionGateway,kg=X(),Rg=V().wrapPrototype,qi=class extends Og{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}find(e){return e.trim()===""?Promise.reject(kg.NotFoundError("Not Found"),null):this.gateway.http.get(`${this.config.baseMerchantPath()}/payment_methods/us_bank_account/${e}`).then(function(t){return new Fg(t.usBankAccount)})}sale(e,t){return t.paymentMethodToken=e,t.options||(t.options={}),t.options.submitForSettlement=!0,new qg(this.gateway).sale(t)}};Ll.exports={UsBankAccountGateway:Rg(qi)}});var Bl=v((Xv,jl)=>{"use strict";var Lg=be().AdvancedSearch,Vl=$e().UsBankAccountVerification,or=class extends Lg{static initClass(){this.textFields("accountHolderName","customerEmail","customerId","id","paymentMethodToken","routingNumber"),this.multipleValueField("ids"),this.multipleValueField("status",{allows:Vl.StatusType.All()}),this.multipleValueField("verificationMethod",{allows:Vl.VerificationMethod.All()}),this.rangeFields("createdAt"),this.equalityFields("accountType"),this.endsWithFields("accountNumber")}};or.initClass();jl.exports={UsBankAccountVerificationSearch:or}});var $l=v((Hv,Gl)=>{"use strict";var Ug=B().Gateway,ar=$e().UsBankAccountVerification,Vg=Bl().UsBankAccountVerificationSearch,jg=X(),Bg=V().wrapPrototype,ki=class extends Ug{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}find(e){return e.trim()===""?Promise.reject(jg.NotFoundError("Not Found")):this.gateway.http.get(`${this.config.baseMerchantPath()}/us_bank_account_verifications/${e}`).then(function(t){return new ar(t.usBankAccountVerification)})}search(e,t){let r=new Vg;return e(r),this.createSearchResponse(`${this.config.baseMerchantPath()}/us_bank_account_verifications/advanced_search_ids`,r,this.pagingFunctionGenerator(r),t)}confirmMicroTransferAmounts(e,t,r){let i={usBankAccountVerification:{depositAmounts:t}};return this.gateway.http.put(`${this.config.baseMerchantPath()}/us_bank_account_verifications/${e}/confirm_micro_transfer_amounts`,i,r).then(this.responseHandler())}responseHandler(){return this.createResponseHandler("usBankAccountVerification",ar)}pagingFunctionGenerator(e){return(t,r)=>{let i=e.toHash();return i.ids=t,this.gateway.http.post(`${this.config.baseMerchantPath()}/us_bank_account_verifications/advanced_search`,{search:i},function(o,s){return o?r(o,null):Array.isArray(s.usBankAccountVerifications.usBankAccountVerification)?s.usBankAccountVerifications.usBankAccountVerification.map(l=>r(null,new ar(l))):r(null,new ar(s.usBankAccountVerifications.usBankAccountVerification))})}}};Gl.exports={UsBankAccountVerificationGateway:Bg(ki,{ignoreMethods:["search"]})}});var Li=v((Kv,Xl)=>{"use strict";var cr=require("crypto"),{Util:{zip:Gg}}=J(),Ri=class n{static Sha1hexdigest(e,t){return new n().hmacSha1(e,t)}static secureCompare(e,t){return new n().secureCompare(e,t)}hmacSha256(e,t){let r=cr.createHmac("sha256",this.sha256(e));return r.update(t,"binary"),r.digest("hex")}hmacSha1(e,t){let r=cr.createHmac("sha1",this.sha1(e));return r.update(t,"binary"),r.digest("hex")}secureCompare(e,t){if(e==null||t==null)return!1;let r=this.unpack(e),i=this.unpack(t),o=0;for(let[s,l]of Gg(r,i))o|=s^l;return o===0}sha1(e){let t=cr.createHash("sha1");return t.update(e,"binary"),t.digest()}sha256(e){let t=cr.createHash("sha256");return t.update(e,"binary"),t.digest()}unpack(e){let t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}};Xl.exports={Digest:Ri}});var Kl=v((Wv,Hl)=>{"use strict";var $g=q().AttributeSetter,Ui=class extends $g{constructor(e){super(e)}};Hl.exports={AccountUpdaterDailyReport:Ui}});var zl=v((zv,Wl)=>{"use strict";var Xg=q().AttributeSetter,Vi=class extends Xg{constructor(e){super(e),this.merchantId=this.merchantPublicId}};Wl.exports={ConnectedMerchantPayPalStatusChanged:Vi}});var Yl=v((Qv,Ql)=>{"use strict";var Hg=q().AttributeSetter,ji=class extends Hg{constructor(e){super(e),this.merchantId=this.merchantPublicId}};Ql.exports={ConnectedMerchantStatusTransitioned:ji}});var Zl=v((Yv,Jl)=>{"use strict";var Kg=q().AttributeSetter,ur=class n extends Kg{static initClass(){this.Types={Credit:"credit",Debit:"debit"}}constructor(e){super(e)}isDebit(){return this.disbursementType===n.Types.Debit}isCredit(){return this.disbursementType===n.Types.Credit}};ur.initClass();Jl.exports={Disbursement:ur}});var td=v((Jv,ed)=>{"use strict";var Wg=q().AttributeSetter,zg=ke().PaymentMethodNonce,Bi=class extends Wg{constructor(e){super(e),e.paymentMethodNonce&&(this.paymentMethodNonce=new zg(e.paymentMethodNonce))}};ed.exports={GrantedPaymentInstrumentUpdate:Bi}});var nd=v((Zv,rd)=>{"use strict";var Qg=ye().Transaction,Yg=q().AttributeSetter,Gi=class extends Yg{constructor(e,t){super(e),e.transaction&&(this.transaction=new Qg(e.transaction,t))}};rd.exports={LocalPaymentCompleted:Gi}});var sd=v((eb,id)=>{"use strict";var Jg=q().AttributeSetter,$i=class extends Jg{constructor(e){super(e)}};id.exports={LocalPaymentExpired:$i}});var ad=v((tb,od)=>{"use strict";var Zg=ye().Transaction,eI=q().AttributeSetter,Xi=class extends eI{constructor(e,t){super(e),e.transaction&&(this.transaction=new Zg(e.transaction,t))}};od.exports={LocalPaymentFunded:Xi}});var ud=v((rb,cd)=>{"use strict";var tI=q().AttributeSetter,Hi=class extends tI{constructor(e){super(e)}};cd.exports={LocalPaymentReversed:Hi}});var dd=v((nb,ld)=>{"use strict";var rI=q().AttributeSetter,Ki=class extends rI{};ld.exports={OAuthAccessRevocation:Ki}});var pd=v((ib,hd)=>{"use strict";var nI=q().AttributeSetter,Wi=class extends nI{};hd.exports={PartnerMerchant:Wi}});var fd=v((sb,md)=>{"use strict";var iI=q().AttributeSetter,zi=class extends iI{constructor(e){super(e)}};md.exports={VenmoProfileData:zi}});var gd=v((ob,yd)=>{"use strict";var sI=fd().VenmoProfileData,oI=q().AttributeSetter,Qi=class extends oI{constructor(e){super(e),this.profileData=new sI(e.profileData)}};yd.exports={EnrichedCustomerData:Qi}});var wd=v((ab,Id)=>{"use strict";var aI=gd().EnrichedCustomerData,cI=zt().PaymentMethodParser,uI=q().AttributeSetter,Yi=class extends uI{constructor(e){super(e),this.paymentMethod=cI.parsePaymentMethod(e.paymentMethod),e.enrichedCustomerData&&(this.enrichedCustomerData=new aI(e.enrichedCustomerData))}};Id.exports={PaymentMethodCustomerDataUpdatedMetadata:Yi}});var Cd=v((cb,Ad)=>{"use strict";var lI=zt().PaymentMethodParser,Ji=class{constructor(e){this.revokedPaymentMethod=lI.parsePaymentMethod(e),this.customerId=this.revokedPaymentMethod.customerId,this.token=this.revokedPaymentMethod.token}};Ad.exports={RevokedPaymentMethodMetadata:Ji}});var bd=v((ub,vd)=>{"use strict";var dI=q().AttributeSetter,Zi=class extends dI{};vd.exports={TransactionReview:Zi}});var dr=v((lb,Td)=>{"use strict";var hI=Kl().AccountUpdaterDailyReport,pI=q().AttributeSetter,mI=zl().ConnectedMerchantPayPalStatusChanged,fI=Yl().ConnectedMerchantStatusTransitioned,yI=Zl().Disbursement,gI=Ge().Dispute,II=td().GrantedPaymentInstrumentUpdate,wI=nd().LocalPaymentCompleted,AI=sd().LocalPaymentExpired,CI=ad().LocalPaymentFunded,vI=ud().LocalPaymentReversed,bI=Ye().MerchantAccount,TI=dd().OAuthAccessRevocation,PI=pd().PartnerMerchant,DI=wd().PaymentMethodCustomerDataUpdatedMetadata,SI=Cd().RevokedPaymentMethodMetadata,NI=Je().Subscription,EI=ye().Transaction,_I=bd().TransactionReview,MI=Pt().ValidationErrorsCollection,le={AccountUpdaterDailyReport:"account_updater_daily_report",Check:"check",ConnectedMerchantPayPalStatusChanged:"connected_merchant_paypal_status_changed",ConnectedMerchantStatusTransitioned:"connected_merchant_status_transitioned",Disbursement:"disbursement",DisbursementException:"disbursement_exception",DisputeUnderReview:"dispute_under_review",DisputeOpened:"dispute_opened",DisputeLost:"dispute_lost",DisputeWon:"dispute_won",DisputeAccepted:"dispute_accepted",DisputeAutoAccepted:"dispute_auto_accepted",DisputeDisputed:"dispute_disputed",DisputeExpired:"dispute_expired",GrantorUpdatedGrantedPaymentMethod:"grantor_updated_granted_payment_method",GrantedPaymentInstrumentUpdate:"granted_payment_instrument_update",GrantedPaymentMethodRevoked:"granted_payment_method_revoked",LocalPaymentCompleted:"local_payment_completed",LocalPaymentExpired:"local_payment_expired",LocalPaymentFunded:"local_payment_funded",LocalPaymentReversed:"local_payment_reversed",PartnerMerchantConnected:"partner_merchant_connected",PartnerMerchantDisconnected:"partner_merchant_disconnected",PartnerMerchantDeclined:"partner_merchant_declined",PaymentMethodCustomerDataUpdated:"payment_method_customer_data_updated",PaymentMethodRevokedByCustomer:"payment_method_revoked_by_customer",OAuthAccessRevoked:"oauth_access_revoked",RecipientUpdatedGrantedPaymentMethod:"recipient_updated_granted_payment_method",RefundFailed:"refund_failed",SubscriptionBillingSkipped:"subscription_billing_skipped",SubscriptionCanceled:"subscription_canceled",SubscriptionChargedSuccessfully:"subscription_charged_successfully",SubscriptionChargedUnsuccessfully:"subscription_charged_unsuccessfully",SubscriptionExpired:"subscription_expired",SubscriptionTrialEnded:"subscription_trial_ended",SubscriptionWentActive:"subscription_went_active",SubscriptionWentPastDue:"subscription_went_past_due",SubMerchantAccountApproved:"sub_merchant_account_approved",SubMerchantAccountDeclined:"sub_merchant_account_declined",TransactionDisbursed:"transaction_disbursed",TransactionReviewed:"transaction_reviewed",TransactionSettled:"transaction_settled",TransactionSettlementDeclined:"transaction_settlement_declined"},lr=class extends pI{static initClass(){this.Kind=le}constructor(e,t){super(e,t);let r;e.subject.apiErrorResponse!=null?r=e.subject.apiErrorResponse:r=e.subject,r.subscription!=null&&(this.subscription=new NI(r.subscription,t)),r.merchantAccount!=null&&(this.merchantAccount=new bI(r.merchantAccount)),r.disbursement!=null&&(this.disbursement=new yI(r.disbursement)),r.transaction!=null&&(this.transaction=new EI(r.transaction,t)),r.transactionReview!=null&&(this.transactionReview=new _I(r.transactionReview)),r.partnerMerchant!=null&&(this.partnerMerchant=new PI(r.partnerMerchant)),r.oauthApplicationRevocation!=null&&(this.oauthAccessRevocation=new TI(r.oauthApplicationRevocation)),r.connectedMerchantStatusTransitioned!=null&&(this.connectedMerchantStatusTransitioned=new fI(r.connectedMerchantStatusTransitioned)),r.connectedMerchantPaypalStatusChanged!=null&&(this.connectedMerchantPayPalStatusChanged=new mI(r.connectedMerchantPaypalStatusChanged)),r.dispute!=null&&(this.dispute=new gI(r.dispute)),r.accountUpdaterDailyReport!=null&&(this.accountUpdaterDailyReport=new hI(r.accountUpdaterDailyReport)),r.grantedPaymentInstrumentUpdate!=null&&[le.GrantorUpdatedGrantedPaymentMethod,le.RecipientUpdatedGrantedPaymentMethod].indexOf(e.kind)!==-1&&(this.grantedPaymentInstrumentUpdate=new II(r.grantedPaymentInstrumentUpdate)),[le.GrantedPaymentMethodRevoked,le.PaymentMethodRevokedByCustomer].indexOf(e.kind)!==-1&&(this.revokedPaymentMethodMetadata=new SI(r)),r.localPayment!=null&&le.LocalPaymentCompleted===e.kind&&(this.localPaymentCompleted=new wI(r.localPayment,t)),r.localPaymentExpired!=null&&le.LocalPaymentExpired===e.kind&&(this.localPaymentExpired=new AI(r.localPaymentExpired,t)),r.localPaymentFunded!=null&&le.LocalPaymentFunded===e.kind&&(this.localPaymentFunded=new CI(r.localPaymentFunded,t)),r.localPaymentReversed!=null&&le.LocalPaymentReversed===e.kind&&(this.localPaymentReversed=new vI(r.localPaymentReversed,t)),r.paymentMethodCustomerDataUpdatedMetadata!=null&&le.PaymentMethodCustomerDataUpdated===e.kind&&(this.paymentMethodCustomerDataUpdatedMetadata=new DI(r.paymentMethodCustomerDataUpdatedMetadata)),r.errors!=null&&(this.errors=new MI(r.errors),this.message=r.message)}};lr.initClass();Td.exports={WebhookNotification:lr}});var Dd=v((db,Pd)=>{"use strict";var xI=Sr(),es=Li().Digest,OI=B().Gateway,Me=X(),FI=J().Util,qI=dr().WebhookNotification,kI=V().wrapPrototype,ts=class extends OI{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}parse(e,t){if(!e)return Promise.reject(Me.InvalidSignatureError("signature parameter is required"));if(!t)return Promise.reject(Me.InvalidSignatureError("payload parameter is required"));if(t.match(/[^A-Za-z0-9+=\/\n]/))return Promise.reject(Me.InvalidSignatureError("payload contains illegal characters"));let r=this.validateSignature(e,t);if(r)return Promise.reject(r);let i=Buffer.from(t,"base64").toString("utf8");return xI.parseStringPromise(i,{attrkey:"@",charkey:"#",explicitArray:!1}).then(o=>{let s=FI.convertNodeToObject(o);return this.createResponseHandler("notification",qI)(s)}).then(o=>o.notification)}validateSignature(e,t){let r=e.split("&").filter(l=>l.indexOf("|")!==-1).map(l=>l.split("|")),i=this.matchingSignature(r);if(!i)return Me.InvalidSignatureError("no matching public key");let o=this;return[t,`${t}
`].some(l=>es.secureCompare(i,es.Sha1hexdigest(o.gateway.config.privateKey,l)))?null:Me.InvalidSignatureError("signature does not match payload - one has been modified")}verify(e,t){if(!e.match(/^[a-f0-9]{20,32}$/)){if(t!=null){t(Me.InvalidChallengeError("challenge contains non-hex characters"),null);return}throw Me.InvalidChallengeError("challenge contains non-hex characters")}let r=es.Sha1hexdigest(this.gateway.config.privateKey,e);return`${this.gateway.config.publicKey}|${r}`}matchingSignature(e){for(let t of e){let r=t[0],i=t[1];if(this.gateway.config.publicKey===r)return i}return null}};Pd.exports={WebhookNotificationGateway:kI(ts,{ignoreMethods:["verify"]})}});var Nd=v((rs,Sd)=>{"use strict";function Ue(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ue=function(t){return typeof t}:Ue=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(n)}(function(n){var e=arguments,t=function(){var h=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,b=/[^-+\dA-Z]/g;return function(C,I,m,w){if(e.length===1&&l(C)==="string"&&!/\d/.test(C)&&(I=C,C=void 0),C=C||C===0?C:new Date,C instanceof Date||(C=new Date(C)),isNaN(C))throw TypeError("Invalid date");I=String(t.masks[I]||I||t.masks.default);var N=I.slice(0,4);(N==="UTC:"||N==="GMT:")&&(I=I.slice(4),m=!0,N==="GMT:"&&(w=!0));var M=function(){return m?"getUTC":"get"},D=function(){return C[M()+"Date"]()},F=function(){return C[M()+"Day"]()},p=function(){return C[M()+"Month"]()},u=function(){return C[M()+"FullYear"]()},a=function(){return C[M()+"Hours"]()},g=function(){return C[M()+"Minutes"]()},T=function(){return C[M()+"Seconds"]()},y=function(){return C[M()+"Milliseconds"]()},E=function(){return m?0:C.getTimezoneOffset()},A=function(){return o(C)},S=function(){return s(C)},O={d:function(){return D()},dd:function(){return r(D())},ddd:function(){return t.i18n.dayNames[F()]},DDD:function(){return i({y:u(),m:p(),d:D(),_:M(),dayName:t.i18n.dayNames[F()],short:!0})},dddd:function(){return t.i18n.dayNames[F()+7]},DDDD:function(){return i({y:u(),m:p(),d:D(),_:M(),dayName:t.i18n.dayNames[F()+7]})},m:function(){return p()+1},mm:function(){return r(p()+1)},mmm:function(){return t.i18n.monthNames[p()]},mmmm:function(){return t.i18n.monthNames[p()+12]},yy:function(){return String(u()).slice(2)},yyyy:function(){return r(u(),4)},h:function(){return a()%12||12},hh:function(){return r(a()%12||12)},H:function(){return a()},HH:function(){return r(a())},M:function(){return g()},MM:function(){return r(g())},s:function(){return T()},ss:function(){return r(T())},l:function(){return r(y(),3)},L:function(){return r(Math.floor(y()/10))},t:function(){return a()<12?t.i18n.timeNames[0]:t.i18n.timeNames[1]},tt:function(){return a()<12?t.i18n.timeNames[2]:t.i18n.timeNames[3]},T:function(){return a()<12?t.i18n.timeNames[4]:t.i18n.timeNames[5]},TT:function(){return a()<12?t.i18n.timeNames[6]:t.i18n.timeNames[7]},Z:function(){return w?"GMT":m?"UTC":(String(C).match(f)||[""]).pop().replace(b,"").replace(/GMT\+0000/g,"UTC")},o:function(){return(E()>0?"-":"+")+r(Math.floor(Math.abs(E())/60)*100+Math.abs(E())%60,4)},p:function(){return(E()>0?"-":"+")+r(Math.floor(Math.abs(E())/60),2)+":"+r(Math.floor(Math.abs(E())%60),2)},S:function(){return["th","st","nd","rd"][D()%10>3?0:(D()%100-D()%10!=10)*D()%10]},W:function(){return A()},WW:function(){return r(A())},N:function(){return S()}};return I.replace(h,function(_){return _ in O?O[_]():_.slice(1,_.length-1)})}}();t.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},t.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};var r=function(f,b){for(f=String(f),b=b||2;f.length<b;)f="0"+f;return f},i=function(f){var b=f.y,C=f.m,I=f.d,m=f._,w=f.dayName,N=f.short,M=N===void 0?!1:N,D=new Date,F=new Date;F.setDate(F[m+"Date"]()-1);var p=new Date;p.setDate(p[m+"Date"]()+1);var u=function(){return D[m+"Date"]()},a=function(){return D[m+"Month"]()},g=function(){return D[m+"FullYear"]()},T=function(){return F[m+"Date"]()},y=function(){return F[m+"Month"]()},E=function(){return F[m+"FullYear"]()},A=function(){return p[m+"Date"]()},S=function(){return p[m+"Month"]()},O=function(){return p[m+"FullYear"]()};return g()===b&&a()===C&&u()===I?M?"Tdy":"Today":E()===b&&y()===C&&T()===I?M?"Ysd":"Yesterday":O()===b&&S()===C&&A()===I?M?"Tmw":"Tomorrow":w},o=function(f){var b=new Date(f.getFullYear(),f.getMonth(),f.getDate());b.setDate(b.getDate()-(b.getDay()+6)%7+3);var C=new Date(b.getFullYear(),0,4);C.setDate(C.getDate()-(C.getDay()+6)%7+3);var I=b.getTimezoneOffset()-C.getTimezoneOffset();b.setHours(b.getHours()-I);var m=(b-C)/(864e5*7);return 1+Math.floor(m)},s=function(f){var b=f.getDay();return b===0&&(b=7),b},l=function(f){return f===null?"null":f===void 0?"undefined":Ue(f)!=="object"?Ue(f):Array.isArray(f)?"array":{}.toString.call(f).slice(8,-1).toLowerCase()};typeof define=="function"&&define.amd?define(function(){return t}):(typeof rs>"u"?"undefined":Ue(rs))==="object"?Sd.exports=t:n.dateFormat=t})(void 0)});var Md=v((hb,_d)=>{"use strict";var RI=require("buffer").Buffer,LI=Li().Digest,UI=B().Gateway,U=dr().WebhookNotification,Ed=Nd(),VI=V().wrapPrototype,ns=class extends UI{constructor(e){super(),this.gateway=e,this.config=this.gateway.config}sampleNotification(e,t,r){let i=this.sampleXml(e,t,r),o=RI.from(i).toString("base64")+`
`;return{bt_signature:this.sampleSignature(o),bt_payload:o}}sampleSignature(e){return`${this.gateway.config.publicKey}|${LI.Sha1hexdigest(this.gateway.config.privateKey,e)}`}sampleXml(e,t,r){let i="";return r&&(i=`<source-merchant-id>${r}</source-merchant-id>`),`<notification>
    <timestamp type="datetime">${Ed(new Date,Ed.masks.isoUtcDateTime,!0)}</timestamp>
    <kind>${e}</kind>
    ${i}
    <subject>${this.subjectXmlFor(e,t)}</subject>
</notification>`}subjectXmlFor(e,t){switch(e){case U.Kind.AccountUpdaterDailyReport:return this.subjectXmlForAccountUpdaterDailyReport();case U.Kind.Check:return this.subjectXmlForCheck();case U.Kind.ConnectedMerchantPayPalStatusChanged:return this.subjectXmlForConnectedMerchantPayPalStatusChanged(t);case U.Kind.ConnectedMerchantStatusTransitioned:return this.subjectXmlForConnectedMerchantStatusTransitioned(t);case U.Kind.Disbursement:return this.subjectXmlForDisbursement(t);case U.Kind.DisbursementException:return this.subjectXmlForDisbursementException(t);case U.Kind.DisputeAccepted:return this.subjectXmlForDisputeAccepted(t);case U.Kind.DisputeAutoAccepted:return this.subjectXmlForDisputeAutoAccepted(t);case U.Kind.DisputeDisputed:return this.subjectXmlForDisputeDisputed(t);case U.Kind.DisputeExpired:return this.subjectXmlForDisputeExpired(t);case U.Kind.DisputeLost:return this.subjectXmlForDisputeLost(t);case U.Kind.DisputeOpened:return this.subjectXmlForDisputeOpened(t);case U.Kind.DisputeUnderReview:return this.subjectXmlForDisputeUnderReview(t);case U.Kind.DisputeWon:return this.subjectXmlForDisputeWon(t);case U.Kind.GrantedPaymentMethodRevoked:return this.subjectXmlForGrantedPaymentMethodRevoked(t);case U.Kind.GrantorUpdatedGrantedPaymentMethod:return this.subjectXmlForGrantedPaymentInstrumentUpdate();case U.Kind.LocalPaymentCompleted:return this.subjectXmlForLocalPaymentCompleted(t);case U.Kind.LocalPaymentExpired:return this.subjectXmlForLocalPaymentExpired(t);case U.Kind.LocalPaymentFunded:return this.subjectXmlForLocalPaymentFunded(t);case U.Kind.LocalPaymentReversed:return this.subjectXmlForLocalPaymentReversed(t);case U.Kind.OAuthAccessRevoked:return this.subjectXmlForOAuthAccessRevocation(t);case U.Kind.PartnerMerchantConnected:return this.subjectXmlForPartnerMerchantConnected();case U.Kind.PartnerMerchantDeclined:return this.subjectXmlForPartnerMerchantDeclined();case U.Kind.PartnerMerchantDisconnected:return this.subjectXmlForPartnerMerchantDisconnected();case U.Kind.PaymentMethodCustomerDataUpdated:return this.subjectXmlForPaymentMethodCustomerDataUpdated(t);case U.Kind.PaymentMethodRevokedByCustomer:return this.subjectXmlForPaymentMethodRevokedByCustomer(t);case U.Kind.RecipientUpdatedGrantedPaymentMethod:return this.subjectXmlForGrantedPaymentInstrumentUpdate();case U.Kind.RefundFailed:return this.subjectXmlForRefundFailed(t);case U.Kind.SubMerchantAccountApproved:return this.subjectXmlForSubMerchantAccountApproved(t);case U.Kind.SubMerchantAccountDeclined:return this.subjectXmlForSubMerchantAccountDeclined(t);case U.Kind.SubscriptionBillingSkipped:return this.subjectXmlForSubscriptionBillingSkipped(t);case U.Kind.SubscriptionChargedSuccessfully:return this.subjectXmlForSubscriptionChargedSuccessfully(t);case U.Kind.SubscriptionChargedUnsuccessfully:return this.subjectXmlForSubscriptionChargedUnsuccessfully(t);case U.Kind.TransactionDisbursed:return this.subjectXmlForTransactionDisbursed(t);case U.Kind.TransactionReviewed:return this.subjectXmlForTransactionReviewed(t);case U.Kind.TransactionSettled:return this.subjectXmlForTransactionSettled(t);case U.Kind.TransactionSettlementDeclined:return this.subjectXmlForTransactionSettlementDeclined(t);default:return this.subjectXmlForSubscription(t)}}subjectXmlForAccountUpdaterDailyReport(){return`<account-updater-daily-report>
  <report-date type="date">2016-01-14</report-date>
  <report-url>link-to-csv-report</report-url>
</account-updater-daily-report>`}subjectXmlForCheck(){return'<check type="boolean">true</check>'}subjectXmlForTransactionDisbursed(e){return`<transaction>
  <id>${e}</id>
  <amount>100</amount>
  <disbursement-details>
    <disbursement-date type="datetime">2013-07-09T18:23:29Z</disbursement-date>
  </disbursement-details>
</transaction>`}subjectXmlForTransactionReviewed(e){return`<transaction-review>
  <transaction-id>${e}</transaction-id>
  <decision>a smart decision</decision>
  <reviewer-email>hey@girl.com</reviewer-email>
  <reviewer-note>I reviewed this</reviewer-note>
  <reviewed-time type="datetime">2021-04-20T06:09:00Z</reviewed-time>
</transaction-review>`}subjectXmlForTransactionSettled(e){return`<transaction>
  <id>${e}</id>
  <status>settled</status>
  <type>sale</type>
  <currency-iso-code>USD</currency-iso-code>
  <amount>100</amount>
  <merchant-account-id>ogaotkivejpfayqfeaimuktty</merchant-account-id>
  <payment-instrument-type>us_bank_account</payment-instrument-type>
  <us-bank-account>
    <routing-number>123456789</routing-number>
    <last-4>1234</last-4>
    <account-type>checking</account-type>
    <account-holder-name>Dan Schulman</account-holder-name>
  </us-bank-account>
</transaction>`}subjectXmlForTransactionSettlementDeclined(e){return`<transaction>
  <id>${e}</id>
  <status>settlement_declined</status>
  <type>sale</type>
  <currency-iso-code>USD</currency-iso-code>
  <amount>100</amount>
  <merchant-account-id>ogaotkivejpfayqfeaimuktty</merchant-account-id>
  <payment-instrument-type>us_bank_account</payment-instrument-type>
  <us-bank-account>
    <routing-number>123456789</routing-number>
    <last-4>1234</last-4>
    <account-type>checking</account-type>
    <account-holder-name>Dan Schulman</account-holder-name>
  </us-bank-account>
</transaction>`}subjectXmlForDisputeUnderReview(e){return`<dispute>
    <amount>250.00</amount>
    <amount-disputed>250.0</amount-disputed>
    <amount-won>245.00</amount-won>
    <currency-iso-code>USD</currency-iso-code>
    <received-date type="date">2014-03-01</received-date>
    <reply-by-date type="date">2014-03-21</reply-by-date>
    <kind>chargeback</kind>
    <status>under_review</status>
    <reason>fraud</reason>
    <id>${e}</id>
    <transaction>
      <id>${e}</id>
      <amount>250.00</amount>
    </transaction>
    <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisputeOpened(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>open</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisputeLost(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>lost</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisputeWon(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>won</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
  <date-won type="date">2014-09-01</date-won>
</dispute>`}subjectXmlForDisputeAccepted(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>accepted</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisputeAutoAccepted(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>auto_accepted</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisputeDisputed(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>disputed</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisputeExpired(e){return`<dispute>
  <amount>250.00</amount>
  <amount-disputed>250.0</amount-disputed>
  <amount-won>245.00</amount-won>
  <currency-iso-code>USD</currency-iso-code>
  <received-date type="date">2014-03-01</received-date>
  <reply-by-date type="date">2014-03-21</reply-by-date>
  <kind>chargeback</kind>
  <status>expired</status>
  <reason>fraud</reason>
  <id>${e}</id>
  <transaction>
    <id>${e}</id>
    <amount>250.00</amount>
  </transaction>
  <date-opened type="date">2014-03-28</date-opened>
</dispute>`}subjectXmlForDisbursementException(e){return`<disbursement>
  <id>${e}</id>
  <transaction-ids type="array">
    <item>afv56j</item>
    <item>kj8hjk</item>
  </transaction-ids>
  <success type="boolean">false</success>
  <retry type="boolean">false</retry>
  <merchant-account>
    <id>merchant_account_token</id>
    <currency-iso-code>USD</currency-iso-code>
    <sub-merchant-account type="boolean">false</sub-merchant-account>
    <status>active</status>
  </merchant-account>
  <amount>100.00</amount>
  <disbursement-date type="date">2014-02-10</disbursement-date>
  <exception-message>bank_rejected</exception-message>
  <follow-up-action>update_funding_information</follow-up-action>
</disbursement>`}subjectXmlForDisbursement(e){return`<disbursement>
  <id>${e}</id>
  <transaction-ids type="array">
    <item>afv56j</item>
    <item>kj8hjk</item>
  </transaction-ids>
  <success type="boolean">true</success>
  <retry type="boolean">false</retry>
  <merchant-account>
    <id>merchant_account_token</id>
    <currency-iso-code>USD</currency-iso-code>
    <sub-merchant-account type="boolean">false</sub-merchant-account>
    <status>active</status>
  </merchant-account>
  <amount>100.00</amount>
  <disbursement-date type="date">2014-02-10</disbursement-date>
  <exception-message nil="true"/>
  <follow-up-action nil="true"/>
</disbursement>`}subjectXmlForGrantedPaymentInstrumentUpdate(){return`<granted-payment-instrument-update>
    <grant-owner-merchant-id>vczo7jqrpwrsi2px</grant-owner-merchant-id>
    <grant-recipient-merchant-id>cf0i8wgarszuy6hc</grant-recipient-merchant-id>
    <payment-method-nonce>
      <nonce>ee257d98-de40-47e8-96b3-a6954ea7a9a4</nonce>
      <consumed type="boolean">false</consumed>
      <locked type="boolean">false</locked>
    </payment-method-nonce>
    <token>abc123z</token>
    <updated-fields type="array">
      <item>expiration-month</item>
      <item>expiration-year</item>
    </updated-fields>
  </granted-payment-instrument-update>`}subjectXmlForRefundFailed(e){return`<transaction>
  <id>${e}</id>
  <amount>100</amount>
  <credit-card>
    <number>1234560000001234</number>
    <cvv>123</cvv>
    <card-type>MasterCard</card-type>
  </credit-card>
  <status>processor_declined</status>
  <refunded-transaction-fk>1</refunded-transaction-fk>
</transaction>`}subjectXmlForSubMerchantAccountApproved(e){return`<merchant_account>
  <id>${e}</id>
</merchant_account>`}errorSampleXml(){return`<error>
  <code>82621</code>
  <message>Credit score is too low</message>
  <attribute type="symbol">base</attribute>
</error>`}subjectXmlForSubMerchantAccountDeclined(e){return`<api-error-response>
  <message>Credit score is too low</message>
  <errors>
    <merchant-account>
      <errors type="array">
        ${this.errorSampleXml()}
      </errors>
    </merchant-account>
  </errors>
  ${this.merchantAccountSampleXml(e)}
</api-error-response>`}merchantAccountSampleXml(e){return`<merchant_account>
  <id>${e}</id>
  <master_merchant_account>
    <id>master_ma_for_${e}</id>
    <status>suspended</status>
  </master_merchant_account>
  <status>suspended</status>
</merchant_account>`}subjectXmlForSubscription(e){return`<subscription>
    <id>${e}</id>
    <transactions type="array"></transactions>
    <add_ons type="array"></add_ons>
    <discounts type="array"></discounts>
</subscription>`}subjectXmlForSubscriptionBillingSkipped(e){return`<subscription>
    <id>${e}</id>
    <transactions type="array"></transactions>
    <add_ons type="array"></add_ons>
    <discounts type="array"></discounts>
</subscription>`}subjectXmlForSubscriptionChargedSuccessfully(e){return`<subscription>
    <id>${e}</id>
    <transactions type="array">
      <transaction>
        <id>${e}</id>
        <status>submitted_for_settlement</status>
        <amount>49.99</amount>
      </transaction>
    </transactions>
    <add_ons type="array"></add_ons>
    <discounts type="array"></discounts>
</subscription>`}subjectXmlForSubscriptionChargedUnsuccessfully(e){return`<subscription>
    <id>${e}</id>
    <transactions type="array">
      <transaction>
        <id>${e}</id>
        <status>failed</status>
        <amount>49.99</amount>
      </transaction>
    </transactions>
    <add_ons type="array"></add_ons>
    <discounts type="array"></discounts>
</subscription>`}subjectXmlForGrantedPaymentMethodRevoked(e){return this._venmoAccountXml(e)}subjectXmlForPartnerMerchantConnected(){return`<partner-merchant>
  <merchant-public-id>public_id</merchant-public-id>
  <public-key>public_key</public-key>
  <private-key>private_key</private-key>
  <partner-merchant-id>abc123</partner-merchant-id>
  <client-side-encryption-key>cse_key</client-side-encryption-key>
</partner-merchant>`}subjectXmlForPartnerMerchantDisconnected(){return`<partner-merchant>
  <partner-merchant-id>abc123</partner-merchant-id>
</partner-merchant>`}subjectXmlForConnectedMerchantStatusTransitioned(e){return`<connected-merchant-status-transitioned>
        <merchant-public-id>${e}</merchant-public-id>
        <status>new_status</status>
        <oauth-application-client-id>oauth_application_client_id</oauth-application-client-id>
      </connected-merchant-status-transitioned>`}subjectXmlForConnectedMerchantPayPalStatusChanged(e){return`<connected-merchant-paypal-status-changed>
        <merchant-public-id>${e}</merchant-public-id>
        <action>link</action>
        <oauth-application-client-id>oauth_application_client_id</oauth-application-client-id>
      </connected-merchant-paypal-status-changed>`}subjectXmlForPartnerMerchantDeclined(){return`<partner-merchant>
  <partner-merchant-id>abc123</partner-merchant-id>
</partner-merchant>`}subjectXmlForOAuthAccessRevocation(e){return`<oauth-application-revocation>
      <merchant-id>${e}</merchant-id>
      <oauth-application-client-id>oauth_application_client_id</oauth-application-client-id>
    </oauth-application-revocation>`}subjectXmlForPaymentMethodRevokedByCustomer(e){return`<paypal-account>
      <billing-agreement-id>a-billing-agreement-id</billing-agreement-id>
      <created-at type="datetime">2019-01-01T12:00:00Z</created-at>
      <customer-id>a-customer-id</customer-id>
      <default type="boolean">true</default>
      <email>name@email.com</email>
      <global-id>cGF5bWVudG1ldGhvZF9jaDZieXNz</global-id>
      <image-url>https://assets.braintreegateway.com/payment_method_logo/paypal.png?environment=test</image-url>
      <subscriptions type="array"/>
      <token>${e}</token>
      <updated-at type="datetime">2019-01-02T12:00:00Z</updated-at>
      <is-channel-initiated nil="true"/>
      <payer-id>a-payer-id</payer-id>
      <payer-info nil="true"/>
      <limited-use-order-id nil="true"/>
      <revoked-at type="datetime">2019-01-02T12:00:00Z</revoked-at>
    </paypal-account>`}subjectXmlForLocalPaymentCompleted(e){return e==="blik_one_click_id"?this.blikOneClickSubjectXmlForLocalPaymentCompleted():this.defaultSubjectXmlForLocalPaymentCompleted()}defaultSubjectXmlForLocalPaymentCompleted(){return`<local-payment>
      <bic>a-bic</bic>
      <iban-last-chars>1234</iban-last-chars>
      <payer-id>a-payer-id</payer-id>
      <payer-name>a-payer-name</payer-name>
      <payment-id>a-payment-id</payment-id>
      <payment-method-nonce>ee257d98-de40-47e8-96b3-a6954ea7a9a4</payment-method-nonce>
      <transaction>
        <id>1</id>
        <status>authorizing</status>
        <amount>10.00</amount>
        <order-id>order1234</order-id>
      </transaction>
    </local-payment>`}blikOneClickSubjectXmlForLocalPaymentCompleted(){return`<local-payment>
      <bic>a-bic</bic>
      <blik-aliases type='array'>
        <blik-alias>
          <key>alias-key-1</key>
          <label>alias-label-1</label>
        </blik-alias>
      </blik-aliases>
      <iban-last-chars>1234</iban-last-chars>
      <payer-id>a-payer-id</payer-id>
      <payer-name>a-payer-name</payer-name>
      <payment-id>a-payment-id</payment-id>
      <payment-method-nonce>ee257d98-de40-47e8-96b3-a6954ea7a9a4</payment-method-nonce>
      <transaction>
        <id>1</id>
        <status>authorizing</status>
        <amount>10.00</amount>
        <order-id>order1234</order-id>
      </transaction>
    </local-payment>`}subjectXmlForLocalPaymentExpired(){return`<local-payment-expired>
      <payment-id>a-payment-id</payment-id>
      <payment-context-id>a-payment-context-id</payment-context-id>
    </local-payment-expired>`}subjectXmlForLocalPaymentFunded(){return`<local-payment-funded>
      <payment-id>a-payment-id</payment-id>
      <payment-context-id>a-payment-context-id</payment-context-id>
      <transaction>
        <id>1</id>
        <status>settled</status>
        <amount>10.00</amount>
        <order-id>order1234</order-id>
      </transaction>
    </local-payment-funded>`}subjectXmlForLocalPaymentReversed(){return`<local-payment-reversed>
      <payment-id>a-payment-id</payment-id>
    </local-payment-reversed>`}subjectXmlForPaymentMethodCustomerDataUpdated(e){return`<payment-method-customer-data-updated-metadata>
      <token>TOKEN-12345</token>
      <payment-method>
        ${this._venmoAccountXml(e)}
      </payment-method>
      <datetime-updated type='dateTime'>2022-01-01T21:28:37Z</datetime-updated>
      <enriched-customer-data>
        <fields-updated type='array'>
          <item>username</item>
        </fields-updated>
        <profile-data>
          <username>venmo_username</username>
          <first-name>John</first-name>
          <last-name>Doe</last-name>
          <phone-number>1231231234</phone-number>
          <email>john.doe@paypal.com</email>
          <billing-address>
            <street-address>Billing Street Address</street-address>
            <extended-address>Billing Extended Address</extended-address>
            <locality>Locality</locality>
            <region>Region</region>
            <postal-code>Postal Code</postal-code>
          </billing-address>
          <shipping-address>
            <street-address>Shipping Street Address</street-address>
            <extended-address>Shipping Extended Address</extended-address>
            <locality>Locality</locality>
            <region>Region</region>
            <postal-code>Postal Code</postal-code>
          </shipping-address>
        </profile-data>
      </enriched-customer-data>
    </payment-method-customer-data-updated-metadata>`}_venmoAccountXml(e){return`<venmo-account>
      <default type="boolean">true</default>
      <image-url>https://assets.braintreegateway.com/payment_method_logo/venmo.png?environment=test</image-url>
      <token>${e}</token>
      <source-description>Venmo Account: venmojoe</source-description>
      <username>venmojoe</username>
      <venmo-user-id>456</venmo-user-id>
      <subscriptions type="array"/>
      <customer-id>venmo_customer_id</customer-id>
      <global-id>cGF5bWVudG1ldGhvZF92ZW5tb2FjY291bnQ</global-id>
    </venmo-account>`}};_d.exports={WebhookTestingGateway:VI(ns)}});var Fd=v((pb,Od)=>{"use strict";var jI=qr().Http,xd=Jo().Config,BI=Dt().GraphQLClient,GI=Oc().AddOnGateway,$I=xn().AddressGateway,XI=Lc().ClientTokenGateway,HI=Xc().CreditCardGateway,KI=zc().CreditCardVerificationGateway,WI=nu().CustomerGateway,zI=ou().CustomerSessionGateway,QI=cu().DisbursementGateway,YI=hu().DiscountGateway,JI=Au().DisputeGateway,ZI=Tu().DocumentUploadGateway,ew=Ou().ExchangeRateQuoteGateway,tw=ku().MerchantAccountGateway,rw=ju().MerchantGateway,nw=Gu().OAuthGateway,iw=ol().PaymentMethodGateway,sw=cl().PaymentMethodNonceGateway,ow=dl().PayPalAccountGateway,aw=pl().PayPalPaymentResourceGateway,cw=yl().PlanGateway,uw=wl().SepaDirectDebitAccountGateway,lw=bl().SettlementBatchSummaryGateway,dw=xl().SubscriptionGateway,hw=Oi().TestingGateway,pw=ir().TransactionGateway,mw=Rl().TransactionLineItemGateway,fw=Ul().UsBankAccountGateway,yw=$l().UsBankAccountVerificationGateway,gw=Dd().WebhookNotificationGateway,Iw=Md().WebhookTestingGateway,is=class{constructor(e){this.config instanceof xd?this.config=e:this.config=new xd(e),this.graphQLClient=new BI(this.config),this.http=new jI(this.config),this.addOn=new GI(this),this.address=new $I(this),this.clientToken=new XI(this),this.creditCard=new HI(this),this.creditCardVerification=new KI(this),this.customer=new WI(this),this.customerSession=new zI(this),this.disbursement=new QI(this),this.discount=new YI(this),this.dispute=new JI(this),this.documentUpload=new ZI(this),this.exchangeRateQuote=new ew(this),this.merchantAccount=new tw(this),this.merchant=new rw(this),this.oauth=new nw(this),this.paymentMethod=new iw(this),this.paymentMethodNonce=new sw(this),this.paypalAccount=new ow(this),this.paypalPaymentResource=new aw(this),this.plan=new cw(this),this.sepaDirectDebitAccount=new uw(this),this.settlementBatchSummary=new lw(this),this.subscription=new dw(this),this.testing=new hw(this),this.transaction=new pw(this),this.transactionLineItem=new mw(this),this.usBankAccount=new fw(this),this.usBankAccountVerification=new yw(this),this.webhookNotification=new gw(this),this.webhookTesting=new Iw(this)}};Od.exports={BraintreeGateway:is}});var kd=v((mb,qd)=>{"use strict";var ww={AndroidPayCard:"android_pay_card",ApplePayCard:"apple_pay_card",CreditCard:"credit_card",EuropeBankAccount:"europe_bank_account",LocalPayment:"local_payment",MetaCheckoutCard:"meta_checkout_card",MetaCheckoutToken:"meta_checkout_token",PayPalAccount:"paypal_account",PayPalHere:"paypal_here",SepaDirectDebitAccount:"sepa_debit_account",UsBankAccount:"us_bank_account",VenmoAccount:"venmo_account",VisaCheckoutCard:"visa_checkout_card"};qd.exports={PaymentInstrumentTypes:ww}});var Ld=v((fb,Rd)=>{"use strict";var hr=class{static initClass(){this.Address={CannotBeBlank:"81801",CompanyIsInvalid:"91821",CompanyIsTooLong:"81802",CountryCodeAlpha2IsNotAccepted:"91814",CountryCodeAlpha3IsNotAccepted:"91816",CountryCodeNumericIsNotAccepted:"91817",CountryNameIsNotAccepted:"91803",ExtendedAddressIsInvalid:"91823",ExtendedAddressIsTooLong:"81804",FirstNameIsInvalid:"91819",FirstNameIsTooLong:"81805",InconsistentCountry:"91815",IsInvalid:"91828",LastNameIsInvalid:"91820",LastNameIsTooLong:"81806",LocalityIsInvalid:"91824",LocalityIsTooLong:"81807",PostalCodeInvalidCharacters:"81813",PostalCodeIsInvalid:"91826",PostalCodeIsRequired:"81808",PostalCodeIsRequiredForCardBrandAndProcessor:"81828",PostalCodeIsTooLong:"81809",RegionIsInvalid:"91825",RegionIsTooLong:"81810",StateIsInvalidForSellerProtection:"81827",StreetAddressIsInvalid:"91822",StreetAddressIsRequired:"81811",StreetAddressIsTooLong:"81812",TooManyAddressesPerCustomer:"91818"},this.AndroidPayCard={AndroidPayCardsAreNotAccepted:"83708"},this.ApplePayCard={ApplePayCardsAreNotAccepted:"83501",CustomerIdIsRequiredForVaulting:"83502",TokenIsInUse:"93503",PaymentMethodNonceConsumed:"93504",PaymentMethodNonceUnknown:"93505",PaymentMethodNonceLocked:"93506",PaymentMethodNonceCardTypeIsNotAccepted:"83518",CannotUpdateApplePayCardUsingPaymentMethodNonce:"93507",NumberIsRequired:"93508",ExpirationMonthIsRequired:"93509",ExpirationYearIsRequired:"93510",CryptogramIsRequired:"93511",DecryptionFailed:"83512",Disabled:"93513",MerchantNotConfigured:"93514",MerchantKeysAlreadyConfigured:"93515",MerchantKeysNotConfigured:"93516",CertificateInvalid:"93517",CertificateMismatch:"93519",InvalidToken:"83520",PrivateKeyMismatch:"93521",KeyMismatchStoringCertificate:"93522"},this.AuthorizationFingerprint={InvalidCreatedAt:"93204",InvalidFormat:"93202",InvalidPublicKey:"93205",InvalidSignature:"93206",MissingFingerprint:"93201",OptionsNotAllowedWithoutCustomer:"93207",SignatureRevoked:"93203"},this.ClientToken={CustomerDoesNotExist:"92804",FailOnDuplicatePaymentMethodRequiresCustomerId:"92803",FailOnDuplicatePaymentMethodForCustomerRequiresCustomerId:"92805",InvalidDomainFormat:"92011",MakeDefaultRequiresCustomerId:"92801",MerchantAccountDoesNotExist:"92807",ProxyMerchantDoesNotExist:"92805",TooManyDomains:"92810",UnsupportedVersion:"92806",VerifyCardRequiresCustomerId:"92802"},this.CreditCard={BillingAddressConflict:"91701",BillingAddressFormatIsInvalid:"91744",BillingAddressIdIsInvalid:"91702",CannotUpdateCardUsingPaymentMethodNonce:"91735",CardholderNameIsTooLong:"81723",CreditCardTypeIsNotAccepted:"81703",CreditCardTypeIsNotAcceptedBySubscriptionMerchantAccount:"81718",CustomerIdIsInvalid:"91705",CustomerIdIsRequired:"91704",CvvIsInvalid:"81707",CvvIsRequired:"81706",CvvVerificationFailed:"81736",DuplicateCardExists:"81724",DuplicateCardExistsForCustomer:"81763",ExpirationDateConflict:"91708",ExpirationDateIsInvalid:"81710",ExpirationDateIsRequired:"81709",ExpirationDateYearIsInvalid:"81711",ExpirationMonthIsInvalid:"81712",ExpirationYearIsInvalid:"81713",InvalidParamsForCreditCardUpdate:"91745",InvalidVenmoSDKPaymentMethodCode:"91727",LimitExceededforDuplicatePaymentMethodCheckForCustomer:"81764",NetworkTokenizationAttributeCryptogramIsRequired:"81762",NumberHasInvalidLength:"81716",NumberIsInvalid:"81715",NumberIsProhibited:"81750",NumberIsRequired:"81714",NumberLengthIsInvalid:"81716",NumberMustBeTestNumber:"81717",PaymentMethodConflict:"81725",PaymentMethodIsNotACreditCard:"91738",PaymentMethodNonceCardTypeIsNotAccepted:"91734",PaymentMethodNonceConsumed:"91731",PaymentMethodNonceLocked:"91733",PaymentMethodNonceUnknown:"91732",PostalCodeVerificationFailed:"81737",TokenFormatIsInvalid:"91718",TokenInvalid:"91718",TokenIsInUse:"91719",TokenIsNotAllowed:"91721",TokenIsRequired:"91722",TokenIsTooLong:"91720",VenmoSDKPaymentMethodCodeCardTypeIsNotAccepted:"91726",VerificationNotSupportedOnThisMerchantAccount:"91730",VerificationAccountTypeIsInvald:"91757",VerificationAccountTypeNotSupported:"91758",Options:{UpdateExistingTokenIsInvalid:"91723",UpdateExistingTokenNotAllowed:"91729",VerificationAmountCannotBeNegative:"91739",VerificationAmountFormatIsInvalid:"91740",VerificationAmountIsTooLarge:"91752",VerificationAmountNotSupportedByProcessor:"91741",VerificationMerchantAccountIdIsInvalid:"91728",VerificationMerchantAccountIsForbidden:"91743",VerificationMerchantAccountIsSuspended:"91742",VerificationMerchantAccountCannotBeSubMerchantAccount:"91755"}},this.Customer={CompanyIsTooLong:"81601",CustomFieldIsInvalid:"91602",CustomFieldIsTooLong:"81603",EmailFormatIsInvalid:"81604",EmailIsRequired:"81606",EmailIsTooLong:"81605",FaxIsTooLong:"81607",FirstNameIsTooLong:"81608",IdIsInUse:"91609",IdIsInvalid:"91610",IdIsNotAllowed:"91611",IdIsRequired:"91613",IdIsTooLong:"91612",LastNameIsTooLong:"81613",PhoneIsTooLong:"81614",VaultedPaymentInstrumentNonceBelongsToDifferentCustomer:"91617",WebsiteFormatIsInvalid:"81616",WebsiteIsTooLong:"81615"},this.Descriptor={InternationalNameFormatIsInvalid:"92204",PhoneFormatIsInvalid:"92202",DynamicDescriptorsDisabled:"92203",NameFormatIsInvalid:"92201",InternationalPhoneFormatIsInvalid:"92205",UrlFormatIsInvalid:"92206"},this.Dispute={CanOnlyAddEvidenceToOpenDispute:"95701",CanOnlyRemoveEvidenceFromOpenDispute:"95702",CanOnlyAddEvidenceDocumentToDispute:"95703",CanOnlyAcceptOpenDispute:"95704",CanOnlyFinalizeOpenDispute:"95705",CanOnlyCreateEvidenceWithValidCategory:"95706",EvidenceContentDateInvalid:"95707",EvidenceContentTooLong:"95708",EvidenceContentARNTooLong:"95709",EvidenceContentPhoneTooLong:"95710",EvidenceCategoryTextOnly:"95711",EvidenceCategoryDocumentOnly:"95712",EvidenceCategoryNotForReasonCode:"95713",EvidenceCategoryDuplicate:"95714",EvidenceContentEmailInvalid:"95715",DigitalGoodsMissingEvidence:"95720",DigitalGoodsMissingDownloadDate:"95721",NonDisputedPriorTransactionEvidenceMissingARN:"95722",NonDisputedPriorTransactionEvidenceMissingDate:"95723",RecurringTransactionEvidenceMissingDate:"95724",RecurringTransactionEvidenceMissingARN:"95725",ValidEvidenceRequiredToFinalize:"95726",OptionalEvidenceRequiredForPriorTransactionResponses:"95727"},this.DocumentUpload={KindIsInvalid:"84901",FileIsTooLarge:"84902",FileTypeIsInvalid:"84903",FileIsMalformedOrEncrypted:"84904",FileIsTooLong:"84905",FileIsEmpty:"84906"},this.Merchant={CountryCannotBeBlank:"83603",CountryCodeAlpha2IsInvalid:"93607",CountryCodeAlpha2IsNotAccepted:"93606",CountryCodeAlpha3IsInvalid:"93605",CountryCodeAlpha3IsNotAccepted:"93604",CountryCodeNumericIsInvalid:"93609",CountryCodeNumericIsNotAccepted:"93608",CountryNameIsInvalid:"93611",CountryNameIsNotAccepted:"93610",CurrenciesAreInvalid:"93614",EmailFormatIsInvalid:"93602",EmailIsRequired:"83601",InconsistentCountry:"93612",PaymentMethodsAreInvalid:"93613",PaymentMethodsAreNotAllowed:"93615",MerchantAccountExistsForCurrency:"93616",CurrencyIsRequired:"93617",CurrencyIsInvalid:"93618",NoMerchantAccounts:"93619",MerchantAccountExistsForId:"93620",MerchantAccountNotAuthOnboarded:"93621"},this.MerchantAccount={ApplicantDetails:{AccountNumberIsInvalid:"82670",AccountNumberIsRequired:"82614",Address:{LocalityIsRequired:"82618",PostalCodeIsInvalid:"82630",PostalCodeIsRequired:"82619",RegionIsInvalid:"82664",RegionIsRequired:"82620",StreetAddressIsInvalid:"82629",StreetAddressIsRequired:"82617"},CompanyNameIsInvalid:"82631",CompanyNameIsRequiredWithTaxId:"82633",DateOfBirthIsInvalid:"82663",DateOfBirthIsRequired:"82612",Declined:"82626",DeclinedFailedKYC:"82623",DeclinedMasterCardMatch:"82622",DeclinedOFAC:"82621",DeclinedSsnInvalid:"82624",DeclinedSsnMatchesDeceased:"82625",EmailAddressIsInvalid:"82616",EmailAddressIsRequired:"82665",FirstNameIsInvalid:"82627",FirstNameIsRequired:"82609",LastNameIsInvalid:"82628",LastNameIsRequired:"82611",PhoneIsInvalid:"82636",RoutingNumberIsInvalid:"82635",RoutingNumberIsRequired:"82613",SsnIsInvalid:"82615",TaxIdIsInvalid:"82632",TaxIdIsRequiredWithCompanyName:"82634",TaxIdMustBeBlank:"82673"},Individual:{DateOfBirthIsInvalid:"82666",DateOfBirthIsRequired:"82639",EmailIsInvalid:"82643",EmailIsRequired:"82667",FirstNameIsInvalid:"82644",FirstNameIsRequired:"82637",LastNameIsInvalid:"82645",LastNameIsRequired:"82638",PhoneIsInvalid:"82656",SsnIsInvalid:"82642",Address:{StreetAddressIsRequired:"82657",LocalityIsRequired:"82658",PostalCodeIsRequired:"82659",RegionIsRequired:"82660",StreetAddressIsInvalid:"82661",PostalCodeIsInvalid:"82662",RegionIsInvalid:"82668"}},Business:{DbaNameIsInvalid:"82646",LegalNameIsInvalid:"82677",LegalNameIsRequiredWithTaxId:"82669",TaxIdIsInvalid:"82647",TaxIdIsRequiredWithLegalName:"82648",TaxIdMustBeBlank:"82672",Address:{StreetAddressIsInvalid:"82685",PostalCodeIsInvalid:"82686",RegionIsInvalid:"82684"}},Funding:{AccountNumberIsInvalid:"82671",AccountNumberIsRequired:"82641",DestinationIsInvalid:"82679",DestinationIsRequired:"82678",EmailIsInvalid:"82681",EmailIsRequired:"82680",MobilePhoneIsInvalid:"82683",MobilePhoneIsRequired:"82682",RoutingNumberIsInvalid:"82649",RoutingNumberIsRequired:"82640"},CannotBeUpdated:"82674",IdCannotBeUpdated:"82675",IdFormatIsInvalid:"82603",IdIsInUse:"82604",IdIsNotAllowed:"82605",IdIsTooLong:"82602",MasterMerchantAccountIdCannotBeUpdated:"82676",MasterMerchantAccountIdIsInvalid:"82607",MasterMerchantAccountIdIsRequired:"82606",MasterMerchantAccountMustBeActive:"82608",TosAcceptedIsRequired:"82610"},this.OAuth={InvalidGrant:"93801",InvalidCredentials:"93802",InvalidScope:"93803",InvalidRequest:"93804",UnsupportedGrantType:"93805"},this.PaymentMethod={CannotForwardPaymentMethodType:"93106",CustomerIdIsInvalid:"93105",CustomerIdIsRequired:"93104",NonceIsInvalid:"93102",NonceIsRequired:"93103",PaymentMethodParamsAreRequired:"93101",PaymentMethodNonceConsumed:"93107",PaymentMethodNonceUnknown:"93108",PaymentMethodNonceLocked:"93109",PaymentMethodNoLongerSupported:"93117",UsBankAccountVerificationMethodIsInvalid:"93121"},this.PayPalAccount={AuthExpired:"92911",CannotHaveBothAccessTokenAndConsentCode:"82903",CannotHaveFundingSourceWithoutAccessToken:"92912",CannotUpdatePayPalAccountUsingPaymentMethodNonce:"92914",CannotVaultOneTimeUsePayPalAccount:"82902",ConsentCodeOrAccessTokenIsRequired:"82901",CustomerIdIsRequiredForVaulting:"82905",InvalidFundingSourceSelection:"92913",InvalidParamsForPayPalAccountUpdate:"92915",PayPalAccountsAreNotAccepted:"82904",PayPalCommunicationError:"92910",PaymentMethodNonceConsumed:"92907",PaymentMethodNonceLocked:"92909",PaymentMethodNonceUnknown:"92908",TokenIsInUse:"92906"},this.PayPalPaymentResource={NonceExpired:"97301",IdNotSupported:"97302",NonceRequired:"97303",InvalidEmail:"97304",EmialTooLong:"97305",ExpectedLineItemColletion:"97306",ExpectedLineItemHash:"97307",ExpectedLineItemDebit:"97308",InvalidUnitAmount:"97309",InvalidUnitTaxAmount:"97310",IsoCodeRequired:"97311",IsoCodeUnsupported:"97312",ShippingFieldsMIissing:"97313",InvalidAmountBreakdown:"97314",ExpectedShippingOptionCollection:"97315",ShippingOptionsRequired:"97316",ShippingOptionFieldsMissing:"97317",InavlidShippingOptionType:"97318",ShippingOptionIdReused:"97319",TooManyShippingOptionsSelected:"97320",ShippingOptionMustMatchBreakdown:"97321",LineItemsShouldMatchTotal:"97322",LineItemsTaxShouldMatchTotal:"97323",PatchCallFailed:"97324",InvalidAmount:"97325",ShippingIdTooLong:"97326",ShippingLabelTooLong:"97327",ShippingFullNameTooLong:"97328",ShippingAddressTooLong:"97329",ShippingExtendedAddressTooLong:"97330",ShippingLocalityTooLong:"97331",ShippingRegionTooLong:"97332",CountryCodeTooLong:"97333",NationalNumberTooLong:"97334",PostalCodeTooLong:"97335",DescriptionTooLong:"97336",CustomFieldTooLong:"97337",OrderIdTooLong:"97338"},this.SepaDirectDebitAccount={PaymentMethodMandateTypeIsNotSupported:"87115",PaymentMethodCustomerIdIsInvalid:"87116",PaymentMethodCustomerIdIsRequired:"87117"},this.SettlementBatchSummary={SettlementDateIsInvalid:"82302",SettlementDateIsRequired:"82301",CustomFieldIsInvalid:"82303"},this.Subscription={BillingDayOfMonthCannotBeUpdated:"91918",BillingDayOfMonthIsInvalid:"91914",BillingDayOfMonthMustBeNumeric:"91913",CannotAddDuplicateAddonOrDiscount:"91911",CannotEditCanceledSubscription:"81901",CannotEditExpiredSubscription:"81910",CannotEditPriceChangingFieldsOnPastDueSubscription:"91920",FirstBillingDateCannotBeInThePast:"91916",FirstBillingDateCannotBeUpdated:"91919",FirstBillingDateIsInvalid:"91915",IdIsInUse:"81902",InconsistentNumberOfBillingCycles:"91908",InconsistentStartDate:"91917",InvalidRequestFormat:"91921",MerchantAccountDoesNotSupportInstrumentType:"91930",MerchantAccountIdIsInvalid:"91901",MismatchCurrencyISOCode:"91923",NumberOfBillingCyclesCannotBeBlank:"91912",NumberOfBillingCyclesIsTooSmall:"91909",NumberOfBillingCyclesMustBeGreaterThanZero:"91907",NumberOfBillingCyclesMustBeNumeric:"91906",PaymentMethodNonceCardTypeIsNotAccepted:"91924",PaymentMethodNonceInstrumentTypeDoesNotSupportSubscriptions:"91929",PaymentMethodNonceIsInvalid:"91925",PaymentMethodNonceNotAssociatedWithCustomer:"91926",PaymentMethodNonceUnvaultedCardIsNotAccepted:"91927",PaymentMethodTokenCardTypeIsNotAccepted:"91902",PaymentMethodTokenInstrumentTypeDoesNotSupportSubscriptions:"91928",PaymentMethodTokenIsInvalid:"91903",PaymentMethodTokenNotAssociatedWithCustomer:"91905",PlanBillingFrequencyCannotBeUpdated:"91922",PlanIdIsInvalid:"91904",PriceCannotBeBlank:"81903",PriceFormatIsInvalid:"81904",PriceIsTooLarge:"81923",StatusIsCanceled:"81905",TokenFormatIsInvalid:"81906",TrialDurationFormatIsInvalid:"81907",TrialDurationIsRequired:"81908",TrialDurationUnitIsInvalid:"81909",Modification:{AmountCannotBeBlank:"92003",AmountIsInvalid:"92002",AmountIsTooLarge:"92023",CannotEditModificationsOnPastDueSubscription:"92022",CannotUpdateAndRemove:"92015",ExistingIdIsIncorrectKind:"92020",ExistingIdIsInvalid:"92011",ExistingIdIsRequired:"92012",IdToRemoveIsIncorrectKind:"92021",IdToRemoveIsInvalid:"92025",IdToRemoveIsNotPresent:"92016",InconsistentNumberOfBillingCycles:"92018",InheritedFromIdIsInvalid:"92013",InheritedFromIdIsRequired:"92014",Missing:"92024",NumberOfBillingCyclesCannotBeBlank:"92017",NumberOfBillingCyclesIsInvalid:"92005",NumberOfBillingCyclesMustBeGreaterThanZero:"92019",QuantityCannotBeBlank:"92004",QuantityIsInvalid:"92001",QuantityMustBeGreaterThanZero:"92010"}},this.Transaction={AdjustmentAmountMustBeGreaterThanZero:"95605",AmountCannotBeNegative:"81501",AmountDoesNotMatch3DSecureAmount:"91585",AmountFormatIsInvalid:"81503",AmountIsRequired:"81502",AmountIsTooLarge:"81528",AmountMustBeGreaterThanZero:"81531",AmountNotSupportedByProcessor:"815193",BillingAddressConflict:"91530",BillingPhoneNumberIsInvalid:"915206",CannotBeVoided:"91504",CannotCancelRelease:"91562",CannotCloneCredit:"91543",CannotCloneMarketplaceTransaction:"915137",CannotCloneTransactionWithPayPalAccount:"91573",CannotCloneTransactionWithVaultCreditCard:"91540",CannotCloneUnsuccessfulTransaction:"91542",CannotCloneVoiceAuthorizations:"91541",CannotHoldInEscrow:"91560",CannotPartiallyRefundEscrowedTransaction:"91563",CannotRefundCredit:"91505",CannotRefundSettlingTransaction:"91574",CannotRefundUnlessSettled:"91506",CannotRefundWithPendingMerchantAccount:"91559",CannotRefundWithSuspendedMerchantAccount:"91538",CannotReleaseFromEscrow:"91561",CannotSimulateSettlement:"91575",CannotSubmitForPartialSettlement:"915103",CannotSubmitForSettlement:"91507",CannotUpdateTransactionDetailsNotSubmittedForSettlement:"915129",ChannelIsTooLong:"91550",CreditCardIsRequired:"91508",CustomFieldIsInvalid:"91526",CustomFieldIsTooLong:"81527",CustomerDefaultPaymentMethodCardTypeIsNotAccepted:"81509",CustomerDoesNotHaveCreditCard:"91511",CustomerIdIsInvalid:"91510",DiscountAmountFormatIsInvalid:"915159",DiscountAmountCannotBeNegative:"915160",DiscountAmountIsTooLarge:"915161",ExternalVault:{StatusIsInvalid:"915175",StatusWithPreviousNetworkTransactionIdIsInvalid:"915177",PreviousNetworkTransactionIdIsInvalid:"915179",CardTypeIsInvalid:"915178"},ExchangeRateQuoteIdIsTooLong:"915229",FailedAuthAdjustmentAllowRetry:"95603",FailedAuthAdjustmentHardDecline:"95602",FinalAuthSubmitForSettlementForDifferentAmount:"95601",HasAlreadyBeenRefunded:"91512",MerchantAccountDoesNotMatch3DSecureMerchantAccount:"91584",MerchantAccountDoesNotSupportMOTO:"91558",MerchantAccountDoesNotSupportRefunds:"91547",MerchantAccountIdDoesNotMatchSubscription:"915180",MerchantAccountIdIsInvalid:"91513",MerchantAccountIsSuspended:"91514",NoNetAmountToPerformAuthAdjustment:"95606",Options:{PayPal:{CustomFieldTooLong:"91580"},CreditCard:{AccountTypeIsInvalid:"915184",AccountTypeNotSupported:"915185",AccountTypeDebitDoesNotSupportAuths:"915186"},SubmitForSettlementIsRequiredForCloning:"91544",SubmitForSettlementIsRequiredForPayPalUnilateral:"91582",UseBillingForShippingDisabled:"91572",VaultIsDisabled:"91525"},OrderIdIsTooLong:"91501",PayPalAuthExpired:"91579",PayPalNotEnabled:"91576",PayPalVaultRecordMissingData:"91583",PaymentInstrumentNotSupportedByMerchantAccount:"91577",PaymentInstrumentTypeIsNotAccepted:"915101",PaymentInstrumentWithExternalVaultIsInvalid:"915176",PaymentMethodConflict:"91515",PaymentMethodConflictWithVenmoSDK:"91549",PaymentMethodDoesNotBelongToCustomer:"91516",PaymentMethodDoesNotBelongToSubscription:"91527",PaymentMethodNonceCardTypeIsNotAccepted:"91567",PaymentMethodNonceConsumed:"91564",PaymentMethodNonceHasNoValidPaymentInstrumentType:"91569",PaymentMethodNonceLocked:"91566",PaymentMethodNonceUnknown:"91565",PaymentMethodTokenCardTypeIsNotAccepted:"91517",PaymentMethodTokenIsInvalid:"91518",ProcessorAuthorizationCodeCannotBeSet:"91519",ProcessorAuthorizationCodeIsInvalid:"81520",ProcessorDoesNotSupportAuths:"915104",ProcessorDoesNotSupportAuthAdjustment:"915222",ProcessorDoesNotSupportCredits:"91546",ProcessorDoesNotSupportIncrementalAuth:"915220",ProcessorDoesNotSupportMotoForCardType:"915195",ProcessorDoesNotSupportPartialAuthReversal:"915221",ProcessorDoesNotSupportPartialSettlement:"915102",ProcessorDoesNotSupportUpdatingOrderId:"915107",ProcessorDoesNotSupportUpdatingDescriptor:"915108",ProcessorDoesNotSupportUpdatingTransactionDetails:"915130",ProcessorDoesNotSupportVoiceAuthorizations:"91545",ProductSkuIsInvalid:"915202",PurchaseOrderNumberIsInvalid:"91548",PurchaseOrderNumberIsTooLong:"91537",RefundAmountIsTooLarge:"91521",RefundAuthHardDeclined:"915200",RefundAuthSoftDeclined:"915201",ScaExemptionIsInvalid:"915213",ServiceFeeAmountCannotBeNegative:"91554",ServiceFeeAmountFormatIsInvalid:"91555",ServiceFeeAmountIsTooLarge:"91556",ServiceFeeAmountNotAllowedOnMasterMerchantAccount:"91557",ServiceFeeIsNotAllowedOnCredits:"91552",ServiceFeeNotAcceptedForPayPal:"91578",SettlementAmountIsLessThanServiceFeeAmount:"91551",SettlementAmountIsTooLarge:"91522",ShippingAddressDoesntMatchCustomer:"91581",ShippingAmountFormatIsInvalid:"915162",ShippingAmountCannotBeNegative:"915163",ShippingAmountIsTooLarge:"915164",ShippingMethodIsInvalid:"915203",ShippingPhoneNumberIsInvalid:"915204",ShipsFromPostalCodeIsTooLong:"915165",ShipsFromPostalCodeIsInvalid:"915166",ShipsFromPostalCodeInvalidCharacters:"915167",SubMerchantAccountRequiresServiceFeeAmount:"91553",SubscriptionDoesNotBelongToCustomer:"91529",SubscriptionIdIsInvalid:"91528",SubscriptionStatusMustBePastDue:"91531",TaxAmountCannotBeNegative:"81534",TaxAmountFormatIsInvalid:"81535",TaxAmountIsRequiredForAibSwedish:"815224",TaxAmountIsTooLarge:"81536",ThreeDSecureTokenIsInvalid:"91568",ThreeDSecureTransactionDataDoesntMatchVerify:"91570",ThreeDSecureAuthenticationFailed:"81571",ThreeDSecureEciFlagIsRequired:"915113",ThreeDSecureEciFlagIsInvalid:"915114",ThreeDSecureXidIsRequired:"915115",ThreeDSecureCavvIsRequired:"915116",ThreeDSecureThreeDSecureVersionIsInvalid:"915119",ThreeDSecureAuthenticationResponseIsInvalid:"915120",ThreeDSecureDirectoryResponseIsInvalid:"915121",ThreeDSecureCavvAlgorithmIsInvalid:"915122",ThreeDSecureMerchantAccountDoesNotSupportCardType:"915131",ThreeDSecureAuthenticationIdIsInvalid:"915196",ThreeDSecurePaymentMethodDoesntMatchThreeDSecureAuthenticationPaymentMethod:"915197",TransactionIsNotEligibleForAdjustment:"915219",TransactionMustBeInStateAuthorized:"915218",TransactionSettlementAmountIsLessThanServiceFeeAmount:"91551",TooManyLineItems:"915157",LineItemsExpected:"915158",TypeIsInvalid:"91523",TypeIsRequired:"91524",UnsupportedVoiceAuthorization:"91539",UsBankAccountNonceMustBePlaidVerified:"915171",UsBankAccountNotVerified:"915172",TransactionSourceIsInvalid:"915133",IndustryData:{IndustryTypeIsInvalid:"93401",Lodging:{EmptyData:"93402",FolioNumberIsInvalid:"93403",CheckInDateIsInvalid:"93404",CheckOutDateIsInvalid:"93405",CheckOutDateMustFollowCheckInDate:"93406",UnknownDataField:"93407",RoomRateMustBeGreaterThanZero:"93433",RoomRateFormatIsInvalid:"93434",RoomRateIsTooLarge:"93435",RoomTaxMustBeGreaterThanZero:"93436",RoomTaxFormatIsInvalid:"93437",RoomTaxIsTooLarge:"93438",NoShowIndicatorIsInvalid:"93439",AdvancedDepositIndicatorIsInvalid:"93440",FireSafetyIndicatorIsInvalid:"93441",PropertyPhoneIsInvalid:"93442"},TravelCruise:{EmptyData:"93408",UnknownDataField:"93409",TravelPackageIsInvalid:"93410",DepartureDateIsInvalid:"93411",CheckInDateIsInvalid:"93412",CheckOutDateIsInvalid:"93413"},TravelFlight:{EmptyData:"93414",UnknownDataField:"93415",CustomerCodeIsTooLong:"93416",FareAmountCannotBeNegative:"93417",FareAmountFormatIsInvalid:"93418",FareAmountIsTooLarge:"93419",FeeAmountCannotBeNegative:"93420",FeeAmountFormatIsInvalid:"93421",FeeAmountIsTooLarge:"93422",IssuedDateFormatIsInvalid:"93423",IssuingCarrierCodeIsTooLong:"93424",PassengerMiddleInitialIsTooLong:"93425",RestrictedTicketIsRequired:"93426",TaxAmountCannotBeNegative:"93427",TaxAmountFormatIsInvalid:"93428",TaxAmountIsTooLarge:"93429",TicketNumberIsTooLong:"93430",LegsExpected:"93431",TooManyLegs:"93432"},Leg:{TravelFlight:{ArrivalAirportCodeIsTooLong:"96301",ArrivalTimeFormatIsInvalid:"96302",CarrierCodeIsTooLong:"96303",ConjunctionTicketIsTooLong:"96304",CouponNumberIsTooLong:"96305",DepartureAirportCodeIsTooLong:"96306",DepartureTimeFormatIsInvalid:"96307",ExchangeTicketIsTooLong:"96308",FareAmountCannotBeNegative:"96309",FareAmountFormatIsInvalid:"96310",FareAmountIsTooLarge:"96311",FareBasisCodeIsTooLong:"96312",FeeAmountCannotBeNegative:"96313",FeeAmountFormatIsInvalid:"96314",FeeAmountIsTooLarge:"96315",ServiceClassIsTooLong:"96316",TaxAmountCannotBeNegative:"96317",TaxAmountFormatIsInvalid:"96318",TaxAmountIsTooLarge:"96319",TicketNumberIsTooLong:"96320"}},AdditionalCharge:{KindIsInvalid:"96601",KindMustBeUnique:"96602",AmountMustBeGreaterThanZero:"96603",AmountFormatIsInvalid:"96604",AmountIsTooLarge:"96605",AmountIsRequired:"96606"}},LineItem:{CommodityCodeIsTooLong:"95801",DescriptionIsTooLong:"95803",DiscountAmountFormatIsInvalid:"95804",DiscountAmountIsTooLarge:"95805",DiscountAmountCannotBeNegative:"95806",KindIsInvalid:"95807",KindIsRequired:"95808",NameIsRequired:"95822",NameIsTooLong:"95823",ProductCodeIsTooLong:"95809",QuantityFormatIsInvalid:"95810",QuantityIsRequired:"95811",QuantityIsTooLarge:"95812",TotalAmountFormatIsInvalid:"95813",TotalAmountIsRequired:"95814",TotalAmountIsTooLarge:"95815",TotalAmountMustBeGreaterThanZero:"95816",UnitAmountFormatIsInvalid:"95817",UnitAmountIsRequired:"95818",UnitAmountIsTooLarge:"95819",UnitAmountMustBeGreaterThanZero:"95820",UnitOfMeasureIsTooLong:"95821",UnitTaxAmountFormatIsInvalid:"95824",UnitTaxAmountIsTooLarge:"95825",UnitTaxAmountCannotBeNegative:"95826",TaxAmountFormatIsInvalid:"95827",TaxAmountIsTooLarge:"95828",TaxAmountCannotBeNegative:"95829",UpcCodeIsMissing:"95830",UpcCodeIsTooLong:"95831",UpcTypeIsMissing:"95832",UpcTypeIsInvalid:"95833"}},this.UsBankAccountVerification={NotConfirmable:"96101",MustBeMicroTransfersVerification:"96102",AmountsDoNotMatch:"96103",TooManyConfirmationAttempts:"96104",UnableToConfirmDepositAmounts:"96105",InvalidDepositAmounts:"96106"},this.Verification={Options:{AmountCannotBeNegative:"94201",AmountFormatIsInvalid:"94202",AmountIsTooLarge:"94207",AmountNotSupportedByProcessor:"94203",MerchantAccountIdIsInvalid:"94204",MerchantAccountIsSuspended:"94205",MerchantAccountIsForbidden:"94206",MerchantAccountCannotBeSubMerchantAccount:"94208",AccountTypeIsInvalid:"942184",AccountTypeNotSupported:"942185"},ThreeDSecureAuthenticationIdIsInvalid:"942196",ThreeDSecureAuthenticationIdDoesntMatchNonceThreeDSecureAuthentication:"942198",ThreeDSecureTransactionPaymentMethodDoesntMatchThreeDSecureAuthenticationPaymentMethod:"942197",ThreeDSecureAuthenticationIdWithThreeDSecurePassThruIsInvalid:"942199",ThreeDSecureAuthenticationFailed:"94271",ThreeDSecureTokenIsInvalid:"94268",ThreeDSecureVerificationDataDoesntMatchVerify:"94270",MerchantAccountDoesNotSupport3DSecure:"942169",MerchantAcountDoesNotMatch3DSecureMerchantAccount:"94284",AmountDoesNotMatch3DSecureAmount:"94285",ThreeDSecurePassThru:{EciFlagIsRequired:"942113",EciFlagIsInvalid:"942114",CavvIsRequired:"942116",ThreeDSecureVersionIsRequired:"942117",ThreeDSecureVersionIsInvalid:"942119",AuthenticationResponseIsInvalid:"942120",DirectoryResponseIsInvalid:"942121",CavvAlgorithmIsInvalid:"942122"}},this.RiskData={CustomerBrowserIsTooLong:"94701",CustomerDeviceIdIsTooLong:"94702",CustomerLocationZipInvalidCharacters:"94703",CustomerLocationZipIsInvalid:"94704",CustomerLocationZipIsTooLong:"94705",CustomerTenureIsTooLong:"94706"}}};hr.initClass();Rd.exports={ValidationErrorCodes:hr}});var Vd=v((yb,Ud)=>{"use strict";var Aw={CountryOfIssuance:"USA",IssuingBank:"NETWORK ONLY"};Ud.exports={CreditCardDefaults:Aw}});var Bd=v((gb,jd)=>{"use strict";var Cw={CardTypeIndicators:{Commercial:"4111111111131010",CountryOfIssuance:"4111111111121102",Debit:"4117101010101010",DurbinRegulated:"4111161010101010",Fraud:"4000111111111511",Healthcare:"4111111510101010",Hiper:"6370950000000005",HiperCard:"6062820524845321",IssuingBank:"4111111141010101",No:"4111111111310101",Prepaid:"4111111111111210",PrepaidReloadable:"4229989900000002",Payroll:"4111111114101010",RiskThresholds:"4111130000000003",Unknown:"4111111111112101",Visa:"4012888888881881"},AmexPayWithPoints:{Success:"371260714673002",IneligibleCard:"378267515471109",InsufficientPoints:"371544868764018"},Dispute:{Chargeback:"4023898493988028"}};jd.exports={CreditCardNumbers:Cw}});var $d=v((Ib,Gd)=>{"use strict";var vw={Approve:"approve_me",InsufficientFundsContactUs:"insufficient_funds__contact",AccountNotAuthorizedContactUs:"account_not_authorized__contact",BankRejectedUpdateFundingInformation:"bank_rejected__update",BankRejectedNone:"bank_rejected__none",UsBankMerchantAccount:"us_bank_merchant_account",AnotherUsBankMerchantAccount:"another_us_bank_merchant_account"};Gd.exports={MerchantAccountTest:vw}});var Hd=v((wb,Xd)=>{"use strict";var bw={Transactable:"fake-valid-nonce",Consumed:"fake-consumed-nonce",PayPalOneTimePayment:"fake-paypal-one-time-nonce",PayPalFuturePayment:"fake-paypal-future-nonce",PayPalBillingAgreement:"fake-paypal-billing-agreement-nonce",ApplePayVisa:"fake-apple-pay-visa-nonce",ApplePayMasterCard:"fake-apple-pay-mastercard-nonce",ApplePayAmEx:"fake-apple-pay-amex-nonce",ApplePayMpan:"fake-apple-pay-mpan-nonce",AbstractTransactable:"fake-abstract-transactable-nonce",Europe:"fake-europe-bank-account-nonce",AndroidPay:"fake-android-pay-nonce",AndroidPayDiscover:"fake-android-pay-discover-nonce",AndroidPayVisa:"fake-android-pay-visa-nonce",AndroidPayMasterCard:"fake-android-pay-mastercard-nonce",AndroidPayAmEx:"fake-android-pay-amex-nonce",ThreeDSecureVisaFullAuthentication:"fake-three-d-secure-visa-full-authentication-nonce",ThreeDSecureVisaLookupTimeout:"fake-three-d-secure-visa-lookup-timeout-nonce",ThreeDSecureVisaFailedSignature:"fake-three-d-secure-visa-failed-signature-nonce",ThreeDSecureVisaFailedAuthentication:"fake-three-d-secure-visa-failed-authentication-nonce",ThreeDSecureVisaAttemptsNonParticipating:"fake-three-d-secure-visa-attempts-non-participating-nonce",ThreeDSecureVisaNoteEnrolled:"fake-three-d-secure-visa-not-enrolled-nonce",ThreeDSecureVisaUnavailable:"fake-three-d-secure-visa-unavailable-nonce",ThreeDSecureVisaMPILookupError:"fake-three-d-secure-visa-mpi-lookup-error-nonce",ThreeDSecureVisaMPIAuthenticateError:"fake-three-d-secure-visa-mpi-authenticate-error-nonce",ThreeDSecureVisaAuthenticationUnavailable:"fake-three-d-secure-visa-authentication-unavailable-nonce",ThreeDSecureVisaBypassedAuthentication:"fake-three-d-secure-visa-bypassed-authentication-nonce",ThreeDSecureTwoVisaSuccessfulFrictionlessAuthentication:"fake-three-d-secure-two-visa-successful-frictionless-authentication-nonce",ThreeDSecureTwoVisaSuccessfulStepUpAuthentication:"fake-three-d-secure-two-visa-successful-step-up-authentication-nonce",ThreeDSecureTwoVisaErrorOnLookup:"fake-three-d-secure-two-visa-error-on-lookup-nonce",ThreeDSecureTwoVisaTimeoutOnLookup:"fake-three-d-secure-two-visa-timeout-on-lookup-nonce",TransactableVisa:"fake-valid-visa-nonce",TransactableAmEx:"fake-valid-amex-nonce",TransactableMasterCard:"fake-valid-mastercard-nonce",TransactableDiscover:"fake-valid-discover-nonce",TransactableJCB:"fake-valid-jcb-nonce",TransactableMaestro:"fake-valid-maestro-nonce",TransactableDinersClub:"fake-valid-dinersclub-nonce",TransactablePrepaid:"fake-valid-prepaid-nonce",TransactablePrepaidReloadable:"fake-valid-prepaid-reloadable-nonce",TransactableCommercial:"fake-valid-commercial-nonce",TransactableDurbinRegulated:"fake-valid-durbin-regulated-nonce",TransactableHealthcare:"fake-valid-healthcare-nonce",TransactableDebit:"fake-valid-debit-nonce",TransactablePayroll:"fake-valid-payroll-nonce",TransactableNoIndicators:"fake-valid-no-indicators-nonce",TransactableUnknownIndicators:"fake-valid-unknown-indicators-nonce",TransactableCountryOfIssuanceUSA:"fake-valid-country-of-issuance-usa-nonce",TransactableCountryOfIssuanceCAD:"fake-valid-country-of-issuance-cad-nonce",TransactableIssuingBankNetworkOnly:"fake-valid-issuing-bank-network-only-nonce",TransactablePinlessDebitVisa:"fake-pinless-debit-visa-nonce",ProcessorDeclinedVisa:"fake-processor-declined-visa-nonce",ProcessorDeclinedMasterCard:"fake-processor-declined-mastercard-nonce",ProcessorDeclinedAmEx:"fake-processor-declined-amex-nonce",ProcessorDeclinedDiscover:"fake-processor-declined-discover-nonce",ProcessorFailureJCB:"fake-processor-failure-jcb-nonce",LuhnInvalid:"fake-luhn-invalid-nonce",LocalPayment:"fake-local-payment-method-nonce",PayPalFuturePaymentRefreshToken:"fake-paypal-future-refresh-token-nonce",GatewayRejectedFraud:"fake-gateway-rejected-fraud-nonce",GatewayRejectedRiskThresholds:"fake-gateway-rejected-risk-thresholds-nonce",VenmoAccount:"fake-venmo-account-nonce",VenmoAccountTokenIssuanceError:"fake-token-issuance-error-venmo-account-nonce",VisaCheckoutAmEx:"fake-visa-checkout-amex-nonce",VisaCheckoutDiscover:"fake-visa-checkout-discover-nonce",VisaCheckoutMasterCard:"fake-visa-checkout-mastercard-nonce",VisaCheckoutVisa:"fake-visa-checkout-visa-nonce",SamsungPayAmEx:"tokensam_fake_american_express",SamsungPayDiscover:"tokensam_fake_discover",SamsungPayMasterCard:"tokensam_fake_mastercard",SamsungPayVisa:"tokensam_fake_visa",SepaDirectDebit:"fake-sepa-direct-debit-nonce",UsBankAccount:"fake-us-bank-account-nonce",MetaCheckoutCard:"fake-meta-checkout-card-nonce",MetaCheckoutToken:"fake-meta-checkout-token-nonce"};Xd.exports={Nonces:bw}});var Wd=v((Ab,Kd)=>{"use strict";var Tw={Authorize:"1000.00",Decline:"2000.00",Fail:"3000.00"};Kd.exports={TransactionAmounts:Tw}});var Qd=v((Cb,zd)=>{"use strict";var Pw=yr().version,Dw=tt().Environment,Sw=Fd().BraintreeGateway,Nw=Tt(),Ew=Nr().errorTypes,_w=X(),Mw=ye().Transaction,xw=fe().CreditCard,Ow=Ge().Dispute,Fw=Ne().PayPalAccount,qw=Fe().AndroidPayCard,kw=Oe().ApplePayCard,Rw=Gt().VenmoAccount,Lw=xt().VisaCheckoutCard,Uw=Ot().SamsungPayCard,Vw=Be().CreditCardVerification,jw=vi().Plan,Bw=Je().Subscription,Gw=Ye().MerchantAccount,$w=kd().PaymentInstrumentTypes,Xw=dr().WebhookNotification,Hw=Oi().TestingGateway,Kw=$e().UsBankAccountVerification,Ww=Ld().ValidationErrorCodes,zw=Vd().CreditCardDefaults,Qw=Bd().CreditCardNumbers,Yw=$d().MerchantAccountTest,Jw=Hd().Nonces,Zw=Wd().TransactionAmounts,eA={CreditCardDefaults:zw,CreditCardNumbers:Qw,MerchantAccountTest:Yw,Nonces:Jw,TransactionAmounts:Zw};zd.exports={BraintreeGateway:Sw,GraphQL:Nw,version:Pw,Environment:Dw,errorTypes:Ew,exceptions:_w,Transaction:Mw,CreditCard:xw,Dispute:Ow,PayPalAccount:Fw,AndroidPayCard:qw,ApplePayCard:kw,VenmoAccount:Rw,VisaCheckoutCard:Lw,SamsungPayCard:Uw,CreditCardVerification:Vw,Plan:jw,Subscription:Bw,MerchantAccount:Gw,PaymentInstrumentTypes:$w,WebhookNotification:Xw,TestingGateway:Hw,UsBankAccountVerification:Kw,ValidationErrorCodes:Ww,Test:eA}});var Jd=v((vb,Yd)=>{"use strict";Yd.exports=Qd()});var Zd=v((bb,tA)=>{tA.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var nh=v((Tb,we)=>{var ss=require("fs"),os=require("path"),rA=require("os"),nA=require("crypto"),iA=Zd(),as=iA.version,sA=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function oA(n){let e={},t=n.toString();t=t.replace(/\r\n?/mg,`
`);let r;for(;(r=sA.exec(t))!=null;){let i=r[1],o=r[2]||"";o=o.trim();let s=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),s==='"'&&(o=o.replace(/\\n/g,`
`),o=o.replace(/\\r/g,"\r")),e[i]=o}return e}function aA(n){let e=rh(n),t=Q.configDotenv({path:e});if(!t.parsed){let s=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw s.code="MISSING_DATA",s}let r=th(n).split(","),i=r.length,o;for(let s=0;s<i;s++)try{let l=r[s].trim(),h=lA(t,l);o=Q.decrypt(h.ciphertext,h.key);break}catch(l){if(s+1>=i)throw l}return Q.parse(o)}function cA(n){console.log(`[dotenv@${as}][INFO] ${n}`)}function uA(n){console.log(`[dotenv@${as}][WARN] ${n}`)}function pr(n){console.log(`[dotenv@${as}][DEBUG] ${n}`)}function th(n){return n&&n.DOTENV_KEY&&n.DOTENV_KEY.length>0?n.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function lA(n,e){let t;try{t=new URL(e)}catch(l){if(l.code==="ERR_INVALID_URL"){let h=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw h.code="INVALID_DOTENV_KEY",h}throw l}let r=t.password;if(!r){let l=new Error("INVALID_DOTENV_KEY: Missing key part");throw l.code="INVALID_DOTENV_KEY",l}let i=t.searchParams.get("environment");if(!i){let l=new Error("INVALID_DOTENV_KEY: Missing environment part");throw l.code="INVALID_DOTENV_KEY",l}let o=`DOTENV_VAULT_${i.toUpperCase()}`,s=n.parsed[o];if(!s){let l=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);throw l.code="NOT_FOUND_DOTENV_ENVIRONMENT",l}return{ciphertext:s,key:r}}function rh(n){let e=null;if(n&&n.path&&n.path.length>0)if(Array.isArray(n.path))for(let t of n.path)ss.existsSync(t)&&(e=t.endsWith(".vault")?t:`${t}.vault`);else e=n.path.endsWith(".vault")?n.path:`${n.path}.vault`;else e=os.resolve(process.cwd(),".env.vault");return ss.existsSync(e)?e:null}function eh(n){return n[0]==="~"?os.join(rA.homedir(),n.slice(1)):n}function dA(n){cA("Loading env from encrypted .env.vault");let e=Q._parseVault(n),t=process.env;return n&&n.processEnv!=null&&(t=n.processEnv),Q.populate(t,e,n),{parsed:e}}function hA(n){let e=os.resolve(process.cwd(),".env"),t="utf8",r=!!(n&&n.debug);n&&n.encoding?t=n.encoding:r&&pr("No encoding is specified. UTF-8 is used by default");let i=[e];if(n&&n.path)if(!Array.isArray(n.path))i=[eh(n.path)];else{i=[];for(let h of n.path)i.push(eh(h))}let o,s={};for(let h of i)try{let f=Q.parse(ss.readFileSync(h,{encoding:t}));Q.populate(s,f,n)}catch(f){r&&pr(`Failed to load ${h} ${f.message}`),o=f}let l=process.env;return n&&n.processEnv!=null&&(l=n.processEnv),Q.populate(l,s,n),o?{parsed:s,error:o}:{parsed:s}}function pA(n){if(th(n).length===0)return Q.configDotenv(n);let e=rh(n);return e?Q._configVault(n):(uA(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),Q.configDotenv(n))}function mA(n,e){let t=Buffer.from(e.slice(-64),"hex"),r=Buffer.from(n,"base64"),i=r.subarray(0,12),o=r.subarray(-16);r=r.subarray(12,-16);try{let s=nA.createDecipheriv("aes-256-gcm",t,i);return s.setAuthTag(o),`${s.update(r)}${s.final()}`}catch(s){let l=s instanceof RangeError,h=s.message==="Invalid key length",f=s.message==="Unsupported state or unable to authenticate data";if(l||h){let b=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw b.code="INVALID_DOTENV_KEY",b}else if(f){let b=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw b.code="DECRYPTION_FAILED",b}else throw s}}function fA(n,e,t={}){let r=!!(t&&t.debug),i=!!(t&&t.override);if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(n,o)?(i===!0&&(n[o]=e[o]),r&&pr(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):n[o]=e[o]}var Q={configDotenv:hA,_configVault:dA,_parseVault:aA,config:pA,decrypt:mA,parse:oA,populate:fA};we.exports.configDotenv=Q.configDotenv;we.exports._configVault=Q._configVault;we.exports._parseVault=Q._parseVault;we.exports.config=Q.config;we.exports.decrypt=Q.decrypt;we.exports.parse=Q.parse;we.exports.populate=Q.populate;we.exports=Q});var sh=De(require("http"),1),oh=De(require("https"),1),ne=De(require("fs"),1),ah=De(require("path"),1),ch=De(require("querystring"),1),Te=De(Jd(),1),uh=De(nh(),1);uh.default.config();var yA={protocol:"https",host:"localhost",port:3e3,keypath:"./server.key",certpath:"./server.crt",startpage:"index.html"},oe=new Te.default.BraintreeGateway({environment:Te.default.Environment.Sandbox,merchantId:process.env.BRAINTREE_MERCHANT_ID,publicKey:process.env.BRAINTREE_PUBLIC_KEY,privateKey:process.env.BRAINTREE_PRIVATE_KEY});function cs(n,e){return process.env[n]||e}function R(n,e,t="application/json"){n.writeHead(e,{"Content-Type":t,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"})}async function Ae(n){return new Promise((e,t)=>{let r="";n.on("data",i=>{r+=i}),n.on("end",()=>e(r)),n.on("error",t)})}var gA={"/config":{GET:(n,e,t)=>{let r={clientId:cs("BRAINTREE_CLIENT_ID",""),apiKey:cs("BRAINTREE_API_KEY","")};R(e,200),e.end(JSON.stringify(r))}},"/client-token":{GET:async(n,e,t)=>{try{let r=await oe.clientToken.generate({});console.log("generated client token: ",r.clientToken),R(e,200),e.end(JSON.stringify({clientToken:r.clientToken}))}catch{R(e,500),e.end(JSON.stringify({error:"Failed to generate client token"}))}}},"/transaction":{POST:async(n,e,t)=>{try{let r=await Ae(n),{transactionId:i}=JSON.parse(r),o=await oe.transaction.find(i);console.log("generated transaction: ",o),R(e,200),e.end(JSON.stringify({transaction:o}))}catch{R(e,404),e.end(JSON.stringify({error:"Transaction not found"}))}}},"/checkout":{POST:async(n,e,t)=>{try{let r=await Ae(n),{customerId:i,amount:o}=JSON.parse(r),s={amount:o,customerId:i,options:{submitForSettlement:!0}},l=await oe.transaction.sale(s);l.success?(R(e,200),e.end(JSON.stringify({success:!0,transactionId:l.transaction.id}))):(R(e,500),e.end(JSON.stringify({error:l.message})))}catch{R(e,500),e.end(JSON.stringify({error:"Checkout failed"}))}}},"/create-customer":{POST:async(n,e,t)=>{try{let r=await Ae(n),{firstName:i,lastName:o,email:s,paymentMethodNonce:l}=JSON.parse(r),h=await oe.customer.create({firstName:i,lastName:o,email:s,paymentMethodNonce:l});h.success?(R(e,200),e.end(JSON.stringify({success:!0,customerId:h.customer.id}))):(R(e,500),e.end(JSON.stringify({error:h.message})))}catch{R(e,500),e.end(JSON.stringify({error:"Failed to create customer"}))}}},"/get-customer":{POST:async(n,e,t)=>{try{let r=await Ae(n),{customerId:i}=JSON.parse(r),o=await oe.customer.find(i);R(e,200),e.end(JSON.stringify({customer:o}))}catch{R(e,404),e.end(JSON.stringify({error:"Customer not found"}))}}},"/update-customer":{POST:async(n,e,t)=>{try{let r=await Ae(n),{customerId:i,firstName:o,lastName:s,email:l,address:h,city:f,state:b,zip:C,country:I}=JSON.parse(r),m=await oe.customer.update(i,{firstName:o,lastName:s,email:l,creditCard:{billingAddress:{streetAddress:h,locality:f,region:b,postalCode:C,countryCodeAlpha2:I}}});m.success?(R(e,200),e.end(JSON.stringify({success:!0}))):(R(e,500),e.end(JSON.stringify({error:m.message})))}catch{R(e,500),e.end(JSON.stringify({error:"Failed to update customer"}))}}},"/create-submerchant":{POST:async(n,e,t)=>{try{let r=await Ae(n),i=JSON.parse(r),o=process.env.BRAINTREE_MASTER_MERCHANT_ID,s=await oe.merchantAccount.create({individual:i.individual,funding:i.funding,tosAccepted:!0,masterMerchantAccountId:o});if(!s.success){R(e,500),e.end(JSON.stringify({error:s.message}));return}let l=s.merchantAccount.id;R(e,200),e.end(JSON.stringify({success:!0,subMerchantAccountId:l}))}catch{R(e,500),e.end(JSON.stringify({error:"Failed to create submerchant"}))}}},"/split-transaction":{POST:async(n,e,t)=>{try{let r=await Ae(n),i=JSON.parse(r),{subMerchantAccountId:o,amount:s,nonce:l,customerId:h}=i,f=parseFloat(s),C=(f*.02).toFixed(2),I={merchantAccountId:o,amount:s,serviceFeeAmount:C,options:{submitForSettlement:!0}};h?I.customerId=h:l&&(I.paymentMethodNonce=l);let m=await oe.transaction.sale(I);if(!m.success){R(e,500),e.end(JSON.stringify({error:m.message}));return}R(e,200),e.end(JSON.stringify({success:!0,transactionId:m.transaction.id,subMerchantEarnings:(f-parseFloat(C)).toFixed(2),masterMerchantEarnings:C}))}catch{R(e,500),e.end(JSON.stringify({error:"Failed to process split transaction"}))}}},"/transactions":{GET:async(n,e,t)=>{try{let r=await new Promise((i,o)=>{let s=[];oe.transaction.search(l=>{l.createdAt().min(new Date(2e3,0,1))},(l,h)=>{if(l)return o(l);h.each((f,b)=>{if(f)return o(f);s.push(b)},()=>i(s))})});R(e,200),e.end(JSON.stringify({transactions:r}))}catch(r){console.error(r),R(e,500),e.end(JSON.stringify({error:"Failed to fetch transactions"}))}}},"/customers":{GET:async(n,e,t)=>{try{let r=await new Promise((i,o)=>{let s=[];oe.customer.search(l=>{},(l,h)=>{if(l)return o(l);h.each((f,b)=>{if(f)return o(f);s.push(b)},()=>i(s))})});R(e,200),e.end(JSON.stringify({customers:r}))}catch(r){console.error(r),R(e,500),e.end(JSON.stringify({error:"Failed to fetch customers"}))}}},"/get-submerchant":{POST:async(n,e,t)=>{try{let r=await Ae(n),{merchantAccountId:i}=JSON.parse(r),o=await new Promise((s,l)=>{oe.merchantAccount.find(i).then(h=>{s(h)}).catch(h=>{if(h)return l(h)})});R(e,200),e.end(JSON.stringify({subMerchant:o}))}catch(r){console.error(r),R(e,404),e.end(JSON.stringify({error:"Submerchant not found"}))}}},"/submerchants":{GET:async(n,e,t)=>{try{if(!ne.existsSync("approved_submerchants.txt")){R(e,200),e.end(JSON.stringify({submerchants:[]}));return}let i=(await ne.promises.readFile("approved_submerchants.txt","utf-8")).split(`
`).filter(s=>s.trim()!==""),o=await Promise.all(i.map(async s=>{try{return await oe.merchantAccount.find(s)}catch{return{id:s,error:"Submerchant not found"}}}));R(e,200),e.end(JSON.stringify({submerchants:o}))}catch{R(e,500),e.end(JSON.stringify({error:"Failed to fetch submerchants"}))}}},"/webhook":{POST:async(n,e,t)=>{try{let r=await Ae(n),i=ch.parse(r),o=i.bt_signature,s=i.bt_payload;oe.webhookNotification.parse(o,s,(l,h)=>{if(l){R(e,500),e.end(JSON.stringify({error:"Failed to parse webhook notification"}));return}switch(console.log(`
 WEBHOOK NOTIFICATION: `,h.message),h.kind){case Te.default.WebHookNotification.Kind.SubMerchantAccountApproved:ne.appendFile("approved_submerchants.txt",h.merchantAccount.id+`
`,f=>{f&&console.error("Error writing approved submerchant:",f)});break;case Te.default.WebhookNotification.Kind.SubMerchantAccountDeclined:break;case Te.default.WebhookNotification.Kind.TransactionDisbursed:case Te.default.WebhookNotification.Kind.TransactionSettled:ne.appendFile("successful_transactions.txt",h.transaction.id+`
`,f=>{f&&console.error("Error writing successful transaction:",f)});break;case Te.default.WebhookNotification.Kind.TransactionSettlementDeclined:ne.appendFile("declined_transactions.txt",h.transaction.id+`
`,f=>{f&&console.error("Error writing declined transaction:",f)});break;default:console.log("Received webhook notification of kind:",h.kind)}R(e,200),e.end(JSON.stringify({received:!0}))})}catch{R(e,500),e.end(JSON.stringify({error:"Failed to process webhook"}))}}}};function ih(n,e,t){if(n.method==="OPTIONS"){R(e,200),e.end();return}let r=gA[n.url||""];if(r){let s=r[n.method||""];if(s){Promise.resolve(s(n,e,t)).catch(l=>{console.error(l),R(e,500),e.end(JSON.stringify({error:"Internal Server Error"}))});return}else{R(e,405,"text/html"),e.end("Method Not Allowed");return}}let i=n.url||"";(i==="/"||i==="")&&(i="/"+t.startpage);let o="."+i;ne.existsSync(o)?ne.readFile(o,(s,l)=>{if(s)R(e,500,"text/html"),e.end("Internal Server Error");else{let h=String(ah.extname(o)).toLowerCase();R(e,200,{".html":"text/html",".js":"application/javascript",".json":"application/json"}[h]||"application/octet-stream"),e.end(l,"utf-8")}}):(R(e,404,"text/html"),e.end("404 Not Found","utf-8"))}function IA(n){if(n.protocol==="http")return sh.createServer((e,t)=>ih(e,t,n));if(n.protocol==="https"){let e={key:ne.readFileSync(n.keypath),cert:ne.readFileSync(n.certpath)};return oh.createServer(e,(t,r)=>ih(t,r,n))}throw new Error("Invalid protocol specified")}function wA(n){n.port=Number(cs("PORT",n.port));let e=IA(n);return e.listen(n.port,n.host,()=>{console.log(`Server running at ${n.protocol}://${n.host}:${n.port}/`)}),e}wA(yA);
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
